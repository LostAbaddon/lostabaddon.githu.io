global.setTimeout&&(global.setImmediate=global.setImmediate||function(s){setTimeout(s,0)},global.nextTick=global._env==="browser"?global.setImmediate:process&&process.nextTick||global.setImmediate,global.wait=promisify((s,t)=>{var e=new Date().getTime();Function.is(s)&&(t=s,s=0),setTimeout(()=>t(new Date().getTime()-e),s)}),global.waitLoop=promisify(s=>{var t=new Date().getTime();setImmediate(()=>s(new Date().getTime()-t))}),global.waitTick=promisify(s=>{var t=new Date().getTime();nextTick(()=>s(new Date().getTime()-t))}),global.queueMicrotask&&(global.waitQueue=promisify(s=>{var t=new Date().getTime();queueMicrotask(()=>s(new Date().getTime()-t))}))),global._env==="node"?global.now=()=>{var s=process.hrtime();return s[0]*1e3+s[1]/1e6}:global.now=()=>Date.now(),global.Clock=class{constructor(t="Initialized",e=!1){this.stamps=[],this.isNode=!!global.process,this.isNode&&!e?this.clock=()=>{var a=process.hrtime();return a[0]+a[1]/1e9}:this.clock=()=>new Date().getTime()/1e3,this.stamp(t)}stamp(t=""){var e=this.clock();return this.stamps.push([e,t]),e}list(t=!0){var e=this.stamps[0][0],a=this.stamps.length,r,o=0;return r=this.stamps.map(i=>{var l=[i[0]-e,i[1]];e=i[0];var m=i[1].length;return m>o&&(o=m),l}),t?(r=r.map(i=>{var l=i[1],m=i[0];return l=l.padStart(o," "),l+"	"+m}),r.join(`
`)):r}getStamp(t){if(!t)return-1;var e=-1;return this.stamps.some(a=>a[1]===t?(e=a[0],!0):!1),e}spent(t,e){return e?(t=this.getStamp(t),t<0&&(t=this.stamps[0][0]),e=this.getStamp(e),e<0&&(e=this.stamps[this.stamps.length-1][0])):(e=this.getStamp(t),e<0&&(e=this.stamps[this.stamps.length-1][0]),t=this.stamps[0][0]),e-t}};
