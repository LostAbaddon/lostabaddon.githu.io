(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79a2b502"],{"0c20":function(t,e,c){"use strict";c("b8b6")},"3cd4":function(t,e,c){"use strict";c.r(e);var a=c("79c4");const i=Object(a["D"])("data-v-2cddcdcf");Object(a["t"])("data-v-2cddcdcf");const n={class:"infoPad"},s=Object(a["h"])("span",{class:"hint"},"文档数：",-1),o={ref:"count",class:"info"},l=Object(a["h"])("span",{class:"sep"},null,-1),r={class:"articleList"},h={class:"article"},d={class:"controller right"},u={class:"category"};Object(a["r"])();const b=i((t,e,c,i,b,p)=>(Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["h"])("section",n,[s,Object(a["h"])("span",o,"0",512),l,Object(a["h"])("span",{class:"hint right clickable",onClick:e[1]||(e[1]=(...t)=>p.newArticle&&p.newArticle(...t))},"添加文档")]),Object(a["h"])("section",r,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(b.list,t=>(Object(a["q"])(),Object(a["d"])("div",h,[Object(a["h"])("span",{class:"title",onClick:e=>p.openArticle(t.id)},Object(a["z"])(t.name),9,["onClick"]),Object(a["h"])("span",d,[Object(a["h"])("span",u,Object(a["z"])(t.category),1),Object(a["h"])("span",{class:"button",onClick:e=>p.modifyArticle(t.id)},"编辑",8,["onClick"]),Object(a["h"])("span",{class:"button",onClick:e=>p.removeArticle(t.id,t.title)},"删除",8,["onClick"])])]))),256))])],64)));var p={};const j=(t,e,c="")=>{for(let a in e){if(!a)continue;if(["tools","entertain","library"].includes(a))continue;let i=e[a],n=c+"/"+a;t[n]=i.name;let s=i.subs;s&&j(t,s,n)}};j(p,SiteMap);var O={name:"LocalLibrary",data(){return{list:[]}},components:{},async mounted(){await this.updateList(),callPageLoaded()},unmounted(){},methods:{async updateList(){var t=await BookShelf.getAllArticles();this.$refs.count.innerText=t.length,t.reverse().forEach(t=>{t.author!==this.SiteOwner?t.name=t.title+" ("+t.author+")":t.name=t.title,t.category.length>0?t.category=t.category.map(t=>p[t]||t).join("; "):t.category="未分类"}),this.list.splice(0,this.list.length,...t)},newArticle(){this.$router.push({path:"/tools/markupEditor",query:{action:"newfile"}})},openArticle(t){this.$router.push({path:"/view",query:{l:t}})},modifyArticle(t){this.$router.push({path:"/tools/markupEditor",query:{action:t}})},removeArticle(t,e){showInfobox({title:"确认删除文章《"+e+"》么？",action:"yn",callback:async(e,c,a)=>{"yes"===e&&(await BookShelf.removeArticle(t),await this.updateList())}})}}};c("0c20");O.render=b,O.__scopeId="data-v-2cddcdcf";e["default"]=O},b8b6:function(t,e,c){}}]);
//# sourceMappingURL=chunk-79a2b502.js.map