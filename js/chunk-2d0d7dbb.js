(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7dbb"],{7936:function(e,t,r){"use strict";r.r(t);var a=r("79c4");const o={ref:"ToolBar",class:"markup-editor toolbar"},i=Object(a["h"])("div",{class:"wordcount-hint"},[Object(a["h"])("span",null,"字数："),Object(a["h"])("span",{class:"count"})],-1),n={class:"markup-editor container"},d={class:"scroller editorContainer"},l={ref:"Editor",class:"inputter",contenteditable:"true"},s=Object(a["h"])("div",{class:"sepBar"},null,-1),c={class:"scroller previewContainer"},u={ref:"Previewer",class:"previewer"};function h(e,t,r,h,p,b){return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["h"])("div",o,[i],512),Object(a["h"])("div",n,[Object(a["h"])("div",d,[Object(a["h"])("div",l,null,512)]),s,Object(a["h"])("div",c,[Object(a["h"])("div",u,null,512)])]),Object(a["h"])("input",{ref:"FileLoader",type:"file",onChange:t[1]||(t[1]=e=>b.readFile())},null,544)],64)}var p=!1;(async()=>{await Promise.all([loadCSS("/css/editor.css"),loadJS("/js/editor.js")]),p=!0;for(let e of b)e()})();const b=new Set,f=()=>new Promise(e=>{if(p)return e();b.add(e)});new BroadcastChannel("route-updated").addEventListener("message",({data:e})=>{location.hash.indexOf("tools/markupEditor")>0?document.body.setAttribute("mode","editor"):document.body.removeAttribute("mode")});var w=null,m={name:"MarkupEditor",data(){return{}},components:{},async mounted(){w=this,await f();var e=initMarkUpEditor(this.$refs.Editor,this.$refs.ToolBar,this.$refs.Previewer,this.$refs.ToolBar.querySelector("div.wordcount-hint span.count"),{close:()=>(this.$router.push({path:"/"}),!0),help:()=>{var e=window.open("/#/markup");return e.focus(),!0},"download-file":e=>{var t=e.getContent(),r=e.filename;return r||(r=e.title?e.title+".mu":"untitled.mu"),this.download(r,t),!0},"upload-file":e=>(this.$refs.FileLoader.accept=".mu",this.$refs.FileLoader.click(),!0)});w.markupEditor=e,callPageLoaded()},unmounted(){w=null},methods:{download:(e,t)=>{var r=new Blob([t],{type:"text/plain"}),a=URL.createObjectURL(r),o=newEle("a");o.setAttribute("href",a),e?o.setAttribute("download",e):o.setAttribute("download","untitled.mu"),o.click()},readFile:()=>{var e=w.$refs.FileLoader.files[0];if(e){var t=new FileReader;t.onload=()=>{w.markupEditor.read(e.name,t.result)},t.readAsText(e),w.$refs.FileLoader.value=""}}}};m.render=h;t["default"]=m}}]);
//# sourceMappingURL=chunk-2d0d7dbb.js.map