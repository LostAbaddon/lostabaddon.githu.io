(function(e){function t(t){for(var r,n,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&h.push(i[n][0]),i[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var o=a[n];0!==i[o]&&(r=!1)}r&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={index:0},i={index:0},s=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-13296a72":"4ba29dc8","chunk-26bb8265":"11023f3b","chunk-2d0c4d67":"fb0da9e2","chunk-2d0cbe04":"a594d5f7","chunk-2d0e95df":"9fe50219","chunk-2d224ac2":"6ecdc55d","chunk-385f6f36":"87f36e69","chunk-723b369b":"5546d5ae","chunk-7aa8038a":"736db46f","chunk-b63b098a":"02011dc3"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-13296a72":1,"chunk-26bb8265":1,"chunk-385f6f36":1,"chunk-723b369b":1,"chunk-7aa8038a":1,"chunk-b63b098a":1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var r="css/"+({}[e]||e)+"."+{"chunk-13296a72":"2612cdad","chunk-26bb8265":"d56851dc","chunk-2d0c4d67":"31d6cfe0","chunk-2d0cbe04":"31d6cfe0","chunk-2d0e95df":"31d6cfe0","chunk-2d224ac2":"31d6cfe0","chunk-385f6f36":"6f505438","chunk-723b369b":"e433e236","chunk-7aa8038a":"4179a725","chunk-b63b098a":"a162ac04"}[e]+".css",i=l.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===i))return t()}var h=document.getElementsByTagName("style");for(o=0;o<h.length;o++){c=h[o],u=c.getAttribute("data-href");if(u===r||u===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete n[e],p.parentNode.removeChild(p),a(s)},p.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){n[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,a){r=i[e]=[t,a]}));t.push(r[2]=s);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=o(e);var h=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=i[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",h.name="ChunkLoadError",h.type=r,h.request=n,a[1](h)}i[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var p=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"068a":function(e,t){const a=(e,t,a,r)=>{isNaN(r)&&(r=a);var n=e.match(t);return n=n?n.length:r,n<a&&(n=a),n},r=(e,t)=>{if(0===t)return"";var a=e.length;return a>t?e=e.substring(a-t,a):a<t&&(e=e.padStart(t,"0")),e},n=(e,t,a,r)=>{var n=[];return e.length>0&&n.push(e),t.length>0&&n.push(t),a.length>0&&n.push(a),n.join(r)},i=(e,t,a,r,n)=>{var i=[];e.length>0&&i.push(e),t.length>0&&i.push(t),a.length>0&&i.push(a);var s=i.join(n);return r.length>0&&(s+="."+r),s},s=(e,t="YYYYMMDDhhmmss",s="/",o=":",l=" ")=>{e=e||new Date;var c=a(t,/Y/g,0,0),u=a(t,/M/g,1,0),h=a(t,/D/g,1,0),p=a(t,/h/g,0,0),f=a(t,/m/g,0,0),d=a(t,/s/g,0,0),m=a(t,/x/g,0),g=r(e.getYear()+1900+"",c),v=r(e.getMonth()+1+"",u),y=r(e.getDate()+"",h),b=r(e.getHours()+"",p),w=r(e.getMinutes()+"",f),_=r(e.getSeconds()+"",d),k=r(e.getMilliseconds()+"",m),x=n(g,v,y,s),C=i(b,w,_,k,o);return 0===C.length?x:x+l+C};_("Utils").getTimeString=s},1214:function(e,t){const a=new BroadcastChannel("fetch-data"),r={server:"",DB:null,ready:!1,API:"/api",DataGranary:"/api/granary",async init(){r.DB=new CachedDB("APIData",1),r.DB.onUpdate(()=>{r.DB.open("data","url",10),console.log("Barn::CacheStorage::APIData Updated")}),r.DB.onConnect(()=>{console.log("Barn::CacheStorage::APIData Connected")}),await r.DB.connect(),r.ready=!0;var e=[...r.waiters];r.waiters=[],e.forEach(e=>e())},waiters:[],waitForReady:()=>new Promise(e=>{if(r.ready)return e();r.waiters.push(e)}),get(e,t=!1,n=0){return new Promise(async i=>{r.ready||await r.waitForReady();var s=await r.DB.get("data",e);if(!(s&&(i(s.data),t&&n<=s.update))){var o;try{o=await axios.get(r.server+e)}catch(l){o=null,console.error(l)}o&&(o=o.data),o&&(await r.DB.set("data",e,{data:o,update:n||Date.now()}),s&&a.postMessage({url:e,data:o})),s||i(o)}})},async clearAllCache(){r.DB.clearCache("data"),await r.DB.clear("data")}};window.Granary={async getSource(e,t){var a={articles:[],comments:[]};return await Promise.all(Array.generate(t+1).map(async n=>{var i=r.API+"/"+e+"-"+n+".json",s=await r.get(i,t!==n);String.is(s)||(a.articles.push(...s.articles),a.comments.push(...s.comments))})),a.articles.sort((e,t)=>t.publish-e.publish),a.comments.sort((e,t)=>t.publish-e.publish),a},async getCategory(e){var t=await r.get(r.API+"/sources.json",!1),a=[];return t&&t.sources?(await Promise.all(t.sources.map(async t=>{var r=await Granary.getSource(t.owner,t.pages);r=r.articles.filter(t=>0===t.sort.indexOf(e)),a.push(...r)})),a.sort((e,t)=>t.publish-e.publish),a):a},async getColumnHeader(e){var t=await r.get(r.API+"/sources.json",!1);t=t||{},t.update=t.update||0;var a,n=r.DataGranary+"/";e&&(n=n+e+"/"),n+="info.md";try{a=await r.get(n,!0,t.update),a=a||""}catch{a=""}return a},async getArticle(e,t=0){if(t<=0){var a=await r.get(r.API+"/sources.json",!1);a=a||{},t=a.update||0}var n;e=r.DataGranary+"/"+e;try{n=await r.get(e,!0,t),n=n||""}catch{n="你所寻找的文件不存在！"}return n},async getContent(e,t=!0){if(t){var a=await r.get(r.API+"/sources.json",!1);a=a||{},timestamp=a.update||0}var n;try{n=await r.get(e,t,timestamp),n=n||""}catch(i){n="你所寻找的文件不存在！"}return n},async clearAllCache(){sessionStorage.clear();var e=[caches.delete("schwarzschild"),r.clearAllCache()];await Promise.all(e)}},a.addEventListener("message",e=>{console.log("DataUpdated: "+e.data.url)}),r.init()},2231:function(e,t){Symbol.set=Symbol.setSymbols=function(e,t){String.is(e)?(t=[].map.call(arguments,e=>e),e=null):Array.is(e)&&!t&&(t=e,e=null),e=e||{};var a={},r={};return t.forEach(t=>{if(t=t.split("|"),0!==t.length){t.length<2&&(t[1]=t[0]);var n=t[1];t=t[0];var i=Symbol(t);a[i]=n,r[t]=n,Object.defineProperty(e,t,{value:i,configurable:!1,enumerable:!0})}}),e.toString=e=>a[e]||r[e]||"No Such Symbol",Object.defineProperty(e,"toString",{enumerable:!1}),e},Symbol.is=e=>Symbol.__proto__===Symbol.prototype||"symbol"===typeof e},2294:function(e,t,a){},3202:function(e,t){(async()=>{if(!navigator.serviceWorker)return;const e=new BroadcastChannel("service-messages");if(e.addEventListener("message",e=>{console.log("CacheUpdated: "+e.data.url+" ("+e.data.timestamp+")")}),window.caches){let e=await caches.keys();e.length>0&&e.forEach(async e=>{var t=await caches.open(e),a=await t.keys();console.log("资源缓存库 "+e+": "+a.length)})}try{let e=await navigator.serviceWorker.getRegistrations();console.log("Service Worker: "+e.length);for(let t of e)t.waiting&&(console.log("有等待中的新版本 Service Worker"),Vue.notify({title:"有新版网站中台等待更新",text:"新版 Service Worker 将在下次打开本页面后启用。",type:"warn",position:"top right","animation-type":"velocity"}))}catch(t){console.error("获取已安装 Service 出错：",t)}try{let e=await navigator.serviceWorker.register("/priory.js");e.onupdatefound=e=>{e.target.update()},console.log("安装 Service Worker "+(e?"成功":"失败"))}catch(t){console.error("安装本地 Service 出错：",t)}})()},"346c":function(e,t,a){},"3dfd":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("NavBar"),a("notifications",{staticClass:"notification"}),a("loading"),a("ImageShowcase"),a("div",{attrs:{id:"container"}},[a("router-view")],1),a("div",{attrs:{id:"footnoteFrame"}}),a("TailBar"),a("div",{staticClass:"masker",on:{click:e.onClick}})],1)},n=[],i={name:"App",methods:{onClick(){document.querySelector(".masker").classList.remove("show")}}},s=i,o=a("e032"),l=Object(o["a"])(s,r,n,!1,null,null,null);t["a"]=l.exports},"4cf0":function(e,t,a){},5563:function(e,t){(()=>{class e{constructor(e,t){this._name=e,this._version=t,this.conn=null,this.db=null,this.cbUpdates=[],this.cbConnects=[],this.caches={}}connect(){return new Promise((e,t)=>{this.conn=indexedDB.open(this.name,this.version),this.conn.onupgradeneeded=e=>{this.db=this.conn.result,this.cbUpdates.forEach(e=>e(this))},this.conn.onsuccess=t=>{this.db=this.conn.result,this.cbConnects.forEach(e=>e(this)),e(this)},this.conn.onerror=e=>{t(e)}})}onConnect(e){this.cbConnects.push(e)}onUpdate(e){this.cbUpdates.push(e)}open(e,t="id",a=100){if(!this.db.objectStoreNames.contains(e)){let a=this.db.createObjectStore(e,{keyPath:t});a.createIndex(t,t,{unique:!0})}}cache(e,t){this.caches[e]||(this.caches[e]=new LRUCache(t))}set(e,t,a){return new Promise((r,n)=>{var i=this.db.transaction([e],"readwrite");i||n(new Error("Open IndexedDB Transaction Failed: "+e));var s=i.objectStore(e);e||n(new Error("Open IndexedDB ObjectStore Failed: "+e));var o={};o[s.keyPath]=t,o.data=a;var l=s.put(o);l.onsuccess=n=>{var i=this.caches[e];i&&i.set(t,a),r(n.result)},l.onerror=e=>{n(e)}})}get(e,t){return new Promise((a,r)=>{var n=this.db.transaction([e],"readonly");n||r(new Error("Open IndexedDB Transaction Failed: "+e));var i=n.objectStore(e);e||r(new Error("Open IndexedDB ObjectStore Failed: "+e));var s,o=i.index(i.keyPath),l=this.caches[e];if(l&&(s=l.get(t),void 0!==s))return a(s);s=o.get(t),s.onsuccess=e=>{e.target.result?a(e.target.result.data):a(void 0)},s.onerror=e=>{r(e)}})}all(e){return new Promise((t,a)=>{var r=this.db.transaction([e],"readonly");r||a(new Error("Open IndexedDB Transaction Failed: "+e));var n=r.objectStore(e);e||a(new Error("Open IndexedDB ObjectStore Failed: "+e));var i=n.index(n.keyPath),s=i.getAll();s.onsuccess=e=>{var a=e.target.result;if(!a)return t(a);var r={};a.forEach(e=>{r[e[n.keyPath]]=e.data}),t(r)},s.onerror=e=>{a(e)}})}del(e,t){return new Promise((a,r)=>{var n=this.db.transaction([e],"readwrite");n||r(new Error("Open IndexedDB Transaction Failed: "+e));var i=n.objectStore(e);e||r(new Error("Open IndexedDB ObjectStore Failed: "+e));var s=i.delete(t);s.onsuccess=r=>{var n=this.caches[e];n&&n.del(t),a(r.result)},s.onerror=e=>{r(e)}})}clear(e){return new Promise((t,a)=>{var r=this.db.transaction([e],"readwrite");r||a(new Error("Open IndexedDB Transaction Failed: "+e));var n=r.objectStore(e);e||a(new Error("Open IndexedDB ObjectStore Failed: "+e));var i=n.clear();i.onsuccess=a=>{var r=this.caches[e];r&&r.clear(),t(a.result)},i.onerror=e=>{a(e)}})}clearCache(e){var t=this.caches[e];t&&t.clear()}get name(){return this._name}get version(){return this._version}}window.CachedDB=e})()},"55a5":function(e,t,a){(function(e,t,a){try{window?(window.global=window,e._env="browser",e.require=()=>{},e.module={exports:{}}):e._env="node"}catch(r){e._env="node"}t&&t.execArgv&&!t.execArgv.includes("--expose-gc")&&(e.gc=()=>{}),e.noEventModules||e._canThread,"node"===e._env&&(e.loadjLAssModule=e=>{loadall(a,"./"+e)})}).call(this,a("950f"),a("3cbd"),"/")},"55f6":function(e,t){Boolean.is=e=>"boolean"===typeof e||e instanceof Boolean,BigInt.is=e=>"bigint"===typeof e||e instanceof BigInt,Number.is=e=>"number"===typeof e||e instanceof Number,Object.isBasicType=e=>!!String.is(e)||(!!Boolean.is(e)||(!!BigInt.is(e)||(!!Number.is(e)||!!Symbol.is(e)))),Object.prototype.copy=function(){return Object.assign({},this)},Object.prototype.duplicate=function(){var e={};for(let t in this){let a=this[t];Object.isBasicType(a)?e[t]=a.valueOf():null===a||void 0===a?e[t]=a:a instanceof Date?e[t]=new Date(a.getTime()):"object"!==typeof a||a instanceof Promise||(e[t]=a.duplicate())}return Object.assign({},this,e)},Object.prototype.extent=function(...e){var t=Object.assign({},this);e.reverse(),Object.assign(this,...e,t)},Object.defineProperty(Object.prototype,"copy",{enumerable:!1}),Object.defineProperty(Object.prototype,"duplicate",{enumerable:!1}),Object.defineProperty(Object.prototype,"extent",{enumerable:!1}),Number.prototype.duplicate=function(){return 1*this},Object.defineProperty(Number.prototype,"duplicate",{enumerable:!1}),BigInt.prototype.duplicate=function(){return 1n*this},Object.defineProperty(BigInt.prototype,"duplicate",{enumerable:!1}),Boolean.prototype.duplicate=function(){return!1!==this&&!1!==this.valueOf()},Object.defineProperty(Boolean.prototype,"duplicate",{enumerable:!1})},"56d7":function(e,t,a){"use strict";a.r(t),function(e){a("55a5"),a("5abc"),a("9eab"),a("b9a5"),a("78d8"),a("746b"),a("55f6"),a("64c5"),a("2231"),a("ea3a"),a("068a"),a("cbfc"),a("ef5b"),a("3202"),a("dc94"),a("5563"),a("1214"),a("6ae3"),a("fc58");var t=a("e832"),r=a("66d6"),n=a.n(r),i=a("7338"),s=a.n(i),o=a("3dfd"),l=a("a18c"),c=a("c428"),u=a("aab0"),h=a("9d8d"),p=a("b2e4"),f=a("d61b"),d=a("bfef"),m=a("8397"),g=a("c531");((e,t,a)=>{e.Devices={},Devices.isAndroid=!!t.match(/Android/i),Devices.isiPhone=!!t.match(/iPhone/i),Devices.isiPad=!!t.match(/iPad/i),Devices.isiPod=!!t.match(/iPod/i),Devices.isiOS=Devices.isiPhone||Devices.isiPad||Devices.isiPod,Devices.isBlackBerry=!!t.match(/BlackBerry/i),Devices.isIE=a.pointerEnabled||a.msPointerEnabled,Devices.isSafari=t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0,Devices.isOpera=!!t.match(/Opera/i)&&!t.match(/Opera Mini/i),Devices.isOperaMini=!!t.match(/Opera Mini/i),Devices.isWinPhone=!!t.match(/IEMobile/i)||!!t.match(/WPDesktop/i),Devices.isWebOS=!!t.match(/webOS/i),Devices.isUiWebView=!!t.match(/AppleWebKit/i),Devices.isMobile=Devices.isAndroid||Devices.isiOS||Devices.isBlackBerry||Devices.isWinPhone||Devices.isWebOS,Devices.isMobile?document.body.classList.add("mobile"):document.body.classList.add("notmobile")})(window,window.navigator.userAgent,window.navigator),window.loadJS=e=>new Promise(t=>{var a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=t,a.onerror=t,document.body.appendChild(a)}),window.loadCSS=e=>new Promise(t=>{var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,a.onload=t,a.onerror=t,document.body.appendChild(a)}),a("346c"),a("aa46"),a("5aea"),a("2294"),a("9a67"),a("4cf0"),a("6851"),a("899d"),a("6f45"),a("8f09"),e.axios=s.a,e.Vue=t["default"],t["default"].prototype.SiteName="预死者协会",t["default"].use(n.a),t["default"].component("Loading",c["a"]),t["default"].component("ImageShowcase",u["a"]),t["default"].component("NavBar",h["a"]),t["default"].component("NavMenuBar",p["a"]),t["default"].component("NavMenuItem",f["a"]),t["default"].component("TailBar",d["a"]),t["default"].component("Crumb",m["a"]),t["default"].component("Column",g["a"]),t["default"].config.productionTip=!1;var v=!0;t["default"].prototype.afterMarkUp=async()=>{v?(v=!1,InitNotes(document.body.querySelector("#container")),MathJax.Hub.Config({extensions:["tex2jax.js"],TeX:{extensions:["AMSmath.js","AMSsymbols.js"]},jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"]]}}),MathJax.Hub.Queue(["Typeset",MathJax.Hub])):MathJax.Hub.Queue(["Typeset",MathJax.Hub]),await ImageWall.init()};const y=new MutationObserver(e=>{var a=document.querySelectorAll(".markup");[].forEach.call(a,e=>{var t=e.innerText;t=t.replace(/^\t+|\t+$/g,"\n"),t=MarkUp.parse(t,{toc:e.classList.contains("toc"),glossary:e.classList.contains("glossary"),resources:e.classList.contains("resources"),showtitle:e.classList.contains("showtitle"),showauthor:!1,classname:"markup-content"}),e.innerHTML=t,e.classList.remove("markup")}),a.length>0&&t["default"].prototype.afterMarkUp()});y.observe(document.body,{childList:!0,subtree:!0}),e.changeThemeColor=e=>{e&&(localStorage.setItem("themeColor",e),document.body.setAttribute("theme",e))},changeThemeColor(localStorage.getItem("themeColor")),new t["default"]({router:l["a"],render:function(e){return e(o["a"])}}).$mount("#app")}.call(this,a("950f"))},"5abc":function(e,t,a){(function(e){const t=new Map;e._=(a,r)=>{if(a=a.split(/[\/\\,\.\:;]/).map(e=>e.trim()).filter(e=>e.length>0),a.length<1)return e;if(a=a.join("/"),r)return t.set(a,r),r;if(r=t.get(a),r)return r;var n=[...t.keys()];return n=n.filter(e=>0===e.indexOf(a)),r={},n.forEach(e=>{var n=t.get(e);e=e.replace(a+"/",""),e=e.split("/");var i=e.pop(),s=r;e.forEach(e=>{s[e]&&(s[e]={}),s=s[e]}),s[i]=n}),r},_("Utils",{})}).call(this,a("950f"))},"5aea":function(e,t,a){},"64c5":function(e,t,a){(function(e,t){const a=[];(()=>{for(let e=0;e<10;e++)a.push(""+e);for(let e=65;e<=90;e++)a.push(String.fromCharCode(e));for(let e=97;e<=122;e++)a.push(String.fromCharCode(e))})(),String.random=e=>{var t="";for(let r=0;r<e;r++)t+=a[Math.floor(a.length*Math.random())];return t},String.blank=(e,t=" ")=>{var a="";for(let r=0;r<e;r++)a+=t;return a},String.is=e=>e instanceof String||"string"===typeof e,String.prototype.copy=String.prototype.duplicate=function(){return String(this).toString()},Object.defineProperty(String.prototype,"copy",{enumerable:!1}),Object.defineProperty(String.prototype,"duplicate",{enumerable:!1}),"node"===e._env&&Object.defineProperty(String.prototype,"byteLength",{get(){var e=t.from(this,"utf8");return e.byteLength},enumerable:!1,configurable:!1})}).call(this,a("950f"),a("608e").Buffer)},6851:function(e,t,a){},"6ae3":function(e,t){window.InitNotes=e=>{const t=document.querySelector("#footnoteFrame");t._status=0,e.addEventListener("transitionstart",async a=>{var r=a.target,n=r.className;if("notemark"===n||"terminology"===n){var i=r.computedStyleMap();i=i.get("text-decoration").toString();var s=!1;if(i.indexOf("underline")>=0&&(s=!0),s){var o=r.getAttribute("href");if("#"!==o.substr(0,1))return;o=o.substring(1,o.length);var l=e.querySelector('a[name="'+o+'"]');if(!l)return;var c=l.parentElement.innerHTML.replace(l.outerHTML,""),u="";"terminology"===n&&(u='<p class="note-title">'+r.innerText+"</p>"),u+='<p class="note-content">'+c+"</p>",t.innerHTML=u,t._status=1;var h=r.getBoundingClientRect(),p=!0,f=!0,d=h.left-10,m=h.top+h.height+10;d>.6*window.innerWidth&&(f=!1,d=window.innerWidth-h.right),m>.7*window.innerHeight&&(p=!1,m=window.innerHeight-h.top),f?(t.style.left=d+"px",t.style.right=""):(t.style.left="",t.style.right=d+"px"),p?(t.style.top=m+"px",t.style.bottom=""):(t.style.top="",t.style.bottom=m+"px"),t.style.display="block",await wait(50),t.style.opacity="1",t._status=2}else t.style.opacity="0",await wait(200),2===t._status&&(t.style.display="none",t._status=0)}})}},"6f45":function(e,t,a){},"746b":function(e,t){Math.pick=e=>{if(Array.is(e)){let t=Math.floor(Math.random()*e.length);return e[t]}return isNaN(e)?null:Math.random()<=e},Math.range=(e,t)=>(isNaN(t)&&(t=e,e=0),e+Math.random()*(t-e))},7547:function(e,t,a){"use strict";(function(e){const a=e=>{var t={};return e.forEach(e=>{var r={name:e.name,type:e.type};e.subs&&(r.subs=a(e.subs)),t[e.category]=r}),t};e.getPathNameList=(t,a=!0)=>{if(!e.SiteMap)return null;var r=e.SiteMap,n=[],i=[];return t.some((e,t)=>{if(!r)return!0;var a=r[e];if(!a)return!0;var s={name:a.name};n.push(e),"page"===a.type?s.path="/"+n.join("/"):"viewer"!==a.type&&"view"!==a.type&&"folder"!==a.type||(s.path="/category?c="+n.join(",")),r=a.subs,i.push(s)}),a&&i.unshift({name:"首页",path:"/"}),i},t["a"]={name:"NavBar",data(){return{menu:[{name:"随笔",type:"viewer",category:"essay",subs:[{name:"头脑风暴",type:"viewer",category:"mindstorm"},{name:"书评影评",type:"viewer",category:"reviews"},{name:"闲扯",type:"viewer",category:"issue"}]},{name:"格物致知",type:"viewer",category:"science",subs:[{name:"数学",type:"viewer",category:"math",subs:[{name:"组合数学",type:"viewer",category:"combination"},{name:"数论",type:"viewer",category:"number"},{name:"几何",type:"viewer",category:"geometry"}]},{name:"物理",type:"viewer",category:"physics",subs:[{name:"广义相对论",type:"viewer",category:"gravity"},{name:"规范场论",type:"viewer",category:"gauge"},{name:"复杂网络",type:"viewer",category:"complexnetwork"},{name:"量子计算",type:"viewer",category:"quantumcompute"},{name:"虚构",type:"viewer",category:"virtual"}]},{name:"算法信息论",type:"viewer",category:"AIT"},{name:"IT相关",type:"viewer",category:"IT"}]},{name:"虚拟世界",type:"viewer",category:"novel",subs:[{name:"科幻",type:"viewer",category:"scific"},{name:"奇幻",type:"viewer",category:"magic"},{name:"推理",type:"viewer",category:"detective"}]},{name:"实用工具",type:"folder",category:"tools",subs:[{name:"写字板",type:"page",category:"writer"},{name:"计算器",type:"page",category:"calculator"}]},{name:"休闲娱乐",type:"folder",category:"entertain",subs:[{name:"诡异哥布林与不靠谱守卫",type:"page",category:"bunceball"},{name:"三消俄罗斯方块（迁移中）",type:"page",category:"tritetris"},{name:"无尽2048（迁移中）",type:"page",category:"infinity2048"},{name:"普通的五子棋（迁移中）",type:"page",category:"rushgo"}]},{name:"资料库",type:"folder",category:"library",subs:[{name:"颜色表",type:"page",category:"",subs:[{name:"中国古代常用色",type:"page",category:"chinesecolor"},{name:"日本古代常用色",type:"page",category:"japanesecolor"}]},{name:"码库",type:"page",category:"",subs:[{name:"MarkUp 语法表",type:"page",category:"markup"},{name:"LaTeX 数学公式",type:"page",category:"latex"}]}]}],aboutMe:"aboutMe"}},computed:{aboutMenu(){var e=[{name:"配色",type:"action",category:"color",subs:[{name:"亮",type:"action",category:"light"},{name:"淡",type:"action",category:"normal"},{name:"黯",type:"action",category:"dark"}]},{name:"本站",type:"page",category:"about"}];return this.aboutMe?(e[1]={name:"关于",type:"page",category:"",subs:[e[1]]},e[1].subs.unshift({name:"本站",type:"page",category:this.aboutMe}),e[1].subs[1].name="系统"):e[1].name="关于",e}},mounted(){e.SiteMap=a(this.menu)},methods:{onClick(){Devices.isMobile&&document.querySelector(".masker").classList.add("show")}}}}).call(this,a("950f"))},"78d8":function(e,t,a){(function(e){Function.is=e=>e instanceof Function,e.AsyncFunction=(async()=>{}).constructor,AsyncFunction.is=e=>e instanceof AsyncFunction;const t=e=>{if(!(e instanceof Function))return null;if(e._promised)return e;var t=(...t)=>new Promise((a,r)=>{try{e(...t,a,r)}catch(n){r(n)}});return t._promised=!0,t._original=e,t};t.withTimeout=e=>{if(!(e instanceof Function))return null;if(e._promised)return e;var t=(...t)=>{var a,r,n=null,i=-1,s=null,o=new Promise((n,i)=>{r=i;var o=(...e)=>{s&&clearTimeout(s),s=null,n(...e)};try{a=(new Date).getTime(),e(...t,o,r)}catch(l){r(l)}});return o.timeout=(...e)=>{if(e[0]instanceof Number&&(e[0]=1*e[0]),isNaN(e[0]))e[0]instanceof Function&&(n=e[0]);else if(e[1]instanceof Function&&(n=e[1]),i=e[0]>=0?e[0]:-1,i<0&&s)clearTimeout(s),s=null;else if(i>=0){s&&clearTimeout(s);let e=(new Date).getTime();s=setTimeout(()=>{n&&n(),r(new Error("Timeout!"))},i-(e-a))}return o},o};return t._promised=!0,t._original=e,t};const a=(e,...a)=>{var r,n,i;return a[0]instanceof Array?(r=a[0],n=a[1],i=a[2],i||(i=n,n=null)):(i=a.pop(),n=a[a.length-1]instanceof Function?null:a.pop(),r=a),r=e?r.map(e=>t(e)):r.map(e=>e._original||e),[r,n,i]};t.s=t.serial=t(async(...e)=>{var[t,r,n]=a(!0,...e);for(let a of t){let e;e=null===r||void 0===r?await a():await a(r),void 0!==e&&(r=e)}n(r)}),t.p=t.parallel=t(async(...e)=>{var[t,r,n]=a(!0,...e),i=t.length,s=[];t.forEach(async(e,t)=>{var a;a=null===r||void 0===r?await e():await e(r),s[t]=a,i--,i>0||n(s)})}),t.a=t.any=t(async(...e)=>{var[t,r,n]=a(!0,...e);t.forEach(async(e,t)=>{var a;a=null===r||void 0===r?await e():await e(r),n(a)})}),e.promisify=Function.promisify=t,e.oncilize=Function.oncilize=e=>{var t,a,r=!1;return a=e._promised?(...a)=>new Promise(async(n,i)=>{if(r)return await waitLoop(),void n(t);r=!0,t=await e(...a),n(t)}):(...a)=>(r||(r=!0,t=e(...a)),t),a.refresh=()=>r=!1,a},e.pumplize=Function.pumplize=(e,t,a=!0)=>{var r=[],n=null,i=100,s=null,o=()=>{n=null;var i=r;r=[],t(a?e(...i):e(i))},l=(...e)=>{null===n&&(n=Date.now(),s&&clearTimeout(s),s=setTimeout(o,i));var t=Date.now();t-n>=i?o():a?r=e:r.push(e)};return l.dump=()=>{s&&clearTimeout(s),s=null,o()},l.timeout=e=>{if(isNaN(e))return l;if(i=e,null===n)return l;var t=Date.now();return s&&clearTimeout(s),s=setTimeout(o,i+n-t),l},l}}).call(this,a("950f"))},8397:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"crumb"},[a("span",{staticClass:"hint"},[e._v("位置：")]),e._l(e.path,(function(t,r){return[a("span",{on:{click:function(a){return e.jump(t.path)}}},[e._v(e._s(t.name))]),a("i",{staticClass:"fas fa-angle-right"})]}))],2):e._e()},n=[],i=null;const s=new BroadcastChannel("page-changed");s.addEventListener("message",e=>{i&&i.update()});var o={name:"Crumb",data(){return{show:!0,path:[]}},props:{target:String},methods:{jump(e){let t={path:e};this.$router.push(t);var a=e.split("?")[0];a===this.$route.path&&s.postMessage(t)},update(){var e=null,t="";if("/"===this.$route.path)e=null;else if("/category"===this.$route.path)this.$route.query&&this.$route.query.c&&(e=decodeURIComponent(this.$route.query.c).split(",").filter(e=>e.length>0),t="viewer");else if("/view"===this.$route.path)this.$route.query&&this.$route.query.f&&(e=decodeURIComponent(this.$route.query.f).split("/"),e.pop(),e=e.filter(e=>e.length>0),t="view");else{let a=this.target||this.$route.path;e=a.split("/").filter(e=>e.length>0),t="view"}e?(this.show=!0,this.path.splice(0,this.path.length),"viewer"!==t&&"page"!==t||e.pop(),this.path.push(...getPathNameList(e))):this.show=!1}},mounted(){this.update(),i=this},destroyed(){i=null}},l=o,c=a("e032"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["a"]=u.exports},"899d":function(e,t,a){},"8f09":function(e,t,a){},"9a67":function(e,t,a){},"9d8d":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-bar"},[a("div",{staticClass:"nav-hint",on:{click:e.onClick}},[a("i",{staticClass:"fas fa-angle-right"})]),a("div",{staticClass:"nav-docker"},[a("router-link",{attrs:{to:"/"}},[e._v("首页")]),a("i",{staticClass:"fas fa-caret-right"}),a("div",{staticClass:"nav-container"},[a("NavMenuBar",{attrs:{menu:e.menu}})],1),a("div",{staticClass:"about-bar nav-container right"},[a("NavMenuBar",{attrs:{menu:e.aboutMenu}})],1)],1)])},n=[],i=a("7547"),s=i["a"],o=a("e032"),l=Object(o["a"])(s,r,n,!1,null,null,null);t["a"]=l.exports},"9eab":function(e,t,a){(function(e){e.ProtoType=Function.prototype,Object.defineProperty(ProtoType,"kerneltype",{get(){return this===ProtoType||this.__proto__===ProtoType?this:this.__proto__.kerneltype?this.__proto__.kerneltype:this},enumerable:!1,configurable:!1}),Object.prototype.isSubClassOf=function(e){if("function"!==typeof this)return!1;var t=this;while(t){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1},Object.defineProperty(Object.prototype,"isSubClassOf",{enumerable:!1})}).call(this,a("950f"))},a18c:function(e,t,a){"use strict";var r=a("e832"),n=a("4af9"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("Column")],1)},s=[],o={name:"Home"},l=o,c=a("e032"),u=Object(c["a"])(l,i,s,!1,null,null,null),h=u.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category"},[a("Crumb"),a("Column")],1)},f=[],d={name:"Category"},m=d,g=Object(c["a"])(m,p,f,!1,null,null,null),v=g.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"viewer"},[a("Crumb"),a("div",{staticClass:"container",on:{click:e.onClick}})],1)},b=[];const w=new BroadcastChannel("change-loading-hint");var _={name:"Viewer",methods:{async update(){w.postMessage({name:"加载中……",action:"show"});var e=this.$route.query.f,t=1*this.$route.query.t,a=this.$route.query.a||"LostAbaddon";if(e){t=t||0;var[r,n]=await Promise.all([Granary.getArticle(e,t),Granary.getContent("api/copyright.md")]),i="",s="",o=!0;if(r?n&&(r=r+"\n\n\n"+n):(o=!1,i='<div class="page_not_found"><div class="frame"></div><div class="title">指定内容不存在，请联系站长。</div></div>'),o){0===t&&(t=Date.now());let e=MarkUp.fullParse(r,{toc:!0,glossary:!0,resources:!1,showtitle:!0,showauthor:!0,author:a,date:t,classname:"markup-content"});s=" | "+e.title,i=e.content,i||(i='<div class="page_not_found"><div class="frame"></div><div class="title">MarkUp 内容解析失败，请联系作者。</div></div>',o=!1)}this.$el.querySelector("div.container").innerHTML=i,o&&await this.afterMarkUp(),document.title=s+" ("+this.SiteName+")",w.postMessage({action:"hide"})}else this.$router.push({path:"/"})},onClick(e){var t=e.target;if("a"===t.nodeName.toLowerCase()){let a=t.getAttribute("href");if(a){if(0===a.indexOf("/page/"))return a=a.replace("/page/","/"),a={path:a},e.preventDefault(),void this.$router.push(a);if(0===a.indexOf("/article/"))return a=a.replace("/article/",""),a=encodeURIComponent(a),a={path:"/view",query:{f:a}},e.preventDefault(),void this.$router.push(a);if(0===a.indexOf("/category/"))return a=a.replace("/article/","").replace(/[\\\/]+/g,","),a={path:"/category",query:{c:a}},e.preventDefault(),void this.$router.push(a);if(0===a.indexOf("#")){let e=location.hash;setTimeout(()=>{history.replaceState(null,"",e)},0)}}}}},mounted(){this.update()}},k=_,x=Object(c["a"])(k,y,b,!1,null,null,null),C=x.exports;r["default"].use(n["a"]);const E=[{path:"/",name:"Home",component:h},{path:"/category",name:"Category",component:v},{path:"/view",name:"Viewer",component:C},{path:"/about",name:"AboutSite",component:function(){return a.e("chunk-b63b098a").then(a.bind(null,"52a1"))}},{path:"/chinesecolor",name:"chinesecolor",component:function(){return a.e("chunk-7aa8038a").then(a.bind(null,"de6d"))}},{path:"/freemusic",name:"freemusic",component:function(){return a.e("chunk-2d0c4d67").then(a.bind(null,"3d11"))}},{path:"/japanesecolor",name:"japanesecolor",component:function(){return a.e("chunk-723b369b").then(a.bind(null,"ce9d"))}},{path:"/latex",name:"latex",component:function(){return a.e("chunk-2d0cbe04").then(a.bind(null,"4c10"))}},{path:"/markup",name:"markup",component:function(){return a.e("chunk-26bb8265").then(a.bind(null,"f4c6"))}},{path:"/entertain/bunceball",name:"bunceball",component:function(){return a.e("chunk-2d224ac2").then(a.bind(null,"e0ab"))}},{path:"/popsci/quantum1",name:"quantum1",component:function(){return a.e("chunk-385f6f36").then(a.bind(null,"1836"))}},{path:"/aboutMe",name:"AboutMe",component:function(){return a.e("chunk-13296a72").then(a.bind(null,"dd86"))}},{path:"*",name:"PageNotFound",component:function(){return a.e("chunk-2d0e95df").then(a.bind(null,"8cdb"))}}],O=new n["a"]({mode:"hash",base:"/",routes:E});O.afterEach((e,t)=>{if("Category"===e.name){let t=getPathNameList(e.query.c.split(","),!1);document.title=t?r["default"].prototype.SiteName+" / "+t.map(e=>e.name).join(" / "):r["default"].prototype.SiteName}else document.title=r["default"].prototype.SiteName;document.querySelector("#app").scrollTo(0,0)});t["a"]=O},aa46:function(e,t,a){},aab0:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:"imageShowcase "+(e.show?"show":"hide")},[a("div",{staticClass:"imageFrame"},e._l(e.gallary,(function(t,r){return a("div",{staticClass:"imagePage",style:{left:100*(r-e.index)+"%"}},[a("div",{staticClass:"imageInstance",style:{backgroundImage:"url("+t.image+")",width:t.width+"px"}}),a("div",{staticClass:"imageLegend"},[e._v(e._s(t.title))])])})),0),a("div",{staticClass:"imageButton close",on:{click:function(t){e.show=!1}}},[a("i",{staticClass:"fas fa-times-circle"})]),a("div",{staticClass:"imageButton left",attrs:{inactive:e.index<=0},on:{click:function(t){e.index--}}},[a("i",{staticClass:"fas fa-angle-left"})]),a("div",{staticClass:"imageButton right",attrs:{inactive:e.index>=e.gallary.length-1},on:{click:function(t){e.index++}}},[a("i",{staticClass:"fas fa-angle-right"})])])},n=[];const i=e=>{var t=e.parentNode;if(!t)return null;var a=t.tagName;return a?(a=a.toLowerCase(),"figuren"===a?i(t):"div"!==a?null:t.classList.contains("image-wall")?t:i(t)):null};var s={name:"ImageShowcase",data(){return{show:!1,index:0,gallary:[]}},created(){document.body.addEventListener("click",e=>{if(!this.show){var t=e.target,a=t.tagName;if(a){a=a.toLowerCase();var r,n,s=!1;if("img"===a?(s=!0,r=t,n=i(t)):("figure"===a||"div"===a&&t.classList.contains("resource"))&&(r=t.querySelector("img"),r&&(s=!0,n=i(t))),s){var o=[],l=0;if(n)n.querySelectorAll(".image-container.image-float div.resource.image").forEach((e,t)=>{var a=e.querySelector("img");a===r&&(l=t);var n=e.querySelector("figcaption");n=n.innerText||"",o.push({image:a.src,width:a.naturalWidth,height:a.naturalHeight,title:n})});else{l=0;let e=r.parentNode;e&&(e=e.parentNode),e&&(e=e.querySelector("figcaption")),e&&(e=e.innerText),e=e||"",o=[{image:r.src,width:r.naturalWidth,height:r.naturalHeight,title:e}]}this.showGallary(l,o)}}}}),document.body.addEventListener("keydown",e=>{this.show&&(37===e.keyCode?this.index>0&&this.index--:39===e.keyCode?this.index<this.gallary.length-1&&this.index++:27===e.keyCode&&(this.show=!1),e.preventDefault())})},methods:{showGallary(e,t){this.index=e,this.gallary.splice(0,this.gallary.length),t.forEach(e=>this.gallary.push(e)),this.show=!0}}},o=s,l=a("e032"),c=Object(l["a"])(o,r,n,!1,null,null,null);t["a"]=c.exports},b2e4:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"nav-menu-bar"},e._l(e.menu,(function(t){return a("NavMenuItem",{attrs:{title:t.name,action:t.category&&t.category.length>0?e.supers?e.supers+","+t.category:t.category:"",type:t.type,subs:t.subs}})})),1)},n=[],i={name:"NavMenuBar",props:{supers:"",menu:Array}},s=i,o=a("e032"),l=Object(o["a"])(s,r,n,!1,null,null,null);t["a"]=l.exports},b9a5:function(e,t,a){(function(e,t){Array.prototype.copy=function(){return this.map(e=>e)},Array.prototype.duplicate=function(){var e=this.map(e=>Object.isBasicType(e)?e.valueOf():null===e||void 0===e?e:e instanceof Date?new Date(e.getTime()):"object"!==typeof e||e instanceof Promise?void 0:e.duplicate());return Object.assign([],this,e)},Array.prototype.randomize=function(){var e=this.length,t=Array.random(e),a=this;return t=t.map(e=>a[e]),t},Array.prototype.remove=function(e){var t=this.indexOf(e);return t<0||this.splice(t,1),this},Array.prototype.clear=function(e){return this.splice(0,this.length),this},Array.prototype.translate=function(e){var t=this.copy();if(isNaN(e))return t;var a=this.length;if(e>=a||e<=-a)return t;if(e>0){for(let r=0,n=e;r<a-e;r++,n++)t[r]=this[n];for(let r=a-e,n=0;r<a;r++,n++)t[r]=this[n]}else{e=-e;for(let r=0,n=e;r<a-e;r++,n++)t[n]=this[r];for(let r=a-e,n=0;r<a;r++,n++)t[n]=this[r]}return t},Array.prototype.query=function(e){var t=-1;return this.some((a,r)=>{const n=!!e(a);return n&&(t=r),n}),t},Array.prototype.pick=function(){var e=this.length,t=Math.floor(Math.random()*e);return this[t]},Array.prototype.equal=function(e){if(!(e instanceof Array))return!1;var t=this.byteLength;if(t!=e.byteLength)return!1;for(let a=0;a<t;a++)if(this[a]!==e[a])return!1;return!0},Object.defineProperty(Array.prototype,"first",{get(){return this[0]},enumerable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"last",{get(){return this[this.length-1]},enumerable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"copy",{enumerable:!1}),Object.defineProperty(Array.prototype,"duplicate",{enumerable:!1}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1}),Object.defineProperty(Array.prototype,"clear",{enumerable:!1}),Object.defineProperty(Array.prototype,"randomize",{enumerable:!1}),Object.defineProperty(Array.prototype,"translate",{enumerable:!1}),Object.defineProperty(Array.prototype,"query",{enumerable:!1}),Object.defineProperty(Array.prototype,"pick",{enumerable:!1}),Object.defineProperty(Array.prototype,"equal",{enumerable:!1}),Array.is=e=>e instanceof Array,Array.generate=(e,t=(e=>e))=>{var a=[];if(Function.is(t))for(let r=0;r<e;r++)a.push(t(r));else for(let r=0;r<e;r++)a.push(t);return a},Array.random=(e,t=(e=>e))=>{var a=[],r=[];for(let n=0;n<e;n++)a.push(n);for(let n=0;n<e;n++){let e=Math.floor(Math.random()*a.length);r.push(t(a[e])),a.splice(e,1)}return r},Uint8Array.prototype.__proto__.copy=function(){return new Uint8Array(this)},Uint8Array.prototype.__proto__.duplicate=Uint8Array.prototype.__proto__.copy,Object.defineProperty(Uint8Array.prototype.__proto__,"copy",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype.__proto__,"duplicate",{enumerable:!1}),"node"===e._env&&(Uint8Array.prototype.__proto__.toBuffer=function(){var e=t.alloc(this.length,this);return e},Uint8Array.prototype.__proto__.toBase64=function(){var e=t.alloc(this.length,this);return e.toString("base64")},Object.defineProperty(Uint8Array.prototype.__proto__,"toBuffer",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype.__proto__,"toBase64",{enumerable:!1}),Uint8Array.fromString=(e,a="utf8")=>Uint8Array.fromBuffer(t.from(e,a)),Uint8Array.fromBase64=e=>{var a=t.from(e,"base64");return Uint8Array.fromBuffer(a)},Uint8Array.fromBuffer=e=>new Uint8Array(e),Uint16Array.fromBuffer=e=>new Uint16Array(e),Uint32Array.fromBuffer=e=>new Uint32Array(e),Int8Array.fromBuffer=e=>new Int8Array(e),Int16Array.fromBuffer=e=>new Int16Array(e),Int32Array.fromBuffer=e=>new Int32Array(e),Float32Array.fromBuffer=e=>new Float32Array(e),Float64Array.fromBuffer=e=>new Float64Array(e),BigInt64Array.fromBuffer=e=>new BigInt64Array(e),BigUint64Array.fromBuffer=e=>new BigUint64Array(e)),Uint8Array.prototype.sub=function(e,a){return isNaN(e)?this.copy():(isNaN(a)&&(a=e,e=0),new Uint8Array(t.from(this).subarray(e,e+a)))},Uint8Array.prototype.concat=function(e){if(!(e instanceof Uint8Array))return this.copy();var a=t.concat([this,e]);return t.from(a)},Uint8Array.prototype.padEnd=function(e,t=0){if(e<=this.length)return this.copy();(!Number.is(t)||t<0||t>255)&&(t=0);var a=new Uint8Array(e);for(let r=0;r<this.length;r++)a[r]=this[r];for(let r=this.length;r<e;r++)a[r]=t;return a},Uint8Array.prototype.padStart=function(e,t=0){if(e<=this.length)return this.copy();(!Number.is(t)||t<0||t>255)&&(t=0);var a=new Uint8Array(e);e-=this.length;for(let r=0;r<e;r++)a[r]=t;for(let r=0;r<this.length;r++)a[r+e]=this[r];return a},Uint8Array.prototype.equal=function(e){if(!(e instanceof Uint8Array))return!1;var t=this.byteLength;if(t!=e.byteLength)return!1;for(let a=0;a<t;a++)if(this[a]!==e[a])return!1;return!0},Object.defineProperty(Uint8Array.prototype,"sub",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"concat",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"padEnd",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"padStart",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"equal",{enumerable:!1})}).call(this,a("950f"),a("608e").Buffer)},bfef:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tail-bar"},[a("div",{staticClass:"left"},[e._v(" © 2020 - 2021 LostAbaddon, all rights reserved. ")]),a("div",{staticClass:"right"},[e._v(" Generated by "),a("a",{attrs:{target:"_blank",href:"https://github.com/LostAbaddon/Schwarzschild"}},[e._v("Schwarzschild v0.1.0")])])])}],i={name:"TailBar"},s=i,o=a("e032"),l=Object(o["a"])(s,r,n,!1,null,null,null);t["a"]=l.exports},c428:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading",class:e.show?"show":"hide"},[a("div",{staticClass:"hint"},["spin"===e.type?a("div",{staticClass:"animate spin"},[a("i",{staticClass:"fas fa-spinner fa-spin fa-fast"})]):e._e(),"pulse"===e.type?a("div",{staticClass:"animate pulse"},[a("i",{staticClass:"fas fa-square"}),a("i",{staticClass:"fas fa-square"}),a("i",{staticClass:"fas fa-square"}),a("i",{staticClass:"fas fa-square"}),a("i",{staticClass:"fas fa-square"})]):e._e(),a("div",{staticClass:"title"},[e._v(e._s(e.title))])]),e.forcequit?a("div",{staticClass:"forceQuit",on:{click:e.forceQuit}},[e._v("强制关闭")]):e._e()])},n=[],i=a("f895"),s=i["a"],o=a("e032"),l=Object(o["a"])(s,r,n,!1,null,null,null);t["a"]=l.exports},c531:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"column container",on:{click:e.onClick}},[a("header"),e.showList?a("caption",[a("span",[e._v("文章列表")]),e._m(0)]):e._e(),e._l(e.list,(function(t){return e.showList?a("ColumnItem",{attrs:{title:t.title,author:t.author,description:t.description,type:t.type,timemark:t.timemark,timestamp:t.timestamp,categoryName:t.category,categoryPath:t.sort,filename:t.filename}}):e._e()}))],2)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"controller"},[a("div",{staticClass:"hint"},[a("i",{staticClass:"fas fa-sliders-h"})]),a("div",{staticClass:"styleList"},[a("div",{staticClass:"styleItem",attrs:{name:"bars"}},[a("i",{staticClass:"fas fa-bars"})]),a("div",{staticClass:"styleItem",attrs:{name:"lines"}},[a("i",{staticClass:"fas fa-stream"})]),a("div",{staticClass:"styleItem",attrs:{name:"columns"}},[a("i",{staticClass:"fas fa-columns"})])])])}],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"column-item",attrs:{filename:e.categoryPath+"/"+e.filename,timestamp:e.timestamp,author:e.author}},[a("header",[a("div",{staticClass:"title"},[e._v(e._s(e.title))]),a("div",{staticClass:"category",attrs:{path:e.categoryPath}},[e._v(e._s(e.categoryName))])]),a("article",[e._v(e._s(e.description))]),a("footer",[a("div",{staticClass:"author"},[e._v(e._s(e.author))]),a("div",{staticClass:"timestamp"},[e._v(e._s(e.timemark))])])])},s=[],o={name:"ColumnItem",props:{title:String,author:String,description:String,type:String,timemark:String,timestamp:Number,categoryName:String,categoryPath:String,filename:String}},l=o,c=a("e032"),u=Object(c["a"])(l,i,s,!1,null,null,null),h=u.exports;const p=_("Utils").getTimeString;var f=null;const d=new BroadcastChannel("page-changed");d.addEventListener("message",e=>{f&&f.update()});const m=new BroadcastChannel("change-loading-hint"),g=new Map,v=e=>{var t=g.get(e);if(t)return t;var a=SiteMap;return t=null,e=e.split(/[\\\/]/).filter(e=>e.length>0),e.some((r,n)=>{var i=a[r];if(!i)return!0;a=i.subs,n===e.length-1&&(t=i.name)}),t?(g.set(e,t),t):e.last};var y={name:"Column",components:{ColumnItem:h},data(){return{itemPerPage:20,list:[],showList:!0}},methods:{async getHeaderInfo(e){var t=await Granary.getColumnHeader(e),a="";t&&(a=MarkUp.parse(t,{toc:!1,glossary:!1,resources:!1,showtitle:!1,showauthor:!1,classname:"markup-content"})),this.$el.querySelector("header").innerHTML=a,t&&await this.afterMarkUp()},async getArticleList(e){var t=await Granary.getCategory(e);this.list.splice(0,this.list.length),t.forEach(e=>{e.category=v(e.sort),e.placehoding=!1,e.timestamp=new Date(e.publish).getTime(),e.timemark=p(new Date(e.publish),"YYMMDDhhmm"),e.description=e.description||"暂无",this.list.push(e)})},async update(){m.postMessage({name:"加载中……",action:"show"});var e=localStorage.getItem("columnStyle")||"lines";this.$el.setAttribute("columnStyle",e),this.list.splice(0,this.list.length),this.header="";var t=null;if("/"===this.$route.path)t="/";else{if("/category"!==this.$route.path)return void m.postMessage({action:"hide"});if(!this.$route.query||!this.$route.query.c)return void m.postMessage({action:"hide"});t="/"+this.$route.query.c.split(",").filter(e=>e.length>0).join("/")}t=t.replace(/^[\/\\]+/,"");var a=t.split("/").filter(e=>e.length>0),r=SiteMap;a.length>0?a.some(e=>{if(e=r[e],!(e.subs&&e.subs.length>0))return r=e.type,!0;r=e.subs}):r="viewer","folder"===r?(this.showList=!1,await this.getHeaderInfo(t)):"viewer"===r?(this.showList=!0,await Promise.all([this.getHeaderInfo(t),this.getArticleList(t)])):this.showList=!1,m.postMessage({action:"hide"})},onClick(e){var t=e.target;if(!t.classList.contains("hint")){if(t.classList.contains("styleItem")){let e=t.getAttribute("name");return this.$el.setAttribute("columnStyle",e),void localStorage.setItem("columnStyle",e)}if("a"===t.nodeName.toLowerCase()){let a=t.getAttribute("href");if(a){if(0===a.indexOf("#")){a=a.replace(/^#+[\\\/]*/,""),a=a.split(/[\\\/]+/),a={path:"/category",query:{c:a.join(",")}},e.preventDefault(),this.$router.push(a);let t=new BroadcastChannel("page-changed");return void t.postMessage(a)}if(0===a.indexOf("/page/"))return a=a.replace("/page/","/"),a={path:a},e.preventDefault(),void this.$router.push(a);if(0===a.indexOf("/article/"))return a=a.replace("/article/",""),a=encodeURIComponent(a),a={path:"/view",query:{f:a}},e.preventDefault(),void this.$router.push(a)}}var a=void 0,r=void 0,n=void 0,i=void 0;if(t){while(!a&&!r)if(a=t.getAttribute("filename"),r=t.getAttribute("path"),n=1*t.getAttribute("timestamp"),i=t.getAttribute("author"),t=t.parentNode,!t||t===document.body)break;if(r){let e="/category?c="+r.split("/").join(",");this.$route.fullPath!==e&&this.$router.push({path:e})}else a&&this.$router.push({path:"/view",query:{f:a,t:n,a:i}})}}}},mounted(){f=this,this.update()},destroyed(){f=null}},b=y,w=Object(c["a"])(b,r,n,!1,null,null,null);t["a"]=w.exports},cbfc:function(e,t,a){(function(e){(()=>{const t=Symbol("HIDDEN"),a=["GOD","THEONE","TITLE","AUTHOR","EMAIL","DESCRIPTION","STYLE","SCRIPT","DATE","KEYWORD","GLOSSARY","TOC","REF","LINK","IMAGES","VIDEOS","AUDIOS","ARCHOR","SHOWTITLE","SHOWAUTHOR","RESOURCES"],r=["toc","glossary","resources","images","videos","audios"],n=["article","section","div","p","header","footer","aside","ul","ol","li","blockquote","pre","figure","figcaption"],i={"\\":"slash","/":"antislash",_:"underline","*":"star","+":"plus","-":"minus","=":"equal","`":"dash","~":"wavy","!":"bang","?":"question",":":"colon","@":"at-circle","#":"sharp","^":"angle",$:"dollar","%":"percent","(":"left-bracket",")":"right-bracket","[":"left-square-bracket","]":"right-square-bracket","{":"left-curve-bracket","}":"right-curve-bracket","|":"vertical-line"},s={};Object.keys(i).forEach(e=>s[i[e].toLowerCase()]=e),s["$"]="&#36;",a.forEach((e,t)=>a[t]=e.toLowerCase());const o={},l={},c={},u={},h=(e=8)=>{var t="";for(let a=0;a<e;a++)t+=Math.floor(10*Math.random())+"";return t};o.addExtension=(e,t=0,a=5)=>{if(0===t){let t=l["_indexes_"];t||(t=[],l["_indexes_"]=t),t.includes(a)||(t.push(a),t.sort((e,t)=>e-t)),t=l[a],t||(t=[],l[a]=t),t.push(e)}else if(1===t){let t=c["_indexes_"];t||(t=[],c["_indexes_"]=t),t.includes(a)||(t.push(a),t.sort((e,t)=>e-t)),t=c[a],t||(t=[],c[a]=t),t.push(e)}else if(2===t){let t=u["_indexes_"];t||(t=[],u["_indexes_"]=t),t.includes(a)||(t.push(a),t.sort((e,t)=>e-t)),t=u[a],t||(t=[],u[a]=t),t.push(e)}};const p=e=>(e="\n"+e+"\n",e=e.replace(/\r\n/g,"\n").replace(/\n([ 　]+)/g,(e,t)=>{var a=t.replace(/　/g,"  ").length;return a<4?"\n":e}),e=e.replace(/(\n[ 　\t>\-\+\*~(\d+\.)]+)(`{3,}|~{3,}|\${2})/g,(e,t,a)=>t+"\n"+a),a.forEach(t=>{var a=new RegExp("([\\w\\W]? *)\\["+t+"\\]( *[\\w\\W]?)","gi");e=e.replace(a,(e,a,r)=>"]"===a||"["===r||"("===r?e:a+"%"+t+"%"+r)}),e),f=e=>(e=e.replace(/^\n+|\n+$/gi,""),e=e.replace(/\n{3,}/gi,"\n\n\n"),e),d=(e,t,a=-1/0,r)=>{var n=l["_indexes_"];if(!n)return"";var i=!r;return r=r||{},n.some(n=>{if(a>n)return!0;if(n>=0)return!0;var i=l[n],s=!0;while(s)s=!1,i.forEach(a=>{var n;[e,n]=a.parse(e,t,r),n&&(s=!0)})}),e=D(e),n.forEach(n=>{if(!(a>n)&&!(n<0)){var i=l[n],s=!0;while(s)s=!1,i.forEach(a=>{var n;[e,n]=a.parse(e,t,r),n&&(s=!0)})}}),i&&(e=U(e,r)),e},m=(e,t,a=0,r)=>{t.parseLevel++;var n=[],i=!1;r||(i=!0,r={});var s=[];n=e.split("\n"),n.forEach((e,t)=>{var a=e.match(/^[ 　\t]*$/);if(0!==e.length)if(e.match(/^[=\-\+\*~\._#]{3,}$/))e.match(/^\-+$|^=+$/)?s.push([t,0,2,0,0,0,0,0]):e.match(/^~+$/)?s.push([t,0,2,0,0,1,0,0]):s.push([t,0,1,0,0,0,0,0]);else if(a=e.match(/^(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),a)a[2]?s.push([t,0,0,0,0,2,0,0]):s.push([t,0,0,0,0,1,0,0]);else{if(a=e.match(/^\${2}[ 　\t]*$/),a)return a[2],void s.push([t,0,0,0,0,0,0,1]);if(a=e.match(/^([\-\+\*~]|\d+\.)[ 　\t]+/),a)return a=e.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),a?void(a[2]?s.push([t,0,0,0,1,2,0,0]):s.push([t,0,0,0,1,1,0,0])):(a=e.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(\${2})[ 　\t]*$/),a?(a[2],void s.push([t,0,0,0,1,0,0,1])):void s.push([t,0,0,0,1,0,0,0]));if(a=e.match(/^(> *)+/),a)return a=e.match(/^(> *)+[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),a?void(a[2]?s.push([t,0,0,1,0,2,0,0]):s.push([t,0,0,1,0,1,0,0])):(a=e.match(/^(> *)+[ 　\t]+(\${2})[ 　\t]*$/),a?(a[2],void s.push([t,0,0,1,0,0,0,1])):void s.push([t,0,0,1,0,0,0,0]));if(a=e.match(/^([ 　\t]+)/),a)return a=e.match(/(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),a?void(a[1]?s.push([t,0,0,1,1,2,0,0]):s.push([t,0,0,1,1,1,0,0])):(a=e.match(/(\${2})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),a?(a[1],void s.push([t,0,0,1,1,0,0,1])):void s.push([t,0,0,1,1,0,0,0]));if(a=e.match(/\|/g),a){let r=e.match(/\\\|/g);if(!r||r&&r.length!==a.length){let a=!0;r=e;while(a){a=!1;let e=r.replace(/\([^\(\)\[\]\{\}]+?\)/g,"");e=e.replace(/\[[^\(\)\[\]\{\}]+?\]/g,""),e=e.replace(/\{[^\(\)\[\]\{\}]+?\}/g,""),a=e!==r,r=e}if(r.indexOf("|")>=0)return void s.push([t,0,0,0,0,0,1,0])}}}else s.push([t,1,0,0,0,0,0,0])});var o={};s.forEach(e=>{o[e[0]]=e});var l=!0;if(l=!1,s.length>0){if(l=y(s,o,n,t,r)||l,s.length>0&&(l=b(s,o,n,t,r)||l),s.length>0&&(l=w(s,o,n,t,r)||l),i&&0===a&&t.metas.linenumber){let e=0;n.forEach((t,a)=>{if(t&&!t.match(/^%[\w\-]+%$/)){var r=o[a];if((!r||!(r[1]>0||r[2]>0))&&!t.match(/^[ 　\t>\+\-\*`\^\|_~=\{\}<]$/)&&!t.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))$/)&&!t.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\[[^\(\)\[\]\{\}]*?\])$/)){var i=t.match(/\{[<\|>]\}$/);i?(i=i[0],t=t.substr(0,t.length-i.length)+'<span name="line-'+e+'"></span>'+i):t=t+'<span name="line-'+e+'"></span>',e++,n[a]=t}}}),t.metas.totalLineCount=e}[n,o]=g(s,o,n),s.length>0&&(l=_(s,o,n,t,r)||l,[n,o]=g(s,o,n)),s.length>0&&(l=k(s,o,n,t,r)||l,[n,o]=g(s,o,n))}return l=x(s,o,n,t,r)||l,[n,o]=g(s,o,n),l=C(s,o,n,t,r)||l,n=n.map(e=>{if(null===e)return"";if(void 0===e)return"";if(0===e.length)return"";var a="";if(i){let n=e.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/);n?a=U(e,r,!1):(a=v(e,t),a=U(a,r,!1))}else{a=v(e,t);let n="param-"+h();r[n]=a,a="%"+n+"%"}return a}),t.parseLevel--,t.parseLevel>0&&(n=n.join("")),n},g=(e,t,a)=>(a=a.map((e,t)=>[t,e]),a=a.filter(e=>!(!e[1]&&""!==e[1])),a.forEach((e,a)=>{var r=e[0],n=t[r];n&&(n[0]=a)}),t={},e.forEach(e=>{t[e[0]]=e}),a=a.map(e=>e[1]),[a,t]),v=(e,t)=>{var a="<p",r="</p>",n=[],i=e.match(/^\{[<\|>]\}|\{[<\|>]\}$/);i&&(i=i[0],"{<}"===i?n.push("align-left"):"{|}"===i?n.push("align-center"):"{>}"===i&&n.push("align-right"),e=e.replace(/^\{[<\|>]\}|\{[<\|>]\}$/g,""));var s=e.match(/^(:+)/);return s&&!e.match(/^:([\w\-\.]+?):/)&&(s=s[0],n.push("indent","indent-"+s.length),e=e.replace(/^:+/,"")),n.length>0&&(a=a+' class="'+n.join(" ")+'"'),a+=">",0===e.length?"":a+e+r},y=(e,t,a,r,n)=>{var i=[];if(e.forEach(e=>{e[7]&&i.push(e)}),0===i.length)return!1;if(1===i.length)return i[0][7]=0,!1;var s=i.length,o=i[0];o[7]=2;for(let u=1;u<s;u++){let e=i[u];2===o[7]?(e[3]=o[3],e[4]=o[4],e[7]=3):3===o[7]&&(e[7]=2),o=e}2===i[i.length-1][7]&&(i[i.length-1][7]=0),i.forEach(e=>{1===e[7]&&(e[7]=0)});var l=[];i=i.filter(e=>!(e[7]<2)&&(2===e[7]&&l.push(e[0]),!0)),s=i.length;for(let u=s-1;u>0;u-=2){let e=i[u-1][0];l.includes(e)||i.splice(u-1,2)}var c=[];s=i.length;for(let u=0;u<s;u+=2)c.push([i[u][0],i[u+1][0]]);return c.forEach(n=>{var i=['<p class="latex block">$$'];for(let e=n[0]+1;e<n[1];e++)i.push(a[e]);i.push("$$</p>"),i=i.join("<br>");var s="latex-"+h();r.finals[s]=i,a[n[0]]="%"+s+"%";for(let e=n[0]+1;e<=n[1];e++)a[e]=null;for(let a=n[0];a<=n[1];a++){let r=t[a];if(!r)continue;let n=e.indexOf(r);n>=0&&e.splice(n,1),delete t[a],r[0]=-1}}),c.length>0},b=(e,t,a,r,n)=>{var i=[];if(e.forEach(e=>{e[5]&&i.push(e)}),0===i.length)return!1;if(1===i.length)return i[0][5]=0,!1;var s=i.length,o=i[0];o[5]=2;for(let u=1;u<s;u++){let e=i[u];2!==e[5]||(u===s-1&&(e[5]=0),3===o[5])?(2===o[5]?(e[3]=o[3],e[4]=o[4],e[5]=3):3===o[5]&&(e[5]=2),o=e):o[5]=0}2===i[i.length-1][5]&&(i[i.length-1][5]=0),i.forEach(e=>{1===e[5]&&(e[5]=0)});var l=[];i=i.filter(e=>!(e[5]<2)&&(2===e[5]&&l.push(e[0]),!0)),s=i.length;for(let u=s-1;u>0;u-=2){let e=i[u-1][0];l.includes(e)||i.splice(u-1,2)}var c=[];s=i.length;for(let u=0;u<s;u+=2)c.push([i[u][0],i[u+1][0]]);return c.forEach(n=>{var i=a[n[0]],s=i.match(/(`{3,}|~{3,})[ 　\t]*/)[0],o=i.indexOf(s);s=i.substr(o+s.length,i.length),s=s.replace(/^[ 　\t]+|[ 　\t]+$/g,"");var l="<pre",c="</code></pre>";0===s.length?l=l+' lang="'+s+'"><code>':l+="><code>",s=l;var u=[];for(let e=n[0]+1;e<n[1];e++)u.push(a[e]);u=u.join("\n"),u=l+u+c;var p="codeblock-"+h();r.finals[p]=u,a[n[0]]="%"+p+"%";for(let e=n[0]+1;e<=n[1];e++)a[e]=null;for(let a=n[0];a<=n[1];a++){let r=t[a];if(!r)continue;let n=e.indexOf(r);n>=0&&e.splice(n,1),delete t[a],r[0]=-1}}),c.length>0},w=(e,t,a,r,n)=>{var i=[];if(e.forEach(e=>{e[6]&&i.push(e)}),0!==i.length){var s=[],o=0,l=i[0][0];s.push([i[0]]);var c=i.length;for(let e=1;e<c;e++){let t=i[e];t[0]===l+1?s[o].push(t):(o++,s[o]=[t]),l=t[0]}return s=s.filter(e=>!(e.length<2)),s.forEach(i=>{E(i,e,t,a,r,n)}),!0}},_=(e,t,a,r,n)=>{var i=0,s=a.length;if(e.forEach((e,t)=>{if(e[3]+e[4]!==0){var a=e[0];a<s&&(s=a),a>i&&(i=a)}}),s>i)return!1;for(let p=i+1;p<a.length-1;p++){let e=t[p],a=t[p+1];if(e&&e[1]>0&&a&&a[1]>0)break;i=p}if(i===a.length-2){let e=a.length-1,r=t[e];r&&0!==r[1]||(i=e)}var o=0,l=[[[s,t[s]]]],c=!0;t[s][3];for(let p=s+1;p<=i;p++){var u=t[p];if(u)if(u[1]){if(!c)continue;let e=t[p+1];if(!e||e[1]>0){c=!1;continue}l[o].push([p,u])}else u[3]+u[4]!==0?(c||(o++,l[o]=[],t[p][3]>0,c=!0),l[o].push([p,u])):c&&l[o].push([p,u]);else c&&l[o].push([p,null])}var h=!1;return l.forEach(i=>{i.forEach(e=>{var t=e[0];e[1]||(a[t]="    "+a[t])});var s=0,o=i[0][0],l=a[o];s=-1;l.match(/^[ 　\t>]/)?s=0:l.match(/^[\-\+]|[\*~][ 　\t]/)?s=1:l.match(/^\d+\.[ 　\t]/)&&(s=2),s<0||(change=!0,0===s?S(i,e,t,a,r,n):1===s?A(!1,i,e,t,a,r,n):2===s&&A(!0,i,e,t,a,r,n))}),h},k=(e,t,a,r,n)=>{var i=[],s=[];e.forEach(e=>{if(0!==e[2]){var r=e[0],n=t[r-1];if(n)n[1]>0&&i.push([r,a[r].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let e=a[r-1];if(0===r||e.match(/^%[\w\-]+%$/))i.push([r,a[r].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let e=a[r].substr(0,1);"="===e?s.push([r-1,1]):"-"===e?s.push([r-1,2]):"~"===e||"+"===e||"_"===e?s.push([r-1,3]):"*"===e?s.push([r-1,4]):"#"===e?s.push([r-1,5]):"."===e&&s.push([r-1,6]),a[r]=null}}}});for(let o=0;o<a.length;o++){let e=a[o];if(!e)continue;let t=e.match(/^(#+)[ 　\t]*/);if(t){let r=t[0],n=t[1];r!==e&&0!==e.indexOf(r+"[")&&(s.push([o,n.length]),a[o]=e.replace(/^#+[ 　\t]*|[ 　\t]*#+$/g,""))}}return i.length+s.length!==0&&(s.sort((e,t)=>e[0]-t[0]),i.forEach(e=>{var[t,r]=e,i="headline-"+h(),s="<hr";s+="="===r?' class="heavy">':"-"===r?' class="light">':"*"===r?' class="star">':"~"===r?' class="wavy">':"."===r?' class="dotted">':"_"===r?' class="dashed">':"+"===r?' class="strong">':"#"===r?' class="heavystrong">':">",n[i]=s,a[t]="%"+i+"%"}),s.forEach(e=>{var[t,i]=e,s="header-"+h(),o="h"+(i||1),l=a[t];l=d(l,r),l=l.replace(/^[ 　\t\n]+|[ 　\t\n]+$/,""),l="<"+o+">"+l+"</"+o+">",n[s]=l,a[t]="%"+s+"%"}),!0)},x=(e,t,a,r,n)=>{var i=[],s=!0;while(s)s=!1,a.forEach(e=>{if(0===e.length)return i.push(e);e=e.replace(/(\])[ 　\t]*(\[([\w \-\.]+)\])/g,(e,t,a,n)=>{var i,s=r.refs[n];if(!s||s.indexOf("://")<0&&s.indexOf("@")<0&&!s.match(/^\.{0,2}[\\\/]/)||s.indexOf("\n")>=0){if(i=r.metas[n.toLowerCase()],!i||i.indexOf("://")<0&&i.indexOf("@")<0&&!i.match(/^\.{0,2}[\\\/]/)||i.indexOf("\n")>=0)return e;s=i}return t+"("+s+")"});var t=[],a=[],n=!0;while(n)n=!1,e=e.replace(/[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))/g,(e,r,i)=>(n=!0,i.match(/[ 　\t]+"(left|right)"\)$/)?a.push(e):t.push(e),""));e=e.replace(/^[ 　\t]+|[ 　\t]+$/g,""),a.forEach(e=>i.push(e)),e.length>0&&(t.length>0&&(s=!0),i.push(e)),t.forEach(e=>i.push(e))}),a.splice(0,a.length),i.forEach(e=>a.push(e)),i=[];return!0},C=(e,t,a,r,n)=>{var i=[],s=[],o=[],l=-1;a.forEach((e,t)=>{if(e&&0!==e.length){var a=e.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/);if(a)l=-1;else{if(a=e.match(/^[@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/),a)return o.push([t,e]),void(l=-1);a=e.match(/^!\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/);var r=a?1:0;r===l?0===r?i[i.length-1].push([t,e]):1===r&&s[s.length-1].push([t,e]):(0===r?i[i.length]=[[t,e]]:1===r&&(s[s.length]=[[t,e]]),l=r)}}else l=-1}),s=s.filter(e=>{var t=e.length>1;return 1===e.length&&o.push(e[0]),t}),i.forEach(e=>{var t=[],n=e[0][0];e.forEach(e=>{var n=e[0],i=e[1];0!==i.length&&(t.push(d(i,r)),a[n]=null)}),t=t.join("<br>"),a[n]=t}),s.forEach(e=>{var t=[],i=e[0][0];e.forEach(e=>{t.push(d(e[1],r)),a[e[0]]=null}),t=t.join(""),t='<div class="image-wall">'+t+"</div>";var s="imagewall-"+h();n[s]=t,a[i]="%"+s+"%"}),o.forEach(e=>{var[t,i]=e;i=d(i,r);var s="resource-"+h();n[s]=i,a[t]="%"+s+"%"})},E=(e,t,a,r,n,i)=>{var s=!0,o=null,l=-1;e.some((e,t)=>{var a=r[e[0]];a=a.replace(/^[ 　\t]+|[ 　\t]+$/g,"");var n=a.match(/[\|:\-]+/);if(n)return n=n[0],a===n?(o=n,l=e[0],0===t&&(s=!1),!0):void 0}),o?(o=o.replace(/^\||\|$/g,""),o=o.split("|"),o=o.map(e=>e.match(/^:\-:$/)?1:e.match(/^:\-$/)?0:e.match(/^\-:$/)?2:3)):(s=!1,o=[]);var c,u=[],p=0;e.forEach(e=>{var t=e[0];if(t!==l){var a=O(r[t]);u.push(a),a.length>p&&(p=a.length)}});for(let h=o.length;h<p;h++)o.push("");for(let h=0;h<u.length-1;h++){let e=u[h];e&&e.length;for(let t=e.length;t<p;t++)e.push("")}s&&(c=u[0],u.shift());for(let h=0;h<p;h++){if(3!==o[h])continue;let e=!0;u.some(t=>{var a=t[h];if(a)return 1*a!==a?(e=!1,!0):void 0}),o[h]=e?2:0}var f="<table>";s&&(f+="<thead><tr>",c.forEach((e,t)=>{e=d(e,n);var a='<th align="',r=o[t];a+=1===r?"center":2===r?"right":"left",a+='">'+e+"</td>",f+=a}),f+="</tr></thead>"),f+="<tbody>",u.forEach(e=>{f+="<tr>",e.forEach((e,t)=>{e=d(e,n);var a='<td align="',r=o[t];a+=1===r?"center":2===r?"right":"left",a+='">'+e+"</td>",f+=a}),f+="</tr>"}),f+="</tbody></table>";var m="table-"+h();i[m]=f,c=e[0][0],total=e.length;for(let h=0;h<total;h++){let n=e[h],i=n[0];r[i]=null,delete a[i];let s=t.indexOf(n);s>=0&&t.splice(s,1),n[0]=-1}r[c]="%"+m+"%"},O=e=>{"|"!==e.substr(0,1)&&(e="|"+e),"|"!==e.substr(e.length-1,1)&&(e+="|");var t=e.length,a=0,r=[],n=0;for(let i=1;i<t;i++){let t=e.substr(i,1);"|"!==t||0!==a?"([{<".indexOf(t)>=0?a++:">}])".indexOf(t)>=0&&a--:(r.push(e.substr(n+1,i-n-1)),n=i)}return r},S=(e,t,a,r,n,i)=>{var s="quote",o=r[e[0][0]];if(o=o.match(/^>[ 　\t]*\[([\w\W]+?)\]/),o){let e=o[1];e=e.replace(/^[ 　\t]+|[ 　\t]+$/g,""),e.length>0&&(n.metas[e]||n.blocks[e]||(s=e))}o=e.map(e=>{var t=e[0],a=r[t],n=a.match(/^[ 　\t]+/);if(n){n=n[0];let e=0,t=n.match(/ /g);t&&(e+=t.length),t=n.match(/　/g),t&&(e+=2*t.length),t=n.match(/\t/g),t&&(e+=4*t.length),t=4*(Math.floor(e/4)-1);let r="";for(let a=0;a<t-4;a++)r+=" ";a=a.replace(n,r),t>0}else n=a.match(/^>[ 　\t]*/),n&&(n=n[0],a=a.replace(n,""),!!a.match(/^>[ 　\t]*/));return a}),o[0]=o[0].replace(new RegExp("^[ 　\\t]*\\["+s.replace(/\\/g,"\\\\")+"\\][ 　\\t]*"),""),o=o.join("\n"),o=o.replace(/^\n+|\n+$/g,"");var l='<blockquote class="'+s+'">';o=m(o,n,2,i),l+=o,l+="</blockquote>";var c="blockquote-"+h();i[c]=l,e.forEach(e=>{var n=e[0];r[n]=null,delete a[n];var i=t.indexOf(e[1]);i>=0&&t.splice(i,1)}),r[e[0][0]]="%"+c+"%"},A=(e,t,a,r,n,i,s)=>{var o=[],l=-1;t.forEach(e=>{var t=e[0],a=n[t];if(head=a.match(/^([\-\+\*>~]|\d+\.)[ 　\t]+/),head)return a=a.replace(head[0],""),l++,void(o[l]=[a]);if(head=a.match(/^[ 　\t]+/),head){head=head[0];let e=0,t=head.match(/ /g);t&&(e+=t.length),t=head.match(/　/g),t&&(e+=2*t.length),t=head.match(/\t/g),t&&(e+=4*t.length),t=4*(Math.floor(e/4)-1);let r="";for(let a=0;a<t-4;a++)r+=" ";a=a.replace(head,r)}o[l].push(a)}),o=o.map(e=>(e=e.join("\n"),e=e.replace(/^\n+|\n+$/g,""),e));var c="";c=e?"<ol>":"<ul>",o.forEach(e=>{c+="<li>",c+=m(e,i,2,s),c+="</li>"}),c+=e?"</ol>":"</ul>";var u="list-"+h();s[u]=c,t.forEach(e=>{var t=e[0];n[t]=null,delete r[t];var i=a.indexOf(e[1]);i>=0&&a.splice(i,1)}),n[t[0][0]]="%"+u+"%"},L=(e,t)=>{var a=[[]],r=0,n=[0],i=[];if(e.forEach(e=>{e=e.replace(/^<h(\d+)>/i,(t,s)=>{!0,s*=1,1===s&&(r++,a[r]=[]),n[s-1]=(n[s-1]||0)+1;for(let e=s;e<n.length;e++)n[e]=0;var o="chap";for(let e=0;e<s;e++)o+="-"+(n[e]||1);return t=t+'<a name="'+o+'">',i.push([s,o,e.replace(/<[\w\W]+?>/gi,"")]),t}).replace(/<\/h(\d+)>$/i,e=>"</a>"+e).replace(/\{([\w \-\.]+)\}/g,(e,a)=>{var r=t.termList[a];return r?(Array.isArray(r)&&(r=r[0]),'<a class="terminology" name="'+a+'" href="#ref-'+a+'"><strong>'+r+"</strong></a>"):e}),a[r].push(e)}),a=a.filter(e=>e.length>0),t.chapList=i,a=a.map(e=>{var a=[],r="<section>",n="</section>";return e.forEach((t,r)=>{var n=!1;t=t.replace(/<a class="notemark" type="footnote" name="([\w \-\.]+?)">/g,(e,t)=>{n=!0,a.push(t);var r=e.substr(0,e.length-1)+' href="#footnote-'+t+'">';return r}),n&&(e[r]=t)}),e=e.join(""),0===a.length||(a=a.map((a,r)=>{var n=t.refs[a],i=t.footnotes.indexOf(a);return r++,e=e.replace(new RegExp("%%FN-"+i+"%%","g"),r),'<p class="footnote-content"><a class="index" name="footnote-'+a+'">'+r+"：</a>"+n+"</p>"}),e+='<hr class="footnote-line"><footer><p class="footnote-title">脚注：</p>',e+=a.join(""),e+='</footer><hr class="footnote-line end">'),r+e+n}),t.endnotes&&t.endnotes.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="EndNote">尾注</a></h1>',t.endnotes.forEach((a,r)=>{e+='<p class="endnote-content"><a class="index" name="endnote-'+a+'">'+(r+1)+"：</a>"+t.refs[a]+"</p>"}),e+="</section>",a.push(e)}if(t.metas.glossary&&t.termList&&t.termList.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="Glossary">术语表</a></h1>',e+=$(t),e+="</section>",a.push(e)}if(t.image=t.image||[],t.video=t.video||[],t.audio=t.audio||[],t.metas.resources&&t.image.length+t.video.length+t.audio.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="ResourceList">资源表</a></h1>',t.image.length>0&&(e+='<h2><a name="ImageResourceList">图片</a></h2>',e+=T(t,"image")),t.video.length>0&&(e+='<h2><a name="VideoResourceList">视频</a></h2>',e+=T(t,"video")),t.audio.length>0&&(e+='<h2><a name="AudioResourceList">音频</a></h2>',e+=T(t,"audio")),e+="</section>",a.push(e)}if(t.metas.showtitle){let e='<header class="article-title">';if(e+="<p>"+t.metas.title+"</p>",t.metas.showauthor&&(t.metas.author&&(e+='<p class="author">',t.metas.email&&(e+='<a href="mailto:'+t.metas.email+'">'),e+=t.metas.author,t.metas.email&&(e+="</a>"),e+="</p>"),t.metas.date)){e+='<p class="author date">';let a=1*t.metas.date;if(isNaN(a))a=t.metas.date;else{a=new Date(a);let e=a.getYear()+1900,t=a.getMonth()+1;t<10&&(t="0"+t);let r=a.getDate();r<10&&(r="0"+r);let n=a.getHours();n<10&&(n="0"+n);let i=a.getMinutes();i<10&&(i="0"+i);let s=a.getSeconds();s<10&&(s="0"+s),a=e+"/"+t+"/"+r+" "+n+":"+i+":"+s}e+=a,e+="</p>"}e+="</header>",a.unshift(e)}return a},M=(e,t)=>{var a=!0,r=0;while(a)if(a=!1,e=e.map(e=>(e=e.replace(/\[([\w \-\.]+?)\]/g,(r,n,i)=>{var s=e.lastIndexOf("<sup>",i),o=e.lastIndexOf("</sup>",i);if(s>o)return r;var l=t.blocks[n];return l?(a=!0,l):r}),e)),r++,10===r)break;return e},j=(e,t)=>{var a=(t.metas.LANG||"zh").toLowerCase();if(e=e.map(e=>(e=e.replace(/%glossary%/gi,e=>$(t)),e=e.replace(/%resources%/gi,e=>T(t,"image")+T(t,"video")+T(t,"audio")),e=e.replace(/%images%/gi,e=>T(t,"image")),e=e.replace(/%videos%/gi,e=>T(t,"video")),e=e.replace(/%audios%/gi,e=>T(t,"audio")),e=e.replace(/%toc%(\{[\w\W]+?\})*/gi,e=>{var a=e.match(/\{[\w\W]+?\}/g),r="目录",n=3;return a&&a.forEach(e=>{e=e.substr(1,e.length-2);var t=1*e;isNaN(t)?r=e:n=t}),t.toced=!0,P(t,r,n)}),Object.keys(t.metas).forEach(n=>{var i=n.toLowerCase();r.includes(n)||(i=t.metas[n],!0===i||!1===i?i="zh"===a?i?"是":"否":i?"On":"Off":Array.isArray(i)&&(i="zh"===a?i.join("、"):i.join(", ")),e=e.replace(new RegExp("%"+n+"%","gi"),e=>i))}),e=e.replace(/%([\w \-\.]+)%/g,(e,a)=>{var r=t.finals[a];return r||e}),e)),t.metas.toc&&!t.toced){let a=P(t,"目录",3);a.indexOf('<p class="content-')>=0&&(a="<section>"+a+"</section>",t.metas.showtitle?e.splice(1,0,a):e.unshift(a))}return e},P=(e,t,a)=>{var r='<h1 name="ContentTable">'+t+'</h1><aside class="content-table">';return e.chapList.forEach(e=>{if(!(e[0]>a)){var t='<p class="content-item level-'+e[0]+'">';for(let a=0;a<e[0];a++)t+='<span class="content-indent"></span>';t+='<a class="content-link" href="#'+e[1]+'">'+e[2]+"</a>",t+="</p>",r+=t}}),e.endnotes&&e.endnotes.length>0&&(r+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#EndNote">尾注</a></p>'),e.metas.glossary&&e.termList&&e.termList.length>0&&(r+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#Glossary">术语表</a></p>'),e.metas.resources&&e.image.length+e.video.length+e.audio.length>0&&(r+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#ResourceList">资源表</a></p>',e.image.length>0&&(r+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#ImageResourceList">图片</a></p>'),e.video.length>0&&(r+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#VideoResourceList">视频</a></p>'),e.audio.length>0&&(r+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#AudioResourceList">音频</a></p>')),r+="</aside>",r},$=e=>{var t="";return 0===e.termList?"":(e.termList.forEach(a=>{var[r,n]=a,i=e.terms[r],s='<p class="glossary-item">';s+='<a class="glossary-indent" name="ref-'+r+'">'+n+"</a>",s+=i,s+="</p>",t+=s}),t)},T=(e,t)=>{var a=e[t];if(!a||!Array.isArray(a)||0===a.length)return"";var r=[],n="<ul>";return a.forEach(e=>{var t=e[1];r.includes(t)||(r.push(t),n+='<li><a href="'+t+'" target="_blank">'+t+"</a></li>")}),n+="</ul>",n},D=e=>(e=e.replace(/(\\+)(.)/g,(e,t,a)=>{var r=Math.floor(t.length/2),n=2*r!==t.length,s="",o="%"+i["\\"]+"%";for(let i=0;i<r;i++)s+=o;if(n){let e=i[a];e?s=s+"%"+e+"%":s+=a}else s+=a;return s}),e),U=(e,a,r=!0)=>{var n=!0;while(n)n=!1,e=e.replace(/\%([\w \-]+?)\%/g,(e,t)=>{var r=a[t];return r?(n=!0,r):e});if(!r)return e;n=!0;while(n)n=!1,e=e.replace(/\%([\w \-]+?)\%/g,(e,r)=>{var i=a[t][r.toLowerCase()];return i?(n=!0,i):e});return e=e.replace(/\n+/g,"<br>"),e=e.replace(/\/{2}/g,(t,a)=>{if(0===a)return"<br>";var r=e.substr(a-1,1);return":"===r?t:"<br>"}),e=e.replace(/^(<\/?br>)+|(<\/?br>)+$/gi,"<br>"),e},B=e=>{if(!e)return[];e=e.split(/[ ,，；;、　]+/).filter(e=>e.length>0);var t=[];return e.forEach(e=>{t.includes(e)||t.push(e)}),t},I=(e,t)=>{var r={},n=!0;while(n)n=!1,t=t.replace(/\n([A-Z\u0800-\uffff]+?) *[:：] *([\w\W]*?)\n/,(e,t,i)=>0===i.length?e:(t="标题"===t?"title":"作者"===t?"author":"简介"===t?"description":"关键词"===t?"keyword":"更新"===t?"date":t.toLowerCase(),a.includes(t)?(n=!0,r[t]=i,"\n"):e));if(r.showtitle&&["on","yes","true"].includes(r.showtitle.toLowerCase())?r.showtitle=!0:r.showtitle=!1,r.glossary&&["on","yes","true"].includes(r.glossary.toLowerCase())?r.glossary=!0:r.glossary=!1,r.links&&["on","yes","true"].includes(r.links.toLowerCase())?r.links=!0:r.links=!1,r.refs&&["on","yes","true"].includes(r.refs.toLowerCase())?r.refs=!0:r.refs=!1,r.terms&&["on","yes","true"].includes(r.terms.toLowerCase())?r.terms=!0:r.terms=!1,r.resources&&["on","yes","true"].includes(r.resources.toLowerCase())?r.resources=!0:r.resources=!1,r.toc&&["on","yes","true"].includes(r.toc.toLowerCase())?r.toc=!0:r.toc=!1,e.metas=r,e.metas.keyword=B(e.metas.keyword),e.metas.date)try{e.metas.date=new Date(e.metas.date).getTime()}catch{delete e.metas.date}e.metas.god=e.metas.theone='<a href="mailto:lostabaddon@gmail.com">LostAbaddon</a>',e.metas.script?e.metas.script=e.metas.script.split(/[,; 　\t]+/):e.metas.script=[],e.metas.style?e.metas.style=e.metas.style.split(/[,; 　\t]+/).map(e=>e.replace(/\{[\w\W]*\}/,"")):e.metas.style=[],e.termList=e.termList||[],e.mainParser=!1,e.refs={},n=!0;while(n)n=!1,t=t.replace(/\n\[([\w \-\.\+\=\\\/]+?)\] *[:：] *([\w\W]+?)\n([\n\[])/,(t,a,r,i,s)=>(a=a.trim(),r=r.trim(),0===a.length||0===r.length?t:(e.refs[a]=r,n=!0,"\n"+i)));e.blocks={},n=!0;while(n)n=!1,t=t.replace(/\[:([\w \-\.\+\=\\\/]+?):\]([\w\W]*?)\n*\[:\1:\]/g,(t,a,r)=>{if(a=a.trim(),0!==a.length&&0!==r.length)return e.blocks[a]=r,n=!0,""});return Object.keys(e.refs).forEach(t=>{var a=e.refs[t];a=d(a,e),a=a.replace(/\%([\w \-]+?)\%/g,(e,t)=>{var a=s[t.toLowerCase()];return a||e});d(a,e);e.refs[t]=a}),Object.keys(e.blocks).forEach(t=>{var a,r=e.blocks[t],n=r.match(/^\n+/);r=r.trim(),e.parseLevel=0,a=n?m(r,e,1):[d(r,e)],e.blocks[t]=a.join("")}),e.anchors=[],e.terms={},e.notes={},t.replace(/\] *(\[[\^:]([\w ]+?)\]|\{([\w ]+?)\})/g,(t,a,r,n)=>{var i=r||n;e.refs[i]?"{"===a.substr(0,1)?e.terms[i]=e.refs[i]:e.notes[i]=e.refs[i]:"{"!==a.substr(0,1)||e.anchors.includes(i)||e.anchors.push(i)}),t=f(t),t};o.fullParse=(e,t)=>{var a={finals:{},toced:!1};e=p(e),e=I(a,e),t&&Object.keys(t).forEach(e=>{let r=t[e];e=e.toLowerCase(),["title","author","email","date"].indexOf(e)>=0||void 0!==r&&null!==r&&(a.metas[e]=r)}),a.parseLevel=0,a.mainParser=!0,a.metas.title=a.metas.title||"无名文",t.overwrite?(a.metas.title=t.title?t.title:a.metas.title,a.metas.author=t.author?t.author:a.metas.author,a.metas.email=t.email?t.email:a.metas.email,a.metas.date=t.date?t.date:a.metas.date):(a.metas.title=a.metas.title?a.metas.title:t.title,a.metas.author=a.metas.author?a.metas.author:t.author,a.metas.email=a.metas.email?a.metas.email:t.email,a.metas.date=a.metas.date?a.metas.date:t.date),e=m(e,a),e=e.map(e=>e.replace(/\%([\w \-]+?)\%/g,(e,t)=>{var a=s[t.toLowerCase()];return a||e})),e=M(e,a),e=L(e,a),e=j(e,a),e=a.metas.classname?'<article class="'+a.metas.classname+'">'+e.join("")+"</article>":"<article>"+e.join("")+"</article>",a.metas.fullexport&&(a.metas.style.forEach(t=>{e+='<link type="text/css" rel="stylesheet" href="'+t+'">'}),a.metas.script.forEach(t=>{e+='<script type="text/javascript" src="'+t+'"><\/script>'}));var r=u["_indexes_"]||[];r.forEach(t=>{var a=u[t];a&&a.forEach(t=>{e=t.parse(e)})});var n={};return n.content=e,n.title=a.metas.title,n.lineCount=a.metas.totalLineCount,n.meta={},n.meta.author=a.metas.author,n.meta.email=a.metas.email,n.meta.description=a.metas.description,n.meta.update=a.metas.date,n.meta.keywords=a.metas.keyword.map(e=>e),n.terminology={},a.termList.forEach(e=>{n.terminology[e[0]]=e[1]}),n.notes={},Object.keys(a.refs).forEach(e=>{n.notes[e]=a.refs[e]}),n.blocks={},Object.keys(a.refs).forEach(e=>{n.blocks[e]=a.blocks[e]}),n},o.parse=(e,t)=>{var a;return a=o.fullParse(e+"\n",t),a?a.content:""};const N=(e,t)=>{t.__level++;var a=[],r="";return e.childNodes.forEach(e=>{var i,s=e.tagName;if(!s){if("#comment"===e.nodeName)return;let t=e.textContent||"";return t=t.trim(),void(t.length>0&&(r+=t))}if(s=s.trim().toLowerCase(),n.includes(s)){if(!1,r.length>0&&(a.push(t.__prefix+r),r=""),"blockquote"===s){let a=t.__prefix;t.__prefix=t.__prefix+">\t",i=N(e,t),i=i.flat(1/0),i.push("\n"),t.__prefix=a}else if("ol"===s){let a=t.__prefix;t.__prefix.indexOf("-\t")>=0||t.__prefix.indexOf("1.\t")>=0?t.__prefix="\t"+t.__prefix:t.__prefix=t.__prefix+"1.\t",i=N(e,t),i=i.flat(1/0),i.push(""),t.__prefix=a}else if("ul"===s){let a=t.__prefix;t.__prefix.indexOf("-\t")>=0||t.__prefix.indexOf("1.\t")>=0?t.__prefix="\t"+t.__prefix:t.__prefix=t.__prefix+"-\t",i=N(e,t),i=i.flat(1/0),i.push(""),t.__prefix=a}else i=N(e,t),i=i.flat(1/0),i.push("");i&&i.length>0&&a.push(...i)}else{let[n,i]=W(e,s,t);i?n.length>0&&(r+=n.join("")):(r.length>0&&(a.push(t.__prefix+r),r=""),n.forEach(e=>{a.push(t.__prefix+e)}))}}),r.length>0&&a.push(t.__prefix+r),t.__level--,a},q=(e,t)=>{var a="";return e.childNodes.forEach(e=>{var r=e.tagName;if(!r){if("#comment"===e.nodeName)return;let t=e.textContent||"";return t=t.trim(),void(t.length>0&&(a+=t))}if(r=r.trim().toLowerCase(),"a"!==r)if("span"!==r&&"font"!==r)if("strong"!==r&&"b"!==r)if("em"!==r&&"i"!==r)if("sup"!==r)if("sub"!==r)if("del"!==r)a+=e.innerText;else{let r=q(e,t);a+=r}else{let r=q(e,t);a+=r}else{let r=q(e,t);a+=r}else{let r=q(e,t);a+=r}else{let r=q(e,t);a+=r}else{let r=q(e,t);a+=r}else{let r=e.href;0===r.indexOf("javascript:")&&(r="");let n=q(e,t);r&&"#"!==r.substr(0,1)?(r.match(/^(ftp|https?):\/\//i)||(r=t.host+r),n="["+n+"]("+r+")",a+=n):a+=n}}),a},W=(e,t,a)=>{if("script"===t)return[[""],!0];if("style"===t)return[[""],!0];if("link"===t)return[[""],!0];if("hr"===t)return[["\n---\n"],!1];if("br"===t)return[["\n"],!0];if(t.match(/^h\d+$/)){let r=t.substring(1,t.length);r*=1;let n="\n";for(let e=0;e<r;e++)n+="#";let i=q(e,a);return i=n+i+"\n",[[i],!1]}if("a"===t){let t=e.href;0===t.indexOf("javascript:")&&(t="");let r=q(e,a);return t&&"#"!==t.substr(0,1)?(t.match(/^(ftp|https?):\/\//i)||(t=a.host+t),r="["+r+"]("+t+")",[[r],!0]):[[r],!0]}if("img"===t){if(0===e.src.length)return[[""],!0];let t="\n![]("+e.src+")\n";return[[t],!1]}if("video"===t){if(0===e.src.length)return[[""],!0];let t="\n@[]("+e.src+")\n";return[[t],!0]}if("audio"===t){if(0===e.src.length)return[[""],!0];let t="\n#[]("+e.src+")\n";return[[t],!0]}if("span"===t||"font"===t){let t=q(e,a);return[[t],!0]}if("strong"===t||"b"===t){let t=q(e,a);return[["**"+t+"**"],!0]}if("em"===t||"i"===t){let t=q(e,a);return[["*"+t+"*"],!0]}if("u"===t){let t=q(e,a);return[["__"+t+"__"],!0]}if("sup"===t){let t=q(e,a);return[["^"+t+"^"],!0]}if("sub"===t){let t=q(e,a);return[["_"+t+"_"],!0]}if("del"===t){let t=q(e,a);return[["~~"+t+"~~"],!0]}var r=q(e,a);return[[r],!1]};o.reverse=(e,t,a=!0)=>{if(!e)return"";t=t||{},t.__level=0,t.__prefix="",t.host=t.host||"";var r=N(e,t);return r=r.flat(1/0),r=r.join("\n"),r=r.replace(/\n{2,}/g,"\n\n"),r},o.parseLine=d,o.parseSection=m,o.generateRandomKey=h,o.SymHidden=t,o.PreserveWords=i;try{window.MarkUp=o}catch{try{e.MarkUp=o}catch(H){console.error(H)}}})()}).call(this,a("950f"))},d61b:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-menu-item"},[a("a",{on:{click:function(t){return e.click(e.type,e.action)}}},[e._v(e._s(e.title)),e.subs?a("i",{staticClass:"fas fa-caret-down"}):e._e()]),e.subs?a("i",{staticClass:"hint fas fa-caret-right"}):e._e(),e.subs?a("NavMenuBar",{attrs:{menu:e.subs,supers:e.action}}):e._e()],1)},n=[];const i=new BroadcastChannel("page-changed");var s={name:"NavMenuItem",props:{title:String,type:String,action:String,subs:Array},methods:{click(e,t){if(t=t.split(",").filter(e=>e.length>0),0!==t.length){var a={};if("page"===e)a.path="/"+t.join("/");else{if("viewer"!==e&&"folder"!==e)return"action"===e?void("color"===t[0]&&changeThemeColor(t[1])):void 0;a.path="/category",a.query={c:t.join(",")}}var r=!0,n=!1;if(this.$route.path===a.path){n=!0;let e=this.$route.query&&this.$route.query.c||"",t=a.query&&a.query.c||"";e===t&&(r=!1)}r&&(this.$router.push(a),n&&i.postMessage(a))}}}},o=s,l=a("e032"),c=Object(l["a"])(o,r,n,!1,null,null,null);t["a"]=c.exports},dc94:function(e,t){(()=>{const e=Symbol("update"),t=100,a=e=>!isNaN(e)&&"number"===typeof e;class r{constructor(e=100){this.cache=new Map,this.secondary=new Map,this.limit=a(e)?e:t,this.length=0}set(t,a){const r=this.cache.has(t);r?this.cache.set(t,a):this[e](t,a)}get(t){var a=this.cache.get(t);return void 0!==a||(a=this.secondary.get(t),void 0!==a&&this[e](t,a)),a}del(e){const t=this.cache.has(e);t&&this.length--,this.cache.delete(e),this.secondary.delete(e)}has(e){return this.cache.has(e)||this.secondary.has(e)}clear(){this.cache.clear(),this.secondary.clear(),this.length=0}[e](e,t){this.length++,this.length>=this.limit&&(this.secondary=this.cache,this.cache=new Map,this.length=0),this.cache.set(e,t)}}window.LRUCache=r})()},ea3a:function(e,t,a){(function(e,t){e.setTimeout&&(e.setImmediate=e.setImmediate||function(e){setTimeout(e,0)},e.nextTick=t&&t.nextTick||e.setImmediate,e.wait=promisify((e,t)=>{var a=(new Date).getTime();Function.is(e)&&(t=e,e=0),setTimeout(()=>t((new Date).getTime()-a),e)}),e.waitLoop=promisify(e=>{var t=(new Date).getTime();setImmediate(()=>e((new Date).getTime()-t))}),e.waitTick=promisify(e=>{var t=(new Date).getTime();nextTick(()=>e((new Date).getTime()-t))}),e.queueMicrotask&&(e.waitQueue=promisify(e=>{var t=(new Date).getTime();queueMicrotask(()=>e((new Date).getTime()-t))}))),"node"===e._env?e.now=()=>{var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:e.now=()=>Date.now(),e.Clock=class{constructor(a="Initialized",r=!1){this.stamps=[],this.isNode=!!e.process,this.isNode&&!r?this.clock=()=>{var e=t.hrtime();return e[0]+e[1]/1e9}:this.clock=()=>(new Date).getTime()/1e3,this.stamp(a)}stamp(e=""){var t=this.clock();return this.stamps.push([t,e]),t}list(e=!0){var t,a=this.stamps[0][0],r=(this.stamps.length,0);return t=this.stamps.map(e=>{var t=[e[0]-a,e[1]];a=e[0];var n=e[1].length;return n>r&&(r=n),t}),e?(t=t.map(e=>{var t=e[1],a=e[0];return t=t.padStart(r," "),t+"\t"+a}),t.join("\n")):t}getStamp(e){if(!e)return-1;var t=-1;return this.stamps.some(a=>a[1]===e&&(t=a[0],!0)),t}spent(e,t){return t?(e=this.getStamp(e),e<0&&(e=this.stamps[0][0]),t=this.getStamp(t),t<0&&(t=this.stamps[this.stamps.length-1][0])):(t=this.getStamp(e),t<0&&(t=this.stamps[this.stamps.length-1][0]),e=this.stamps[0][0]),t-e}}}).call(this,a("950f"),a("3cbd"))},ef5b:function(e,t){const a=MarkUp.generateRandomKey;MarkUp.addExtension({name:"LaTeX",parse:(e,t,r)=>{r[MarkUp.SymHidden]=r[MarkUp.SymHidden]||{};var n=!1;return e=e.replace(/(\\+)\$/g,(e,t)=>{var a=Math.floor(t.length/2),r="",i="%"+MarkUp.PreserveWords["\\"]+"%";for(let n=0;n<a;n++)r+=i;if(2*a!==t.length){let e=MarkUp.PreserveWords["$"];r+="%"+e+"%"}else r+="$";return n=!0,r}),e=e.replace(/\$([\w\W]+?)\$/g,(e,t)=>{if(e.indexOf("$$")>=0)return e;var i="latex-"+a();return r[MarkUp.SymHidden][i]='<span class="latex inline">$'+t+"$</span>",n=!0,"%"+i+"%"}),[e,n]}},0,-1),MarkUp.addExtension({name:"FontAwesome",parse:(e,t,a)=>{var r=!1;return e=e.replace(/:([\w\-\.]+?):/g,(e,t,a)=>(t=t.trim(),r=!0,'<i class="fas far fa-'+t+'"></i>')),[e,r]}},0,3),MarkUp.addExtension({name:"HyperLinks",parse:(e,t,r)=>{t.links=t.links||[];var n=!1;return e=e.replace(/([!@#]?)\[([\w %'"\*_\^\|~\-\.\+=·,;:\?!\\\/&\u0800-\uffff]*?)\] *\((\@?[\w\W]*?)\)/g,(e,i,s,o,l)=>{if(o=o.trim(),0===o.length)return e;if(r[s])return e;if(""===i){t.links.push([s,o]);let e=o.substr(0,1),i="@"===e,l=MarkUp.parseLine(s,t,3,r),c="link-"+a(),u='<a href="';return u=i?u+"#"+o.substr(1,o.length)+'">':o.indexOf("@")>1?u+"mailto:"+o+'">':"."===e||"\\"===e||"/"===e?u+o+'">':u+o+'" target="_blank">',u=u+l+"</a>",r[c]=u,n=!0,"%"+c+"%"}return e}),[e,n]}},0,3),MarkUp.addExtension({name:"AnchorAndTerm",parse:(e,t,r)=>{var n=!1;return e=e.replace(/\[([\w %'"\-\.\+=,;:\?!\\\/&\u0800-\uffff]*?)\] *\{([\w \-\.]+?)\}/g,(e,i,s,o)=>{if(s=s.trim(),i=i.trim(),0===s.length)return e;if(0===i.length)return e;if(r[i])return e;var l;MarkUp.parseLine(i,t,3,r);if(t.refs[s]){l="term-"+a(),t.termList=t.termList||[],t.termList.push([s,i]),t.termList[s]=i;let e='<a class="terminology" name="'+s+'" href="#ref-'+s+'"><strong>'+i+"</strong></a>";r[l]=e}else{l="anchor-"+a();let e='<a name="'+s+'">'+i+"</a>";r[l]=e}return n=!0,"%"+l+"%"}),[e,n]}},0,3),MarkUp.addExtension({name:"Code",parse:(e,t,r)=>{r[MarkUp.SymHidden]=r[MarkUp.SymHidden]||{};var n=!1;return e=e.replace(/`([\w\W]+?)`/g,(e,t)=>{if(e.indexOf("``")>=0)return e;var i="code-"+a();return r[MarkUp.SymHidden][i]="<code>"+t+"</code>",n=!0,"%"+i+"%"}),[e,n]}}),MarkUp.addExtension({name:"BoldAndItalic",parse:(e,t,r)=>{var n=[];if(e.replace(/\*+/g,(e,t)=>{n.push([t,e.length])}),n.length<2)return[e,!1];var i=(n,i,s)=>{var o,l=e.substring(n,i+(s?2:1));o=s?l.substring(2,l.length-2):l.substring(1,l.length-1);var c=(s?"strong":"em")+"-"+a();o=MarkUp.parseLine(o,t,5,r),r[c]=s?"<strong>"+o+"</strong>":"<em>"+o+"</em>",c="%"+c+"%",e=e.replace(l,c)},s=n[0][1],o=n[1][1];if(s<3){if(s===o)return i(n[0][0],n[1][0],2===s),[e,!0];if(o<3){let t=n[2];return t?(t=t[1],t<3?o===t?(i(n[1][0],n[2][0],2===o),[e,!0]):s===t?(i(n[0][0],n[2][0],2===s),[e,!0]):[e,!1]:(i(n[1][0],n[2][0],2===o),[e,!0])):s>o?(i(n[0][0]+1,n[1][0],!1),[e,!0]):(i(n[0][0],n[1][0],!1),[e,!0])}return i(n[0][0],n[1][0],2===s),[e,!0]}return o<3?1===o?(i(n[0][0]+s-1,n[1][0],!1),[e,!0]):(i(n[0][0]+s-2,n[1][0],!0),[e,!0]):(i(n[0][0],n[1][0]+o-2,!0),[e,!0])}}),MarkUp.addExtension({name:"SubAndUnderline",parse:(e,t,r)=>{var n=[];if(e.replace(/_+/g,(e,t)=>{n.push([t,e.length])}),n.length<2)return[e,!1];var i=(n,i,s)=>{var o,l=e.substring(n,i+(s?2:1));o=s?l.substring(2,l.length-2):l.substring(1,l.length-1);var c=(s?"underline":"sub")+"-"+a();o=MarkUp.parseLine(o,t,5,r),r[c]=s?"<u>"+o+"</u>":"<sub>"+o+"</sub>",c="%"+c+"%",e=e.replace(l,c)},s=n[0][1],o=n[1][1];if(s<3){if(s===o)return i(n[0][0],n[1][0],2===s),[e,!0];if(o<3){let t=n[2];return t?(t=t[1],t<3?o===t?(i(n[1][0],n[2][0],2===o),[e,!0]):s===t?(i(n[0][0],n[2][0],2===s),[e,!0]):[e,!1]:(i(n[1][0],n[2][0],2===o),[e,!0])):s>o?(i(n[0][0]+1,n[1][0],!1),[e,!0]):(i(n[0][0],n[1][0],!1),[e,!0])}return i(n[0][0],n[1][0],2===s),[e,!0]}return o<3?1===o?(i(n[0][0]+s-1,n[1][0],!1),[e,!0]):(i(n[0][0]+s-2,n[1][0],!0),[e,!0]):(i(n[0][0],n[1][0]+o-2,!0),[e,!0])}}),MarkUp.addExtension({name:"WavyAndDelete",parse:(e,t,r)=>{var n=[];if(e.replace(/~+/g,(e,t)=>{n.push([t,e.length])}),n.length<2)return[e,!1];var i=(n,i,s)=>{var o,l=e.substring(n,i+(s?2:1));o=s?l.substring(2,l.length-2):l.substring(1,l.length-1);var c=(s?"delete":"wavy")+"-"+a();o=MarkUp.parseLine(o,t,5,r),r[c]=s?"<del>"+o+"</del>":'<span class="text-wavy">'+o+"</span>",c="%"+c+"%",e=e.replace(l,c)},s=n[0][1],o=n[1][1];if(s<3){if(s===o)return i(n[0][0],n[1][0],2===s),[e,!0];if(o<3){let t=n[2];return t?(t=t[1],t<3?o===t?(i(n[1][0],n[2][0],2===o),[e,!0]):s===t?(i(n[0][0],n[2][0],2===s),[e,!0]):[e,!1]:(i(n[1][0],n[2][0],2===o),[e,!0])):s>o?(i(n[0][0]+1,n[1][0],!1),[e,!0]):(i(n[0][0],n[1][0],!1),[e,!0])}return i(n[0][0],n[1][0],2===s),[e,!0]}return o<3?1===o?(i(n[0][0]+s-1,n[1][0],!1),[e,!0]):(i(n[0][0]+s-2,n[1][0],!0),[e,!0]):(i(n[0][0],n[1][0]+o-2,!0),[e,!0])}}),MarkUp.addExtension({name:"SupAndLarger",parse:(e,t,r)=>{var n=(n,i,s)=>{var o=e.substring(n,i+s),l=o.substring(s,o.length-s),c="larger-"+s+"-"+a();l=MarkUp.parseLine(l,t,5,r),r[c]=s<=1?"<sup>"+l+"</sup>":'<span class="text-larger level-'+(s-1)+'">'+l+"</span>",c="%"+c+"%",e=e.replace(o,c)},i=!1;return e.replace(/(\^+)([\w\W]+?)(\^+)/,(e,t,a,r,s)=>{var o=a.match(/(\\*)\[/);if(o){let t=o[1].length;if(t>>1<<1===t)return e}return t=t.length,r=r.length,t>r?n(s+t-r,s+e.length-r,r):n(s,s+e.length-r,t),i=!0,e}),[e,i]}}),MarkUp.addExtension({name:"Color",parse:(e,t,r)=>{var n=!1;return e=e.replace(/\[(\w+)\]([\w\W]+?)\[\/\]/,(e,i,s,o)=>{if(0===s.length)return e;s=MarkUp.parseLine(s,t,5,r);var l="color-"+a();return r[l]='<span class="color-'+i+'">'+s+"</span>",n=!0,"%"+l+"%"}),[e,n]}},0,6),MarkUp.addExtension({name:"FootnoteAndEndnote",parse:(e,t,r)=>{var n=!1;return e=e.replace(/(\[([\w %'"\-\.\+=,;:\?!\\\/&\u0800-\uffff]*?)\])?\[([\^:])([\w \-\.]+?)\]/g,(e,n,i="",s,o)=>{if(o=o.trim(),0===o.length)return e;if(!t.refs[o])return e;var l='<a class="notemark" type="';if(l+="^"===s?'endnote" href="#endnote-'+o:"footnote",l+='" name="'+o+'">',i&&(l+=MarkUp.parseLine(i,t,6,r)),l+="<sup>","^"===s){t.endnotes=t.endnotes||[];let e=t.endnotes.indexOf(o);e<0&&(e=t.endnotes.length,t.endnotes.push(o)),e++,l+="("+e+")"}else{t.footnotes=t.footnotes||[];let e=t.footnotes.indexOf(o);e<0&&(e=t.footnotes.length,t.footnotes.push(o)),l+="[%%FN-"+e+"%%]"}l+="</sup></a>";var c="notemark-"+a();return r[c]=l,"%"+c+"%"}),[e,n]}},0,6),MarkUp.addExtension({name:"Images",parse:(e,t,r)=>{var n=!1;return e=e.replace(/([!@#])\[([^\n]*?)\] *\((\@?[\w\W]*?)\)/g,(e,i,s,o,l)=>{if(o=o.trim(),0===o.length)return e;var c=o.match(/[ 　\t]+"(left|right)"/);c&&(o=o.replace(c[0],""),c=c[1]);var u="image";"@"===i?u="video":"#"===i&&(u="audio"),t[u]=t[u]||[],t[u].push([s,o]);var h='<div class="resource '+u;c&&(h+=" float-"+c),h+='">',h+="<figure>","!"===i?h+='<img src="'+o+'">':"@"===i?h+='<video src="'+o+'" controls>你的浏览器不支持 <code>video</code> 标签.</video>':"#"===i&&(h+='<audio src="'+o+'" controls>你的浏览器不支持 <code>audio</code> 标签.</audio>'),h+="</figure>",h+="<figcaption>"+s+"</figcaption>",h+="</div>";var p=u+"-"+a();return r[p]=h,n=!0,"%"+p+"%"}),[e,n]}},0,7),MarkUp.addExtension({name:"InlineLinks",parse:(e,t,r)=>{var n=!1;return t.mainParser?(e=e.replace(/https?:\/\/[\w\-\+=\.;\?\\\/%]+/gi,(e,i)=>{t.links.push([e,e]);var s='<a href="'+e+'" target="_blank">'+e+"</a>",o="link-"+a();return r[o]=s,n=!0,"%"+o+"%"}),[e,n]):[e,n]}},0,8)},f895:function(e,t,a){"use strict";(function(e){const a=new BroadcastChannel("change-loading-hint");e.callPageLoaded=()=>{var e=new BroadcastChannel("change-loading-hint");e.postMessage({action:"hide"})};var r=null;t["a"]={name:"Loading",data(){return{title:"载入中……",show:!0,type:"pulse",forcequit:!1}},created(){a.addEventListener("message",e=>{var t=e.data;"show"===t.action?(t.title=t.title||"载入中……",this.forcequit=!1,r&&(clearTimeout(r),r=null),r=setTimeout(()=>{this.forcequit=!0},5e3),this.show=!0):"hide"===t.action&&(t.title=t.title||"载入中……",this.forcequit=!1,r&&(clearTimeout(r),r=null),this.show=!1),String.is(t.title)&&(this.title=t.title),["spin","pulse"].indexOf(t.type)>=0&&(this.type=t.type)})},methods:{forceQuit(){r&&(clearTimeout(r),r=null),this.show=!1}}}}).call(this,a("950f"))},fc58:function(e,t,a){(function(e){(()=>{const t=new BroadcastChannel("change-loading-hint"),a=(new BroadcastChannel("show-image"),(e,t)=>{t=t||document;var a=t.querySelectorAll(e);return[].map.call(a,e=>e)}),r=(e,t)=>{var a=document.createElement(e);return String.is(t)?a.classList.add(t):Array.is(t)&&t.forEach(e=>a.classList.add(e)),a},n=(e,t)=>{t.forEach(t=>{t!==e&&t.pause()})};e.ImageWall={whRate:3/4,async init(){const e=document.querySelector("#container > div");var i=[...a(".markup-content audio"),...a(".markup-content video")];i.forEach(e=>{e.onplay=()=>n(e,i)});var s=0,o=0;a(".markup-content .image-wall").forEach(e=>{var t=a("div.resource",e);e._total=t.length,e._index=0,e._frame=e.querySelector("div.image-container.image-ghost"),e._frame||(e._frame=r("div",["image-container","image-ghost"]),e.appendChild(e._frame)),e._float=e.querySelector("div.image-container.image-float"),e._float||(e._float=r("div",["image-container","image-float"]),e.appendChild(e._float)),e._left=e.querySelector("div.image-button-left"),e._left||(e._left=r("div","image-button-left"),e._left.innerHTML='<i class="fas fa-angle-left"></i>',e.appendChild(e._left),e._left.addEventListener("click",t=>{e._index<=0||(e._index--,e._float.style.transform="translateX(-"+100/e._total*e._index+"%)",e._index<e._total-1&&e._right.classList.remove("inactive"),e._index<=0&&e._left.classList.add("inactive"))})),e._right=e.querySelector("div.image-button-right"),e._right||(e._right=r("div","image-button-right"),e._right.innerHTML='<i class="fas fa-angle-right"></i>',e.appendChild(e._right),e._right.addEventListener("click",t=>{e._index>=e._total-1||(e._index++,e._float.style.transform="translateX(-"+100/e._total*e._index+"%)",e._index>0&&e._left.classList.remove("inactive"),e._index>=e._total-1&&e._right.classList.add("inactive"))})),e._callback=(n,i)=>{t.some(e=>!e._ready)||(e.classList.add("loaded"),e._index=0,e._float.style.transform="translateX(0%)",e._left.classList.add("inactive"),t.forEach((t,a)=>{var n=r("div","image-frame");e._frame.appendChild(n),n.appendChild(t)}),e._float.innerHTML=e._frame.innerHTML,e._float.style.width=100*e._total+"%",a("div.image-frame",e._float).forEach(t=>{t.style.width=100/e._total+"%"}))},t.forEach(t=>{e._frame.appendChild(t),t._wall=e,t.classList.add("inside")})}),await Promise.all(a("div.resource.image").map(a=>new Promise(r=>{s++;var n=a.querySelector("img"),i=a.querySelector("figure");if(!n)return o++,t.postMessage({title:"载入图片: "+o+" / "+s}),r();var l=a.classList.contains("inside");l||a.classList.add("outside"),n.onload=()=>{var l=e.getBoundingClientRect().width;ImageWall.whRate;n._available=!0,n.setAttribute("oWidth",n.naturalWidth),n.setAttribute("oHeight",n.naturalHeight),i.classList.add("loaded"),i.style.backgroundImage="url("+n.src+")",a.style.width=n.naturalWidth+"px";var c=n.naturalWidth,u=n.naturalHeight;n.naturalHeight/n.naturalWidth>ImageWall.whRate?(i.classList.add("tall"),i.style.width=100*n.naturalWidth/n.naturalHeight*ImageWall.whRate+"%",i.style.paddingTop=100*ImageWall.whRate+"%",u=n.naturalWidth*ImageWall.whRate,c=u*n.naturalWidth/n.naturalHeight):(i.classList.remove("tall"),i.style.width="100%",i.style.paddingTop=100*n.naturalHeight/n.naturalWidth+"%"),a._wall&&(a._ready=!0,a._wall._callback(c,u)),o++,t.postMessage({title:"载入图片: "+o+" / "+s}),r()},n.onerror=()=>{n._available=!1,a.classList.add("failed"),o++,t.postMessage({title:"载入图片: "+o+" / "+s}),r()}})))}}})()}).call(this,a("950f"))}});
//# sourceMappingURL=index.5ae9f133.js.map