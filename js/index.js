(function(e){function t(t){for(var a,n,o=t[0],l=t[1],c=t[2],u=0,h=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&h.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);p&&p(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var o=r[n];0!==i[o]&&(a=!1)}a&&(s.splice(t--,1),e=l(l.s=r[0]))}return e}var a={},n={index:0},i={index:0},s=[];function o(e){return l.p+"js/"+({}[e]||e)+".js"}function l(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.e=function(e){var t=[],r={"chunk-10713462":1,"chunk-22ee1d28":1,"chunk-2ca2da94":1,"chunk-3239a25c":1,"chunk-3ef04039":1,"chunk-4d2da142":1,"chunk-75ac00fa":1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+".css",i=l.p+a,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===i))return t()}var h=document.getElementsByTagName("style");for(o=0;o<h.length;o++){c=h[o],u=c.getAttribute("data-href");if(u===a||u===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete n[e],p.parentNode.removeChild(p),r(s)},p.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){n[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,r){a=i[e]=[t,r]}));t.push(a[2]=s);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=o(e);var h=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var r=i[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",h.name="ChunkLoadError",h.type=a,h.request=n,r[1](h)}i[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(r,a,function(t){return e[t]}.bind(null,a));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var p=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"068a":function(e,t){const r=(e,t,r,a)=>{isNaN(a)&&(a=r);var n=e.match(t);return n=n?n.length:a,n<r&&(n=r),n},a=(e,t)=>{if(0===t)return"";var r=e.length;return r>t?e=e.substring(r-t,r):r<t&&(e=e.padStart(t,"0")),e},n=(e,t,r,a)=>{var n=[];return e.length>0&&n.push(e),t.length>0&&n.push(t),r.length>0&&n.push(r),n.join(a)},i=(e,t,r,a,n)=>{var i=[];e.length>0&&i.push(e),t.length>0&&i.push(t),r.length>0&&i.push(r);var s=i.join(n);return a.length>0&&(s+="."+a),s},s=(e,t="YYYYMMDDhhmmss",s="/",o=":",l=" ")=>{e=e||new Date;var c=r(t,/Y/g,0,0),u=r(t,/M/g,1,0),h=r(t,/D/g,1,0),p=r(t,/h/g,0,0),d=r(t,/m/g,0,0),f=r(t,/s/g,0,0),m=r(t,/x/g,0),g=a(e.getYear()+1900+"",c),y=a(e.getMonth()+1+"",u),v=a(e.getDate()+"",h),b=a(e.getHours()+"",p),w=a(e.getMinutes()+"",d),O=a(e.getSeconds()+"",f),j=a(e.getMilliseconds()+"",m),k=n(g,y,v,s),_=i(b,w,O,j,o);return 0===_.length?k:k+l+_};_("Utils").getTimeString=s},"0747":function(e,t,r){"use strict";(function(e){const r=e=>{var t={};return e.forEach(e=>{var a={name:e.name,type:e.type};e.subs&&(a.subs=r(e.subs)),t[e.category]=a}),t};e.getPathNameList=(t,r=!0)=>{if(!e.SiteMap)return null;var a=e.SiteMap,n=[],i=[];return t.some((e,t)=>{if(!a)return!0;var r=a[e];if(!r)return!0;var s={name:r.name};n.push(e),"page"===r.type?s.path="/"+n.join("/"):"viewer"!==r.type&&"view"!==r.type&&"folder"!==r.type||(s.path="/category",s.query={c:n.join(",")}),a=r.subs,i.push(s)}),r&&i.unshift({name:"首页",path:"/"}),i},t["a"]={name:"NavBar",data(){return{menu:[{name:"随笔",type:"viewer",category:"essay",subs:[{name:"头脑风暴",type:"viewer",category:"mindstorm"},{name:"书评影评",type:"viewer",category:"reviews"},{name:"闲扯",type:"viewer",category:"issue"}]},{name:"格物致知",type:"viewer",category:"science",subs:[{name:"数学",type:"viewer",category:"math",subs:[{name:"组合数学",type:"viewer",category:"combination"},{name:"数论",type:"viewer",category:"number"},{name:"几何",type:"viewer",category:"geometry"}]},{name:"物理",type:"viewer",category:"physics",subs:[{name:"广义相对论",type:"viewer",category:"gravity"},{name:"规范场论",type:"viewer",category:"gauge"},{name:"复杂网络",type:"viewer",category:"complexnetwork"},{name:"量子计算",type:"viewer",category:"quantumcompute"},{name:"虚构",type:"viewer",category:"virtual"}]},{name:"算法信息论",type:"viewer",category:"AIT"},{name:"IT相关",type:"viewer",category:"IT"}]},{name:"虚拟世界",type:"viewer",category:"novel",subs:[{name:"科幻",type:"viewer",category:"scific"},{name:"奇幻",type:"viewer",category:"magic"},{name:"推理",type:"viewer",category:"detective"}]},{name:"实用工具",type:"folder",category:"tools",subs:[{name:"解析 MarkUp",type:"page",category:"parseMarkup"},{name:"写字板（迁移中）",type:"page",category:"writer"},{name:"计算器（迁移中）",type:"page",category:"calculator"}]},{name:"休闲娱乐",type:"folder",category:"entertain",subs:[{name:"诡异哥布林与不靠谱守卫",type:"page",category:"ballcrush"},{name:"五子棋",type:"page",category:"rushgo"},{name:"三消俄罗斯方块（迁移中）",type:"page",category:"tritetris"},{name:"无尽2048（迁移中）",type:"page",category:"infinity2048"}]},{name:"资料库",type:"folder",category:"library",subs:[{name:"颜色表",type:"page",category:"",subs:[{name:"中国古代常用色",type:"page",category:"chinesecolor"},{name:"日本古代常用色",type:"page",category:"japanesecolor"}]},{name:"码库",type:"page",category:"",subs:[{name:"MarkUp 语法表",type:"page",category:"markup"},{name:"LaTeX 数学公式",type:"page",category:"latex"}]}]}],aboutMe:"aboutMe"}},computed:{aboutMenu(){var e=[{name:"配色",type:"action",category:"color",subs:[{name:"亮",type:"action",category:"light"},{name:"淡",type:"action",category:"normal"},{name:"黯",type:"action",category:"dark"}]},{name:"本站",type:"page",category:"about"}];return this.aboutMe?(e[1]={name:"关于",type:"page",category:"",subs:[e[1]]},e[1].subs.unshift({name:"本站",type:"page",category:this.aboutMe}),e[1].subs[1].name="系统"):e[1].name="关于",e}},mounted(){e.SiteMap=r(this.menu)},methods:{onClick(){Devices.isMobile&&document.querySelector(".masker").classList.add("show")}}}}).call(this,r("950f"))},1214:function(e,t){const r=new BroadcastChannel("fetch-data"),a={server:"",DB:null,ready:!1,API:"/api",DataGranary:"/api/granary",async init(){a.DB=new CachedDB("APIData",1),a.DB.onUpdate(()=>{a.DB.open("data","url",10),console.log("Barn::CacheStorage::APIData Updated")}),a.DB.onConnect(()=>{console.log("Barn::CacheStorage::APIData Connected")}),await a.DB.connect(),a.ready=!0;var e=[...a.waiters];a.waiters=[],e.forEach(e=>e())},waiters:[],waitForReady:()=>new Promise(e=>{if(a.ready)return e();a.waiters.push(e)}),get(e,t=!1,n=0){return new Promise(async i=>{a.ready||await a.waitForReady();var s=await a.DB.get("data",e);if(!(s&&(i(s.data),t&&n<=s.update))){var o;try{o=await axios.get(a.server+e)}catch(l){o=null,console.error(l)}o&&(o=o.data),o&&(await a.DB.set("data",e,{data:o,update:n||Date.now()}),s&&r.postMessage({url:e,data:o})),s||i(o)}})},async clearAllCache(){a.DB.clearCache("data"),await a.DB.clear("data")}};window.Granary={async getSource(e,t){var r={articles:[],comments:[]};return await Promise.all(Array.generate(t+1).map(async n=>{var i=a.API+"/"+e+"-"+n+".json",s=await a.get(i,t!==n);String.is(s)||(r.articles.push(...s.articles),r.comments.push(...s.comments))})),r.articles.sort((e,t)=>t.publish-e.publish),r.comments.sort((e,t)=>t.publish-e.publish),r},async getCategory(e){var t=await a.get(a.API+"/sources.json",!1),r=[];return t&&t.sources?(await Promise.all(t.sources.map(async t=>{var a=await Granary.getSource(t.owner,t.pages);a=a.articles.filter(t=>0===t.sort.indexOf(e)),r.push(...a)})),r.sort((e,t)=>t.publish-e.publish),r):r},async getColumnHeader(e){var t=await a.get(a.API+"/sources.json",!1);t=t||{},t.update=t.update||0;var r,n=a.DataGranary+"/";e&&(n=n+e+"/"),n+="info.md";try{r=await a.get(n,!0,t.update),r=r||""}catch{r=""}return r},async getArticle(e,t=0){if(t<=0){var r=await a.get(a.API+"/sources.json",!1);r=r||{},t=r.update||0}var n;e=a.DataGranary+"/"+e;try{n=await a.get(e,!0,t),n=n||""}catch{n="你所寻找的文件不存在！"}return n},async getContent(e,t=!0){if(t){var r=await a.get(a.API+"/sources.json",!1);r=r||{},timestamp=r.update||0}var n;try{n=await a.get(e,t,timestamp),n=n||""}catch(i){n="你所寻找的文件不存在！"}return n},async clearAllCache(){sessionStorage.clear();var e=[caches.delete("schwarzschild"),a.clearAllCache()];await Promise.all(e)}},r.addEventListener("message",e=>{console.log("DataUpdated: "+e.data.url)}),a.init()},2231:function(e,t){Symbol.set=Symbol.setSymbols=function(e,t){String.is(e)?(t=[].map.call(arguments,e=>e),e=null):Array.is(e)&&!t&&(t=e,e=null),e=e||{};var r={},a={};return t.forEach(t=>{if(t=t.split("|"),0!==t.length){t.length<2&&(t[1]=t[0]);var n=t[1];t=t[0];var i=Symbol(t);r[i]=n,a[t]=n,Object.defineProperty(e,t,{value:i,configurable:!1,enumerable:!0})}}),e.toString=e=>r[e]||a[e]||"No Such Symbol",Object.defineProperty(e,"toString",{enumerable:!1}),e},Symbol.is=e=>Symbol.__proto__===Symbol.prototype||"symbol"===typeof e},2294:function(e,t,r){},3202:function(e,t){(async()=>{if(!navigator.serviceWorker)return;const e=new BroadcastChannel("service-messages");if(e.addEventListener("message",e=>{console.log("CacheUpdated: "+e.data.url+" ("+e.data.timestamp+")")}),window.caches){let e=await caches.keys();e.length>0&&e.forEach(async e=>{var t=await caches.open(e),r=await t.keys();console.log("资源缓存库 "+e+": "+r.length)})}try{let e=await navigator.serviceWorker.getRegistrations();console.log("Service Worker: "+e.length);for(let t of e)t.waiting&&(console.log("有等待中的新版本 Service Worker"),notify({title:"有新版网站中台等待更新",message:"新版 Service Worker 将在下次打开本页面后启用。",duration:5e3,type:"warn"}))}catch(t){console.error("获取已安装 Service 出错：",t)}try{let e=await navigator.serviceWorker.register("/priory.js");e.onupdatefound=e=>{e.target.update()},console.log("安装 Service Worker "+(e?"成功":"失败"))}catch(t){console.error("安装本地 Service 出错：",t)}})()},"346c":function(e,t,r){},"3dfd":function(e,t,r){"use strict";var a=r("79c4");const n={id:"container"},i=Object(a["h"])("div",{id:"footnoteFrame"},null,-1);function s(e,t,r,s,o,l){const c=Object(a["x"])("NavBar"),u=Object(a["x"])("loading"),h=Object(a["x"])("Notification"),p=Object(a["x"])("ImageShowcase"),d=Object(a["x"])("router-view"),f=Object(a["x"])("TailBar");return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["h"])(c),Object(a["h"])(u),Object(a["h"])(h,{hAlign:"right",vAlign:"top"}),Object(a["h"])(p),Object(a["h"])("div",n,[Object(a["h"])(d)]),i,Object(a["h"])(f),Object(a["h"])("div",{class:"masker",onClick:t[1]||(t[1]=(...e)=>l.onClick&&l.onClick(...e))})],64)}var o={name:"App",methods:{onClick(){document.querySelector(".masker").classList.remove("show")}}};o.render=s;t["a"]=o},"4cf0":function(e,t,r){},5563:function(e,t){(()=>{class e{constructor(e,t){this._name=e,this._version=t,this.conn=null,this.db=null,this.cbUpdates=[],this.cbConnects=[],this.caches={}}connect(){return new Promise((e,t)=>{this.conn=indexedDB.open(this.name,this.version),this.conn.onupgradeneeded=e=>{this.db=this.conn.result,this.cbUpdates.forEach(e=>e(this))},this.conn.onsuccess=t=>{this.db=this.conn.result,this.cbConnects.forEach(e=>e(this)),e(this)},this.conn.onerror=e=>{t(e)}})}onConnect(e){this.cbConnects.push(e)}onUpdate(e){this.cbUpdates.push(e)}open(e,t="id",r=100){if(!this.db.objectStoreNames.contains(e)){let r=this.db.createObjectStore(e,{keyPath:t});r.createIndex(t,t,{unique:!0})}}cache(e,t){this.caches[e]||(this.caches[e]=new LRUCache(t))}set(e,t,r){return new Promise((a,n)=>{var i=this.db.transaction([e],"readwrite");i||n(new Error("Open IndexedDB Transaction Failed: "+e));var s=i.objectStore(e);e||n(new Error("Open IndexedDB ObjectStore Failed: "+e));var o={};o[s.keyPath]=t,o.data=r;var l=s.put(o);l.onsuccess=n=>{var i=this.caches[e];i&&i.set(t,r),a(n.result)},l.onerror=e=>{n(e)}})}get(e,t){return new Promise((r,a)=>{var n=this.db.transaction([e],"readonly");n||a(new Error("Open IndexedDB Transaction Failed: "+e));var i=n.objectStore(e);e||a(new Error("Open IndexedDB ObjectStore Failed: "+e));var s,o=i.index(i.keyPath),l=this.caches[e];if(l&&(s=l.get(t),void 0!==s))return r(s);s=o.get(t),s.onsuccess=e=>{e.target.result?r(e.target.result.data):r(void 0)},s.onerror=e=>{a(e)}})}all(e){return new Promise((t,r)=>{var a=this.db.transaction([e],"readonly");a||r(new Error("Open IndexedDB Transaction Failed: "+e));var n=a.objectStore(e);e||r(new Error("Open IndexedDB ObjectStore Failed: "+e));var i=n.index(n.keyPath),s=i.getAll();s.onsuccess=e=>{var r=e.target.result;if(!r)return t(r);var a={};r.forEach(e=>{a[e[n.keyPath]]=e.data}),t(a)},s.onerror=e=>{r(e)}})}del(e,t){return new Promise((r,a)=>{var n=this.db.transaction([e],"readwrite");n||a(new Error("Open IndexedDB Transaction Failed: "+e));var i=n.objectStore(e);e||a(new Error("Open IndexedDB ObjectStore Failed: "+e));var s=i.delete(t);s.onsuccess=a=>{var n=this.caches[e];n&&n.del(t),r(a.result)},s.onerror=e=>{a(e)}})}clear(e){return new Promise((t,r)=>{var a=this.db.transaction([e],"readwrite");a||r(new Error("Open IndexedDB Transaction Failed: "+e));var n=a.objectStore(e);e||r(new Error("Open IndexedDB ObjectStore Failed: "+e));var i=n.clear();i.onsuccess=r=>{var a=this.caches[e];a&&a.clear(),t(r.result)},i.onerror=e=>{r(e)}})}clearCache(e){var t=this.caches[e];t&&t.clear()}get name(){return this._name}get version(){return this._version}}window.CachedDB=e})()},"55a5":function(e,t,r){(function(e,t,r){try{window?(window.global=window,e._env="browser",e.require=()=>{},e.module={exports:{}}):e._env="node"}catch(a){e._env="node"}t&&t.execArgv&&!t.execArgv.includes("--expose-gc")&&(e.gc=()=>{}),e.noEventModules||e._canThread,"node"===e._env&&(e.loadjLAssModule=e=>{loadall(r,"./"+e)})}).call(this,r("950f"),r("3cbd"),"/")},"55f6":function(e,t){Boolean.is=e=>"boolean"===typeof e||e instanceof Boolean,BigInt.is=e=>"bigint"===typeof e||e instanceof BigInt,Number.is=e=>"number"===typeof e||e instanceof Number,Object.isBasicType=e=>!!String.is(e)||(!!Boolean.is(e)||(!!BigInt.is(e)||(!!Number.is(e)||!!Symbol.is(e)))),Object.prototype.copy=function(){return Object.assign({},this)},Object.prototype.duplicate=function(){var e={};for(let t in this){let r=this[t];Object.isBasicType(r)?e[t]=r.valueOf():null===r||void 0===r?e[t]=r:r instanceof Date?e[t]=new Date(r.getTime()):"object"!==typeof r||r instanceof Promise||(e[t]=r.duplicate())}return Object.assign({},this,e)},Object.prototype.extent=function(...e){var t=Object.assign({},this);e.reverse(),Object.assign(this,...e,t)},Object.defineProperty(Object.prototype,"copy",{enumerable:!1}),Object.defineProperty(Object.prototype,"duplicate",{enumerable:!1}),Object.defineProperty(Object.prototype,"extent",{enumerable:!1}),Number.prototype.duplicate=function(){return 1*this},Object.defineProperty(Number.prototype,"duplicate",{enumerable:!1}),BigInt.prototype.duplicate=function(){return 1n*this},Object.defineProperty(BigInt.prototype,"duplicate",{enumerable:!1}),Boolean.prototype.duplicate=function(){return!1!==this&&!1!==this.valueOf()},Object.defineProperty(Boolean.prototype,"duplicate",{enumerable:!1}),Proxy&&(Proxy.toObject=e=>{var t={};for(let r in e){let a=e[r];a instanceof Proxy?t[r]=Proxy.toObject(a):t[r]=a}return t})},"56d7":function(e,t,r){"use strict";r.r(t),function(e){r("55a5"),r("5abc"),r("b9a5"),r("9eab"),r("78d8"),r("746b"),r("55f6"),r("64c5"),r("2231"),r("ea3a"),r("068a"),r("cbfc"),r("ef5b"),r("94b5"),r("3202"),r("dc94"),r("5563"),r("1214"),r("6ae3"),r("fc58");var t=r("79c4"),a=r("7338"),n=r.n(a),i=r("3dfd"),s=r("a18c"),o=r("c428"),l=r("75be"),c=r("9d8d"),u=r("b2e4"),h=r("d61b"),p=r("bfef"),d=r("aab0"),f=r("8397"),m=r("c531");r("346c"),r("aa46"),r("5aea"),r("2294"),r("9a67"),r("4cf0"),r("6851"),r("899d"),r("6f45"),r("8f09"),e.axios=n.a,Devices.isMobile?document.body.classList.add("mobile"):document.body.classList.add("notmobile"),(async()=>{if(await LifeCycle.emit.loaded()){const e=Object(t["c"])(i["a"]);e.config.globalProperties.SiteName="过气网红回收站",e.use(l["a"]),e.component("Loading",o["a"]),e.component("NavBar",c["a"]),e.component("NavMenuBar",u["a"]),e.component("NavMenuItem",h["a"]),e.component("TailBar",p["a"]),e.component("ImageShowcase",d["a"]),e.component("Crumb",f["a"]),e.component("Column",m["a"]),await LifeCycle.emit.ready(e)&&(e.use(s["a"]).mount("#app"),s["a"].app=e,await LifeCycle.emit.initialized(e))}})()}.call(this,r("950f"))},"5abc":function(e,t,r){(function(e){const t=new Map;e._=(r,a)=>{if(r=r.split(/[\/\\,\.\:;]/).map(e=>e.trim()).filter(e=>e.length>0),r.length<1)return e;if(r=r.join("/"),a)return t.set(r,a),a;if(a=t.get(r),a)return a;var n=[...t.keys()];return n=n.filter(e=>0===e.indexOf(r)),a={},n.forEach(e=>{var n=t.get(e);e=e.replace(r+"/",""),e=e.split("/");var i=e.pop(),s=a;e.forEach(e=>{s[e]&&(s[e]={}),s=s[e]}),s[i]=n}),a},_("Utils",{})}).call(this,r("950f"))},"5aea":function(e,t,r){},"64c5":function(e,t,r){(function(e,t){const r=[];(()=>{for(let e=0;e<10;e++)r.push(""+e);for(let e=65;e<=90;e++)r.push(String.fromCharCode(e));for(let e=97;e<=122;e++)r.push(String.fromCharCode(e))})(),String.random=e=>{var t="";for(let a=0;a<e;a++)t+=r[Math.floor(r.length*Math.random())];return t},String.blank=(e,t=" ")=>{var r="";for(let a=0;a<e;a++)r+=t;return r},String.is=e=>e instanceof String||"string"===typeof e,String.prototype.copy=String.prototype.duplicate=function(){return String(this).toString()},Object.defineProperty(String.prototype,"copy",{enumerable:!1}),Object.defineProperty(String.prototype,"duplicate",{enumerable:!1}),"node"===e._env&&Object.defineProperty(String.prototype,"byteLength",{get(){var e=t.from(this,"utf8");return e.byteLength},enumerable:!1,configurable:!1})}).call(this,r("950f"),r("4458").Buffer)},6851:function(e,t,r){},"6ae3":function(e,t){(()=>{var e,t;const r=async r=>{var a=r.target,n=a.className,i=a.getAttribute("href");if(i&&"#"===i.substr(0,1)){i=i.substring(1,i.length);var s=t.querySelector('a[name="'+i+'"]');if(s){var o=s.parentElement.innerHTML.replace(s.outerHTML,""),l="";"terminology"===n&&(l='<p class="note-title">'+a.innerText+"</p>"),l+='<p class="note-content">'+o+"</p>",e.innerHTML=l,e._status=1;var c=a.getBoundingClientRect(),u=!0,h=!0,p=c.left-10,d=c.top+c.height+10;p>.6*window.innerWidth&&(h=!1,p=window.innerWidth-c.right),d>.7*window.innerHeight&&(u=!1,d=window.innerHeight-c.top),h?(e.style.left=p+"px",e.style.right=""):(e.style.left="",e.style.right=p+"px"),u?(e.style.top=d+"px",e.style.bottom=""):(e.style.top="",e.style.bottom=d+"px"),e.style.display="block",await wait(50),e.style.opacity="1",e._status=2}}},a=async t=>{e.style.opacity="0",await wait(200),2===e._status&&(e.style.display="none",e._status=0)},n=async r=>{var a=r.target,n=a.className;if("notemark"===n||"terminology"===n){var i=a.computedStyleMap();i=i.get("text-decoration").toString();var s=!1;if(i.indexOf("underline")>=0&&(s=!0),s){var o=a.getAttribute("href");if("#"!==o.substr(0,1))return;o=o.substring(1,o.length);var l=t.querySelector('a[name="'+o+'"]');if(!l)return;var c=l.parentElement.innerHTML.replace(l.outerHTML,""),u="";"terminology"===n&&(u='<p class="note-title">'+a.innerText+"</p>"),u+='<p class="note-content">'+c+"</p>",e.innerHTML=u,e._status=1;var h=a.getBoundingClientRect(),p=!0,d=!0,f=h.left-10,m=h.top+h.height+10;f>.6*window.innerWidth&&(d=!1,f=window.innerWidth-h.right),m>.7*window.innerHeight&&(p=!1,m=window.innerHeight-h.top),d?(e.style.left=f+"px",e.style.right=""):(e.style.left="",e.style.right=f+"px"),p?(e.style.top=m+"px",e.style.bottom=""):(e.style.top="",e.style.bottom=m+"px"),e.style.display="block",await wait(50),e.style.opacity="1",e._status=2}else e.style.opacity="0",await wait(200),2===e._status&&(e.style.display="none",e._status=0)}},i=(e,t)=>{Devices.isMobile||e.querySelectorAll(t).forEach(e=>{var t=e.getAttribute("footnote_inited");t||(e.addEventListener("mouseleave",a),e.addEventListener("mouseenter",r),e.setAttribute("footnote_inited",!0))})},s=(e,t)=>{Devices.isMobile||e.querySelectorAll(t).forEach(e=>{var t=e.getAttribute("footnote_inited");t&&(e.removeEventListener("mouseleave",a),e.removeEventListener("mouseenter",r),e.removeAttribute("footnote_inited"))})};window.InitNotes=r=>{e=document.querySelector("#footnoteFrame"),e._status=e._status||0,t!==r&&t&&destructe(),t=r;var a=r.getAttribute("footnoted");a||(r.setAttribute("footnoted",!0),r.addEventListener("transitionstart",n)),i(r,"a.notemark"),i(r,"a.terminology")},window.destructe=()=>{t.removeEventListener("transitionstart",n),s(UI,"a.notemark"),s(UI,"a.terminology")}})()},"6f45":function(e,t,r){},"746b":function(e,t){Math.pick=e=>{if(Array.is(e)){let t=Math.floor(Math.random()*e.length);return e[t]}return isNaN(e)?null:Math.random()<=e},Math.range=(e,t)=>(isNaN(t)&&(t=e,e=0),e+Math.random()*(t-e))},"75be":function(e,t,r){"use strict";var a,n=r("79c4");function i(e,t,r,a,i,s){return Object(n["q"])(),Object(n["d"])("div",{class:"notifaction-frame",horizontal:r.hAlign,vertial:r.vAlign,onClick:t[1]||(t[1]=(...e)=>s.onClick&&s.onClick(...e))},null,8,["horizontal","vertial"])}const s=new BroadcastChannel("show-notification");s.addEventListener("message",e=>{a&&a.showMessage(e.data)}),window.notify=e=>{a&&a.showMessage(e)};var o={name:"Notification",props:{hAlign:String,vAlign:String},install(e){r("7fd5"),e.component("Notification",this)},mounted(){a=this},methods:{async showMessage(e){var t=e.duration||3e3,r=Math.floor(1e10*Math.random());e.key=r,e.ele=this.newMsg(e),e.ele.exit=async()=>{e.timer&&clearTimeout(e.timer),delete e.timer,e.ele.classList.remove("show"),await wait(300),this.$el.removeChild(e.ele),delete e.ele.exit,delete e.ele},this.$el.appendChild(e.ele),await wait(),e.ele.classList.add("show"),e.timer=setTimeout(e.ele.exit,t)},newMsg(e){var t=document.createElement("section");if(t.setAttribute("key",e.key),t.setAttribute("type",e.type||"default"),e.title){let r=document.createElement("header");r.innerText=e.title,t.appendChild(r)}if(e.message){let r=document.createElement("article");r.innerText=e.message,t.appendChild(r)}return t},onClick(e){var t=e.target;t&&t.exit&&t.exit()}}};o.render=i;t["a"]=o},"78d8":function(e,t,r){(function(e){Function.is=e=>e instanceof Function,e.AsyncFunction=(async()=>{}).constructor,AsyncFunction.is=e=>e instanceof AsyncFunction;const t=e=>{if(!(e instanceof Function))return null;if(e._promised)return e;var t=(...t)=>new Promise((r,a)=>{try{e(...t,r,a)}catch(n){a(n)}});return t._promised=!0,t._original=e,t};t.withTimeout=e=>{if(!(e instanceof Function))return null;if(e._promised)return e;var t=(...t)=>{var r,a,n=null,i=-1,s=null,o=new Promise((n,i)=>{a=i;var o=(...e)=>{s&&clearTimeout(s),s=null,n(...e)};try{r=(new Date).getTime(),e(...t,o,a)}catch(l){a(l)}});return o.timeout=(...e)=>{if(e[0]instanceof Number&&(e[0]=1*e[0]),isNaN(e[0]))e[0]instanceof Function&&(n=e[0]);else if(e[1]instanceof Function&&(n=e[1]),i=e[0]>=0?e[0]:-1,i<0&&s)clearTimeout(s),s=null;else if(i>=0){s&&clearTimeout(s);let e=(new Date).getTime();s=setTimeout(()=>{n&&n(),a(new Error("Timeout!"))},i-(e-r))}return o},o};return t._promised=!0,t._original=e,t};const r=(e,...r)=>{var a,n,i;return r[0]instanceof Array?(a=r[0],n=r[1],i=r[2],i||(i=n,n=null)):(i=r.pop(),n=r[r.length-1]instanceof Function?null:r.pop(),a=r),a=e?a.map(e=>t(e)):a.map(e=>e._original||e),[a,n,i]};t.s=t.serial=t(async(...e)=>{var[t,a,n]=r(!0,...e);for(let r of t){let e;e=null===a||void 0===a?await r():await r(a),void 0!==e&&(a=e)}n(a)}),t.p=t.parallel=t(async(...e)=>{var[t,a,n]=r(!0,...e),i=t.length,s=[];t.forEach(async(e,t)=>{var r;r=null===a||void 0===a?await e():await e(a),s[t]=r,i--,i>0||n(s)})}),t.a=t.any=t(async(...e)=>{var[t,a,n]=r(!0,...e);t.forEach(async(e,t)=>{var r;r=null===a||void 0===a?await e():await e(a),n(r)})}),e.promisify=Function.promisify=t,e.oncilize=Function.oncilize=e=>{var t,r,a=!1;return r=e._promised?(...r)=>new Promise(async(n,i)=>{if(a)return await waitLoop(),void n(t);a=!0,t=await e(...r),n(t)}):(...r)=>(a||(a=!0,t=e(...r)),t),r.refresh=()=>a=!1,r},e.pumplize=Function.pumplize=(e,t,r=!0)=>{var a=[],n=null,i=100,s=null,o=()=>{n=null;var i=a;a=[],t(r?e(...i):e(i))},l=(...e)=>{null===n&&(n=Date.now(),s&&clearTimeout(s),s=setTimeout(o,i));var t=Date.now();t-n>=i?o():r?a=e:a.push(e)};return l.dump=()=>{s&&clearTimeout(s),s=null,o()},l.timeout=e=>{if(isNaN(e))return l;if(i=e,null===n)return l;var t=Date.now();return s&&clearTimeout(s),s=setTimeout(o,i+n-t),l},l}}).call(this,r("950f"))},"7fd5":function(e,t,r){},8397:function(e,t,r){"use strict";var a=r("79c4");const n={key:0,class:"crumb"},i=Object(a["h"])("span",{class:"hint"},"位置：",-1),s=Object(a["h"])("i",{class:"fas fa-angle-right"},null,-1);function o(e,t,r,o,l,c){return l.show?(Object(a["q"])(),Object(a["d"])("div",n,[i,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(l.path,(e,t)=>(Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["h"])("span",{onClick:t=>c.jump(e.path,e.query)},Object(a["z"])(e.name),9,["onClick"]),s],64))),256))])):Object(a["e"])("",!0)}var l=null;const c=new BroadcastChannel("page-changed");c.addEventListener("message",e=>{l&&l.update()});var u={name:"Crumb",data(){return{show:!0,path:[]}},props:{target:String},methods:{jump(e,t){t=Proxy.toObject(t);var r={path:e,query:t};this.$router.push(r),e===this.$route.path&&c.postMessage(r)},update(){var e=null,t="";if("/"===this.$route.path)e=null;else if("/category"===this.$route.path)this.$route.query&&this.$route.query.c&&(e=decodeURIComponent(this.$route.query.c).split(",").filter(e=>e.length>0),t="viewer");else if("/view"===this.$route.path)this.$route.query&&this.$route.query.f&&(e=decodeURIComponent(this.$route.query.f).split("/"),e.pop(),e=e.filter(e=>e.length>0),t="view");else{let r=this.target||this.$route.path;e=r.split("/").filter(e=>e.length>0),t="view"}e?(this.show=!0,this.path.splice(0,this.path.length),"viewer"!==t&&"page"!==t||e.pop(),this.path.push(...getPathNameList(e))):this.show=!1}},mounted(){this.update(),l=this},unmounted(){l=null}};u.render=o;t["a"]=u},"899d":function(e,t,r){},"8f09":function(e,t,r){},"94b5":function(e,t,r){(function(e){window.loadJS=e=>new Promise(t=>{var r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=t,r.onerror=t,document.body.appendChild(r)}),window.loadCSS=e=>new Promise(t=>{var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,r.onload=t,r.onerror=t,document.body.appendChild(r)}),window.onVueHyperLinkTriggered=(e,t)=>{var r=t.target;if(!r||!r.nodeName||"a"!==r.nodeName.toLowerCase())return!1;var a=r.getAttribute("href");if(!a)return!1;if(0===a.indexOf("#/"))a=a.replace(/^#+[\\\/]+/,""),a=a.split(/[\\\/]+/),a={path:"/category",query:{c:a.join(",")}};else{if(0===a.indexOf("#")){a=a.replace(/^#+/,"");let e=document.querySelector('[name="'+a+'"]');if(e){let t=document.body.querySelector("#app");if(t){let r=(e.offsetTop||0)-t.scrollTop;Devices.isMobile||(r-=25),t.scrollBy({top:r,behavior:"smooth"})}}return t.preventDefault(),!0}if(0===a.indexOf("/page/#/"))a=a.replace(/^[\\\/]+page[\\\/]+#+[\\\/]+/,"/"),a={path:a};else if(0===a.indexOf("/page/"))a=a.replace("/page/","/"),a={path:a};else{if(0!==a.indexOf("/article/"))return!1;a=a.replace("/article/",""),a=encodeURIComponent(a),a={path:"/view",query:{f:a}}}}t.preventDefault();var n=location.hash.replace(/^#+/,"").split("?")[0];if(e.$router.push(a),a.path===n){let e=new BroadcastChannel("page-changed");e.postMessage(a)}return!0},LifeCycle.on.ready(t=>{console.log("Schwarzschild Blackhole System is READY!");var r=!0;t.config.globalProperties.afterMarkUp=async()=>{InitNotes(document.body.querySelector("#container")),r?(r=!1,MathJax.Hub.Config({extensions:["tex2jax.js"],TeX:{extensions:["AMSmath.js","AMSsymbols.js"]},jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"]]}}),MathJax.Hub.Queue(["Typeset",MathJax.Hub])):MathJax.Hub.Queue(["Typeset",MathJax.Hub]),await ImageWall.init()};const a=new MutationObserver(e=>{var r=document.querySelectorAll(".markup");[].forEach.call(r,e=>{var t=e.innerText;t=t.replace(/^\t+|\t+$/g,"\n"),t=MarkUp.parse(t,{toc:e.classList.contains("toc"),glossary:e.classList.contains("glossary"),resources:e.classList.contains("resources"),showtitle:e.classList.contains("showtitle"),showauthor:!1,classname:"markup-content"}),e.innerHTML=t,e.classList.remove("markup")}),r.length>0&&t.config.globalProperties.afterMarkUp()});a.observe(document.body,{childList:!0,subtree:!0}),e.changeThemeColor=e=>{e&&(localStorage.setItem("themeColor",e),document.body.setAttribute("theme",e))},changeThemeColor(localStorage.getItem("themeColor"))}),LifeCycle.on.initialized(e=>{console.log("Schwarzschild Blackhole System is INITIALIZED!")})}).call(this,r("950f"))},"9a67":function(e,t,r){},"9d8d":function(e,t,r){"use strict";var a=r("79c4");const n={class:"nav-bar"},i=Object(a["h"])("i",{class:"fas fa-angle-right"},null,-1),s={class:"nav-docker"},o=Object(a["g"])("首页"),l=Object(a["h"])("i",{class:"fas fa-caret-right"},null,-1),c={class:"nav-container"},u={class:"about-bar nav-container right"};function h(e,t,r,h,p,d){const f=Object(a["x"])("router-link"),m=Object(a["x"])("NavMenuBar");return Object(a["q"])(),Object(a["d"])("div",n,[Object(a["h"])("div",{class:"nav-hint",onClick:t[1]||(t[1]=(...e)=>d.onClick&&d.onClick(...e))},[i]),Object(a["h"])("div",s,[Object(a["h"])(f,{to:"/"},{default:Object(a["C"])(()=>[o]),_:1}),l,Object(a["h"])("div",c,[Object(a["h"])(m,{menu:p.menu},null,8,["menu"])]),Object(a["h"])("div",u,[Object(a["h"])(m,{menu:d.aboutMenu},null,8,["menu"])])])])}var p=r("0747");p["a"].render=h;t["a"]=p["a"]},"9eab":function(e,t,r){(function(e){e.ProtoType=Function.prototype,Object.defineProperty(ProtoType,"kerneltype",{get(){return this===ProtoType||this.__proto__===ProtoType?this:this.__proto__.kerneltype?this.__proto__.kerneltype:this},enumerable:!1,configurable:!1}),Object.prototype.isSubClassOf=function(e){if("function"!==typeof this)return!1;var t=this;while(t){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1},Object.defineProperty(Object.prototype,"isSubClassOf",{enumerable:!1})}).call(this,r("950f"))},a18c:function(e,t,r){"use strict";var a=r("3608"),n=r("79c4");const i={class:"home"};function s(e,t,r,a,s,o){const l=Object(n["x"])("Column");return Object(n["q"])(),Object(n["d"])("div",i,[Object(n["h"])(l)])}var o={name:"Home"};o.render=s;var l=o;const c={class:"category"};function u(e,t,r,a,i,s){const o=Object(n["x"])("Crumb"),l=Object(n["x"])("Column");return Object(n["q"])(),Object(n["d"])("div",c,[Object(n["h"])(o),Object(n["h"])(l)])}var h={name:"Category"};h.render=u;var p=h;const d={class:"viewer"};function f(e,t,r,a,i,s){const o=Object(n["x"])("Crumb");return Object(n["q"])(),Object(n["d"])("div",d,[Object(n["h"])(o),Object(n["h"])("div",{class:"container",onClick:t[1]||(t[1]=(...e)=>s.onClick&&s.onClick(...e))})])}const m=new BroadcastChannel("change-loading-hint");var g={name:"Viewer",methods:{async update(){m.postMessage({name:"加载中……",action:"show"});var e=this.$route.query.f,t=1*this.$route.query.t,r=this.$route.query.a||"LostAbaddon";if(e){t=t||0;var[a,n]=await Promise.all([Granary.getArticle(e,t),Granary.getContent("api/copyright.md")]),i="",s="",o=!0;if(a?n&&(a=a+"\n\n\n"+n):(o=!1,i='<div class="page_not_found"><div class="frame"></div><div class="title">指定内容不存在，请联系站长。</div></div>'),o){0===t&&(t=Date.now());let e=MarkUp.fullParse(a,{toc:!0,glossary:!0,resources:!1,showtitle:!0,showauthor:!0,author:r,date:t,classname:"markup-content"});s=" | "+e.title,i=e.content,i||(i='<div class="page_not_found"><div class="frame"></div><div class="title">MarkUp 内容解析失败，请联系作者。</div></div>',o=!1)}this.$el.querySelector("div.container").innerHTML=i,o&&await this.afterMarkUp(),document.title=s+" ("+this.SiteName+")",m.postMessage({action:"hide"})}else this.$router.push({path:"/"})},onClick(e){onVueHyperLinkTriggered(this,e)}},mounted(){this.update()}};g.render=f;var y=g;const v=[{path:"/",name:"Home",component:l},{path:"/category",name:"Category",component:p},{path:"/view",name:"Viewer",component:y},{path:"/about",name:"AboutSite",component:function(){return r.e("chunk-10713462").then(r.bind(null,"52a1"))}},{path:"/chinesecolor",name:"chinesecolor",component:function(){return r.e("chunk-22ee1d28").then(r.bind(null,"de6d"))}},{path:"/freemusic",name:"freemusic",component:function(){return r.e("chunk-2d0c4d67").then(r.bind(null,"3d11"))}},{path:"/japanesecolor",name:"japanesecolor",component:function(){return r.e("chunk-75ac00fa").then(r.bind(null,"ce9d"))}},{path:"/latex",name:"latex",component:function(){return r.e("chunk-2d0cbe04").then(r.bind(null,"4c10"))}},{path:"/markup",name:"markup",component:function(){return r.e("chunk-4d2da142").then(r.bind(null,"f4c6"))}},{path:"/entertain/ballcrush",name:"ballcrush",component:function(){return r.e("chunk-2d0d4006").then(r.bind(null,"5ebb"))}},{path:"/entertain/rushgo",name:"rushgo",component:function(){return r.e("chunk-2d0de03c").then(r.bind(null,"849c"))}},{path:"/popsci/quantum1",name:"quantum1",component:function(){return r.e("chunk-2ca2da94").then(r.bind(null,"1836"))}},{path:"/tools/parseMarkup",name:"parseMarkup",component:function(){return r.e("chunk-3ef04039").then(r.bind(null,"dcfb"))}},{path:"/aboutMe",name:"AboutMe",component:function(){return r.e("chunk-3239a25c").then(r.bind(null,"dd86"))}},{path:"/404",name:"PageNotFound",component:function(){return r.e("chunk-2d0e95df").then(r.bind(null,"8cdb"))}},{path:"/:pathMatch(.*)*",name:"PageNotFound",component:function(){return r.e("chunk-2d0e95df").then(r.bind(null,"8cdb"))}}],b=Object(a["a"])({history:Object(a["b"])(),routes:v});b.afterEach((e,t)=>{if("Category"===e.name){let t=getPathNameList(e.query.c.split(","),!1);document.title=t?b.app.config.globalProperties.SiteName+" / "+t.map(e=>e.name).join(" / "):b.app.config.globalProperties.SiteName}else document.title=b.app.config.globalProperties.SiteName;document.querySelector("#app").scrollTo(0,0)});t["a"]=b},aa46:function(e,t,r){},aab0:function(e,t,r){"use strict";var a=r("79c4");const n={class:"imageFrame"},i={class:"imageLegend"},s=Object(a["h"])("i",{class:"fas fa-times-circle"},null,-1),o=Object(a["h"])("i",{class:"fas fa-angle-left"},null,-1),l=Object(a["h"])("i",{class:"fas fa-angle-right"},null,-1);function c(e,t,r,c,u,h){return Object(a["q"])(),Object(a["d"])("div",{class:"imageShowcase "+(u.show?"show":"hide")},[Object(a["h"])("div",n,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(u.gallary,(e,t)=>(Object(a["q"])(),Object(a["d"])("div",{class:"imagePage",style:{left:100*(t-u.index)+"%"}},[Object(a["h"])("div",{class:"imageInstance",style:{backgroundImage:"url("+e.image+")",width:e.width+"px"}},null,4),Object(a["h"])("div",i,Object(a["z"])(e.title),1)],4))),256))]),Object(a["h"])("div",{class:"imageButton close",onClick:t[1]||(t[1]=e=>u.show=!1)},[s]),Object(a["h"])("div",{class:"imageButton left",inactive:u.index<=0,onClick:t[2]||(t[2]=e=>u.index--)},[o],8,["inactive"]),Object(a["h"])("div",{class:"imageButton right",inactive:u.index>=u.gallary.length-1,onClick:t[3]||(t[3]=e=>u.index++)},[l],8,["inactive"])],2)}const u=e=>{var t=e.parentNode;if(!t)return null;var r=t.tagName;return r?(r=r.toLowerCase(),"figuren"===r?u(t):"div"!==r?null:t.classList.contains("image-wall")?t:u(t)):null};var h={name:"ImageShowcase",data(){return{show:!1,index:0,gallary:[]}},created(){document.body.addEventListener("click",e=>{if(!this.show){var t=e.target,r=t.tagName;if(r){r=r.toLowerCase();var a,n,i=!1;if("img"===r?(i=!0,a=t,n=u(t)):("figure"===r||"div"===r&&t.classList.contains("resource"))&&(a=t.querySelector("img"),a&&(i=!0,n=u(t))),i){var s=[],o=0;if(n)n.querySelectorAll(".image-container.image-float div.resource.image").forEach((e,t)=>{var r=e.querySelector("img");r===a&&(o=t);var n=e.querySelector("figcaption");n=n.innerText||"",s.push({image:r.src,width:r.naturalWidth,height:r.naturalHeight,title:n})});else{o=0;let e=a.parentNode;e&&(e=e.parentNode),e&&(e=e.querySelector("figcaption")),e&&(e=e.innerText),e=e||"",s=[{image:a.src,width:a.naturalWidth,height:a.naturalHeight,title:e}]}this.showGallary(o,s)}}}}),document.body.addEventListener("keydown",e=>{this.show&&(37===e.keyCode?this.index>0&&this.index--:39===e.keyCode?this.index<this.gallary.length-1&&this.index++:27===e.keyCode&&(this.show=!1),e.preventDefault())})},methods:{showGallary(e,t){this.index=e,this.gallary.splice(0,this.gallary.length),t.forEach(e=>this.gallary.push(e)),this.show=!0}}};h.render=c;t["a"]=h},b2e4:function(e,t,r){"use strict";var a=r("79c4");const n={class:"nav-menu-bar"};function i(e,t,r,i,s,o){const l=Object(a["x"])("NavMenuItem");return Object(a["q"])(),Object(a["d"])("nav",n,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(r.menu,e=>(Object(a["q"])(),Object(a["d"])(l,{title:e.name,action:e.category&&e.category.length>0?r.supers?r.supers+","+e.category:e.category:"",type:e.type,subs:e.subs},null,8,["title","action","type","subs"]))),256))])}var s={name:"NavMenuBar",props:{supers:"",menu:Array}};s.render=i;t["a"]=s},b9a5:function(e,t,r){(function(e,t){Array.prototype.copy=function(){return this.map(e=>e)},Array.prototype.duplicate=function(){var e=this.map(e=>Object.isBasicType(e)?e.valueOf():null===e||void 0===e?e:e instanceof Date?new Date(e.getTime()):"object"!==typeof e||e instanceof Promise?void 0:e.duplicate());return Object.assign([],this,e)},Array.prototype.randomize=function(){var e=this.length,t=Array.random(e),r=this;return t=t.map(e=>r[e]),t},Array.prototype.remove=function(e){var t=this.indexOf(e);return t<0||this.splice(t,1),this},Array.prototype.clear=function(e){return this.splice(0,this.length),this},Array.prototype.translate=function(e){var t=this.copy();if(isNaN(e))return t;var r=this.length;if(e>=r||e<=-r)return t;if(e>0){for(let a=0,n=e;a<r-e;a++,n++)t[a]=this[n];for(let a=r-e,n=0;a<r;a++,n++)t[a]=this[n]}else{e=-e;for(let a=0,n=e;a<r-e;a++,n++)t[n]=this[a];for(let a=r-e,n=0;a<r;a++,n++)t[n]=this[a]}return t},Array.prototype.query=function(e){var t=-1;return this.some((r,a)=>{const n=!!e(r);return n&&(t=a),n}),t},Array.prototype.pick=function(){var e=this.length,t=Math.floor(Math.random()*e);return this[t]},Array.prototype.equal=function(e){if(!(e instanceof Array))return!1;var t=this.byteLength;if(t!=e.byteLength)return!1;for(let r=0;r<t;r++)if(this[r]!==e[r])return!1;return!0},Object.defineProperty(Array.prototype,"first",{get(){return this[0]},enumerable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"last",{get(){return this[this.length-1]},enumerable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"copy",{enumerable:!1}),Object.defineProperty(Array.prototype,"duplicate",{enumerable:!1}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1}),Object.defineProperty(Array.prototype,"clear",{enumerable:!1}),Object.defineProperty(Array.prototype,"randomize",{enumerable:!1}),Object.defineProperty(Array.prototype,"translate",{enumerable:!1}),Object.defineProperty(Array.prototype,"query",{enumerable:!1}),Object.defineProperty(Array.prototype,"pick",{enumerable:!1}),Object.defineProperty(Array.prototype,"equal",{enumerable:!1}),Array.is=e=>e instanceof Array,Array.generate=(e,t=(e=>e))=>{var r=[];if(Function.is(t))for(let a=0;a<e;a++)r.push(t(a));else for(let a=0;a<e;a++)r.push(t);return r},Array.random=(e,t=(e=>e))=>{var r=[],a=[];for(let n=0;n<e;n++)r.push(n);for(let n=0;n<e;n++){let e=Math.floor(Math.random()*r.length);a.push(t(r[e])),r.splice(e,1)}return a},Uint8Array.prototype.__proto__.copy=function(){return new Uint8Array(this)},Uint8Array.prototype.__proto__.duplicate=Uint8Array.prototype.__proto__.copy,Object.defineProperty(Uint8Array.prototype.__proto__,"copy",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype.__proto__,"duplicate",{enumerable:!1}),"node"===e._env&&(Uint8Array.prototype.__proto__.toBuffer=function(){var e=t.alloc(this.length,this);return e},Uint8Array.prototype.__proto__.toBase64=function(){var e=t.alloc(this.length,this);return e.toString("base64")},Object.defineProperty(Uint8Array.prototype.__proto__,"toBuffer",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype.__proto__,"toBase64",{enumerable:!1}),Uint8Array.fromString=(e,r="utf8")=>Uint8Array.fromBuffer(t.from(e,r)),Uint8Array.fromBase64=e=>{var r=t.from(e,"base64");return Uint8Array.fromBuffer(r)},Uint8Array.fromBuffer=e=>new Uint8Array(e),Uint16Array.fromBuffer=e=>new Uint16Array(e),Uint32Array.fromBuffer=e=>new Uint32Array(e),Int8Array.fromBuffer=e=>new Int8Array(e),Int16Array.fromBuffer=e=>new Int16Array(e),Int32Array.fromBuffer=e=>new Int32Array(e),Float32Array.fromBuffer=e=>new Float32Array(e),Float64Array.fromBuffer=e=>new Float64Array(e),BigInt64Array.fromBuffer=e=>new BigInt64Array(e),BigUint64Array.fromBuffer=e=>new BigUint64Array(e)),Uint8Array.prototype.sub=function(e,r){return isNaN(e)?this.copy():(isNaN(r)&&(r=e,e=0),new Uint8Array(t.from(this).subarray(e,e+r)))},Uint8Array.prototype.concat=function(e){if(!(e instanceof Uint8Array))return this.copy();var r=t.concat([this,e]);return t.from(r)},Uint8Array.prototype.padEnd=function(e,t=0){if(e<=this.length)return this.copy();(!Number.is(t)||t<0||t>255)&&(t=0);var r=new Uint8Array(e);for(let a=0;a<this.length;a++)r[a]=this[a];for(let a=this.length;a<e;a++)r[a]=t;return r},Uint8Array.prototype.padStart=function(e,t=0){if(e<=this.length)return this.copy();(!Number.is(t)||t<0||t>255)&&(t=0);var r=new Uint8Array(e);e-=this.length;for(let a=0;a<e;a++)r[a]=t;for(let a=0;a<this.length;a++)r[a+e]=this[a];return r},Uint8Array.prototype.equal=function(e){if(!(e instanceof Uint8Array))return!1;var t=this.byteLength;if(t!=e.byteLength)return!1;for(let r=0;r<t;r++)if(this[r]!==e[r])return!1;return!0},Object.defineProperty(Uint8Array.prototype,"sub",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"concat",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"padEnd",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"padStart",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"equal",{enumerable:!1})}).call(this,r("950f"),r("4458").Buffer)},bae9:function(e,t,r){"use strict";(function(e){const r=new BroadcastChannel("change-loading-hint");e.callPageLoaded=()=>{var e=new BroadcastChannel("change-loading-hint");e.postMessage({action:"hide"})};var a=null;t["a"]={name:"Loading",data(){return{title:"载入中……",show:!0,type:"pulse",forcequit:!1}},created(){r.addEventListener("message",e=>{var t=e.data;"show"===t.action?(t.title=t.title||"载入中……",this.forcequit=!1,a&&(clearTimeout(a),a=null),a=setTimeout(()=>{this.forcequit=!0},5e3),this.show=!0):"hide"===t.action&&(t.title=t.title||"载入中……",this.forcequit=!1,a&&(clearTimeout(a),a=null),this.show=!1),String.is(t.title)&&(this.title=t.title),["spin","pulse"].indexOf(t.type)>=0&&(this.type=t.type)})},methods:{forceQuit(){a&&(clearTimeout(a),a=null),this.show=!1}}}}).call(this,r("950f"))},bfef:function(e,t,r){"use strict";var a=r("79c4");const n={class:"tail-bar"},i=Object(a["h"])("div",{class:"left"}," © 2020 - 2021 LostAbaddon, all rights reserved. ",-1),s=Object(a["h"])("div",{class:"right"},[Object(a["g"])(" Generated by "),Object(a["h"])("a",{target:"_blank",href:"https://github.com/LostAbaddon/Schwarzschild"},"Schwarzschild v0.1.0")],-1);function o(e,t,r,o,l,c){return Object(a["q"])(),Object(a["d"])("div",n,[i,s])}var l={name:"TailBar"};l.render=o;t["a"]=l},c428:function(e,t,r){"use strict";var a=r("79c4");const n={class:"hint"},i={key:0,class:"animate spin"},s=Object(a["h"])("i",{class:"fas fa-spinner fa-spin fa-fast"},null,-1),o={key:1,class:"animate pulse"},l=Object(a["f"])('<i class="fas fa-square"></i><i class="fas fa-square"></i><i class="fas fa-square"></i><i class="fas fa-square"></i><i class="fas fa-square"></i>',5),c={class:"title"};function u(e,t,r,u,h,p){return Object(a["q"])(),Object(a["d"])("div",{class:["loading",h.show?"show":"hide"]},[Object(a["h"])("div",n,["spin"===h.type?(Object(a["q"])(),Object(a["d"])("div",i,[s])):Object(a["e"])("",!0),"pulse"===h.type?(Object(a["q"])(),Object(a["d"])("div",o,[l])):Object(a["e"])("",!0),Object(a["h"])("div",c,Object(a["z"])(h.title),1)]),h.forcequit?(Object(a["q"])(),Object(a["d"])("div",{key:0,class:"forceQuit",onClick:t[1]||(t[1]=(...e)=>p.forceQuit&&p.forceQuit(...e))},"强制关闭")):Object(a["e"])("",!0)],2)}var h=r("bae9");h["a"].render=u;t["a"]=h["a"]},c531:function(e,t,r){"use strict";var a=r("79c4");const n=Object(a["h"])("header",null,null,-1),i={key:0},s=Object(a["f"])('<span>文章列表</span><div class="controller"><div class="hint"><i class="fas fa-sliders-h"></i></div><div class="styleList"><div class="styleItem" name="bars"><i class="fas fa-bars"></i></div><div class="styleItem" name="lines"><i class="fas fa-stream"></i></div><div class="styleItem" name="columns"><i class="fas fa-columns"></i></div></div></div>',2);function o(e,t,r,o,l,c){const u=Object(a["x"])("ColumnItem");return Object(a["q"])(),Object(a["d"])("section",{class:"column container",onClick:t[1]||(t[1]=(...e)=>c.onClick&&c.onClick(...e))},[n,l.showList?(Object(a["q"])(),Object(a["d"])("caption",i,[s])):Object(a["e"])("",!0),l.showList?(Object(a["q"])(!0),Object(a["d"])(a["a"],{key:1},Object(a["w"])(l.list,e=>(Object(a["q"])(),Object(a["d"])(u,{title:e.title,author:e.author,description:e.description,type:e.type,timemark:e.timemark,timestamp:e.timestamp,categoryName:e.category,categoryPath:e.sort,filename:e.filename},null,8,["title","author","description","type","timemark","timestamp","categoryName","categoryPath","filename"]))),256)):Object(a["e"])("",!0)])}const l={class:"title"},c={class:"author"},u={class:"timestamp"};function h(e,t,r,n,i,s){return Object(a["q"])(),Object(a["d"])("section",{class:"column-item",filename:r.categoryPath+"/"+r.filename,timestamp:r.timestamp,author:r.author},[Object(a["h"])("header",null,[Object(a["h"])("div",l,Object(a["z"])(r.title),1),Object(a["h"])("div",{class:"category",path:r.categoryPath},Object(a["z"])(r.categoryName),9,["path"])]),Object(a["h"])("article",null,Object(a["z"])(r.description),1),Object(a["h"])("footer",null,[Object(a["h"])("div",c,Object(a["z"])(r.author),1),Object(a["h"])("div",u,Object(a["z"])(r.timemark),1)])],8,["filename","timestamp","author"])}var p={name:"ColumnItem",props:{title:String,author:String,description:String,type:String,timemark:String,timestamp:Number,categoryName:String,categoryPath:String,filename:String}};p.render=h;var d=p;const f=_("Utils").getTimeString;var m=null;const g=new BroadcastChannel("page-changed");g.addEventListener("message",e=>{m&&m.update()});const y=new BroadcastChannel("change-loading-hint"),v=new Map,b=e=>{var t=v.get(e);if(t)return t;var r=SiteMap;return t=null,e=e.split(/[\\\/]/).filter(e=>e.length>0),e.some((a,n)=>{var i=r[a];if(!i)return!0;r=i.subs,n===e.length-1&&(t=i.name)}),t?(v.set(e,t),t):e.last};var w={name:"Column",components:{ColumnItem:d},data(){return{itemPerPage:20,list:[],showList:!0}},methods:{async getHeaderInfo(e){var t=await Granary.getColumnHeader(e),r="";t&&(r=MarkUp.parse(t,{toc:!1,glossary:!1,resources:!1,showtitle:!1,showauthor:!1,classname:"markup-content"})),this.$el.querySelector("header").innerHTML=r,t&&await this.afterMarkUp()},async getArticleList(e){var t=await Granary.getCategory(e);this.list.splice(0,this.list.length),t.forEach(e=>{e.category=b(e.sort),e.placehoding=!1,e.timestamp=new Date(e.publish).getTime(),e.timemark=f(new Date(e.publish),"YYMMDDhhmm"),e.description=e.description||"暂无",this.list.push(e)})},async update(){y.postMessage({name:"加载中……",action:"show"});var e=localStorage.getItem("columnStyle")||"lines";this.$el.setAttribute("columnStyle",e),this.list.splice(0,this.list.length),this.header="";var t=null;if("/"===this.$route.path)t="/";else{if("/category"!==this.$route.path)return void y.postMessage({action:"hide"});if(!this.$route.query||!this.$route.query.c)return void y.postMessage({action:"hide"});t="/"+this.$route.query.c.split(",").filter(e=>e.length>0).join("/")}t=t.replace(/^[\/\\]+/,"");var r=t.split("/").filter(e=>e.length>0),a=SiteMap;r.length>0?r.some(e=>{if(e=a[e],!(e.subs&&e.subs.length>0))return a=e.type,!0;a=e.subs}):a="viewer","folder"===a?(this.showList=!1,await this.getHeaderInfo(t)):"viewer"===a?(this.showList=!0,await Promise.all([this.getHeaderInfo(t),this.getArticleList(t)])):this.showList=!1,y.postMessage({action:"hide"})},onClick(e){var t=e.target;if(!t.classList.contains("hint")){if(t.classList.contains("styleItem")){let e=t.getAttribute("name");return this.$el.setAttribute("columnStyle",e),void localStorage.setItem("columnStyle",e)}if("a"!==t.nodeName.toLowerCase()||!onVueHyperLinkTriggered(this,e)){var r=void 0,a=void 0,n=void 0,i=void 0;if(t){while(!r&&!a)if(r=t.getAttribute("filename"),a=t.getAttribute("path"),n=1*t.getAttribute("timestamp"),i=t.getAttribute("author"),t=t.parentNode,!t||t===document.body)break;if(a){let e="/category?c="+a.split("/").join(",");this.$route.fullPath!==e&&this.$router.push({path:e})}else r&&this.$router.push({path:"/view",query:{f:r,t:n,a:i}})}}}}},mounted(){m=this,this.update()},unmounted(){m=null}};w.render=o;t["a"]=w},cbfc:function(e,t,r){(function(e){(()=>{const t=Symbol("HIDDEN"),r=["GOD","THEONE","TITLE","AUTHOR","EMAIL","DESCRIPTION","STYLE","SCRIPT","DATE","KEYWORD","GLOSSARY","TOC","REF","LINK","IMAGES","VIDEOS","AUDIOS","ARCHOR","SHOWTITLE","SHOWAUTHOR","RESOURCES"],a=["toc","glossary","resources","images","videos","audios"],n=["article","section","div","p","header","footer","aside","ul","ol","li","blockquote","pre","figure","figcaption"],i={"\\":"slash","/":"antislash",_:"underline","*":"star","+":"plus","-":"minus","=":"equal","`":"dash","~":"wavy","!":"bang","?":"question",":":"colon","@":"at-circle","#":"sharp","^":"angle",$:"dollar","%":"percent","(":"left-bracket",")":"right-bracket","[":"left-square-bracket","]":"right-square-bracket","{":"left-curve-bracket","}":"right-curve-bracket","|":"vertical-line"},s={};Object.keys(i).forEach(e=>s[i[e].toLowerCase()]=e),s["$"]="&#36;",r.forEach((e,t)=>r[t]=e.toLowerCase());const o={},l={},c={},u={},h=(e=8)=>{var t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random())+"";return t};o.addExtension=(e,t=0,r=5)=>{if(0===t){let t=l["_indexes_"];t||(t=[],l["_indexes_"]=t),t.includes(r)||(t.push(r),t.sort((e,t)=>e-t)),t=l[r],t||(t=[],l[r]=t),t.push(e)}else if(1===t){let t=c["_indexes_"];t||(t=[],c["_indexes_"]=t),t.includes(r)||(t.push(r),t.sort((e,t)=>e-t)),t=c[r],t||(t=[],c[r]=t),t.push(e)}else if(2===t){let t=u["_indexes_"];t||(t=[],u["_indexes_"]=t),t.includes(r)||(t.push(r),t.sort((e,t)=>e-t)),t=u[r],t||(t=[],u[r]=t),t.push(e)}};const p=e=>(e="\n"+e+"\n",e=e.replace(/\r\n/g,"\n").replace(/\n([ 　]+)/g,(e,t)=>{var r=t.replace(/　/g,"  ").length;return r<4?"\n":e}),e=e.replace(/(\n[ 　\t>\-\+\*~(\d+\.)]+)(`{3,}|~{3,}|\${2})/g,(e,t,r)=>t+"\n"+r),r.forEach(t=>{var r=new RegExp("([\\w\\W]? *)\\["+t+"\\]( *[\\w\\W]?)","gi");e=e.replace(r,(e,r,a)=>"]"===r||"["===a||"("===a?e:r+"%"+t+"%"+a)}),e),d=e=>(e=e.replace(/^\n+|\n+$/gi,""),e=e.replace(/\n{3,}/gi,"\n\n\n"),e),f=(e,t,r=-1/0,a)=>{var n=l["_indexes_"];if(!n)return"";var i=!a;return a=a||{},n.some(n=>{if(r>n)return!0;if(n>=0)return!0;var i=l[n],s=!0;while(s)s=!1,i.forEach(r=>{var n;[e,n]=r.parse(e,t,a),n&&(s=!0)})}),e=U(e),n.forEach(n=>{if(!(r>n)&&!(n<0)){var i=l[n],s=!0;while(s)s=!1,i.forEach(r=>{var n;[e,n]=r.parse(e,t,a),n&&(s=!0)})}}),i&&(e=$(e,a)),e},m=(e,t,r=0,a)=>{t.parseLevel++;var n=[],i=!1;a||(i=!0,a={});var s=[];n=e.split("\n"),n.forEach((e,t)=>{var r=e.match(/^[ 　\t]*$/);if(0!==e.length)if(e.match(/^[=\-\+\*~\._#]{3,}$/))e.match(/^\-+$|^=+$/)?s.push([t,0,2,0,0,0,0,0]):e.match(/^~+$/)?s.push([t,0,2,0,0,1,0,0]):s.push([t,0,1,0,0,0,0,0]);else if(r=e.match(/^(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),r)r[2]?s.push([t,0,0,0,0,2,0,0]):s.push([t,0,0,0,0,1,0,0]);else{if(r=e.match(/^\${2}[ 　\t]*$/),r)return r[2],void s.push([t,0,0,0,0,0,0,1]);if(r=e.match(/^([\-\+\*~]|\d+\.)[ 　\t]+/),r)return r=e.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),r?void(r[2]?s.push([t,0,0,0,1,2,0,0]):s.push([t,0,0,0,1,1,0,0])):(r=e.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(\${2})[ 　\t]*$/),r?(r[2],void s.push([t,0,0,0,1,0,0,1])):void s.push([t,0,0,0,1,0,0,0]));if(r=e.match(/^(> *)+/),r)return r=e.match(/^(> *)+[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),r?void(r[2]?s.push([t,0,0,1,0,2,0,0]):s.push([t,0,0,1,0,1,0,0])):(r=e.match(/^(> *)+[ 　\t]+(\${2})[ 　\t]*$/),r?(r[2],void s.push([t,0,0,1,0,0,0,1])):void s.push([t,0,0,1,0,0,0,0]));if(r=e.match(/^([ 　\t]+)/),r)return r=e.match(/(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),r?void(r[1]?s.push([t,0,0,1,1,2,0,0]):s.push([t,0,0,1,1,1,0,0])):(r=e.match(/(\${2})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),r?(r[1],void s.push([t,0,0,1,1,0,0,1])):void s.push([t,0,0,1,1,0,0,0]));if(r=e.match(/\|/g),r){let a=e.match(/\\\|/g);if(!a||a&&a.length!==r.length){let r=!0;a=e;while(r){r=!1;let e=a.replace(/\([^\(\)\[\]\{\}]+?\)/g,"");e=e.replace(/\[[^\(\)\[\]\{\}]+?\]/g,""),e=e.replace(/\{[^\(\)\[\]\{\}]+?\}/g,""),r=e!==a,a=e}if(a.indexOf("|")>=0)return void s.push([t,0,0,0,0,0,1,0])}}}else s.push([t,1,0,0,0,0,0,0])});var o={};s.forEach(e=>{o[e[0]]=e});var l=!0;if(l=!1,s.length>0){if(l=v(s,o,n,t,a)||l,s.length>0&&(l=b(s,o,n,t,a)||l),s.length>0&&(l=w(s,o,n,t,a)||l),i&&0===r&&t.metas.linenumber){let e=0;n.forEach((t,r)=>{if(t&&!t.match(/^%[\w\-]+%$/)){var a=o[r];if((!a||!(a[1]>0||a[2]>0))&&!t.match(/^[ 　\t>\+\-\*`\^\|_~=\{\}<]$/)&&!t.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))$/)&&!t.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\[[^\(\)\[\]\{\}]*?\])$/)){var i=t.match(/\{[<\|>]\}$/);i?(i=i[0],t=t.substr(0,t.length-i.length)+'<span name="line-'+e+'"></span>'+i):t=t+'<span name="line-'+e+'"></span>',e++,n[r]=t}}}),t.metas.totalLineCount=e}[n,o]=g(s,o,n),s.length>0&&(l=O(s,o,n,t,a)||l,[n,o]=g(s,o,n)),s.length>0&&(l=j(s,o,n,t,a)||l,[n,o]=g(s,o,n))}return l=k(s,o,n,t,a)||l,[n,o]=g(s,o,n),l=_(s,o,n,t,a)||l,n=n.map(e=>{if(null===e)return"";if(void 0===e)return"";if(0===e.length)return"";var r="";if(i){let n=e.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/);n?r=$(e,a,!1):(r=y(e,t),r=$(r,a,!1))}else{r=y(e,t);let n="param-"+h();a[n]=r,r="%"+n+"%"}return r}),t.parseLevel--,t.parseLevel>0&&(n=n.join("")),n},g=(e,t,r)=>(r=r.map((e,t)=>[t,e]),r=r.filter(e=>!(!e[1]&&""!==e[1])),r.forEach((e,r)=>{var a=e[0],n=t[a];n&&(n[0]=r)}),t={},e.forEach(e=>{t[e[0]]=e}),r=r.map(e=>e[1]),[r,t]),y=(e,t)=>{var r="<p",a="</p>",n=[],i=e.match(/^\{[<\|>]\}|\{[<\|>]\}$/);i&&(i=i[0],"{<}"===i?n.push("align-left"):"{|}"===i?n.push("align-center"):"{>}"===i&&n.push("align-right"),e=e.replace(/^\{[<\|>]\}|\{[<\|>]\}$/g,""));var s=e.match(/^(:+)/);return s&&!e.match(/^:([\w\-\.]+?):/)&&(s=s[0],n.push("indent","indent-"+s.length),e=e.replace(/^:+/,"")),n.length>0&&(r=r+' class="'+n.join(" ")+'"'),r+=">",0===e.length?"":r+e+a},v=(e,t,r,a,n)=>{var i=[];if(e.forEach(e=>{e[7]&&i.push(e)}),0===i.length)return!1;if(1===i.length)return i[0][7]=0,!1;var s=i.length,o=i[0];o[7]=2;for(let u=1;u<s;u++){let e=i[u];2===o[7]?(e[3]=o[3],e[4]=o[4],e[7]=3):3===o[7]&&(e[7]=2),o=e}2===i[i.length-1][7]&&(i[i.length-1][7]=0),i.forEach(e=>{1===e[7]&&(e[7]=0)});var l=[];i=i.filter(e=>!(e[7]<2)&&(2===e[7]&&l.push(e[0]),!0)),s=i.length;for(let u=s-1;u>0;u-=2){let e=i[u-1][0];l.includes(e)||i.splice(u-1,2)}var c=[];s=i.length;for(let u=0;u<s;u+=2)c.push([i[u][0],i[u+1][0]]);return c.forEach(n=>{var i=['<p class="latex block">$$'];for(let e=n[0]+1;e<n[1];e++)i.push(r[e]);i.push("$$</p>"),i=i.join("<br>");var s="latex-"+h();a.finals[s]=i,r[n[0]]="%"+s+"%";for(let e=n[0]+1;e<=n[1];e++)r[e]=null;for(let r=n[0];r<=n[1];r++){let a=t[r];if(!a)continue;let n=e.indexOf(a);n>=0&&e.splice(n,1),delete t[r],a[0]=-1}}),c.length>0},b=(e,t,r,a,n)=>{var i=[];if(e.forEach(e=>{e[5]&&i.push(e)}),0===i.length)return!1;if(1===i.length)return i[0][5]=0,!1;var s=i.length,o=i[0];o[5]=2;for(let u=1;u<s;u++){let e=i[u];2!==e[5]||(u===s-1&&(e[5]=0),3===o[5])?(2===o[5]?(e[3]=o[3],e[4]=o[4],e[5]=3):3===o[5]&&(e[5]=2),o=e):o[5]=0}2===i[i.length-1][5]&&(i[i.length-1][5]=0),i.forEach(e=>{1===e[5]&&(e[5]=0)});var l=[];i=i.filter(e=>!(e[5]<2)&&(2===e[5]&&l.push(e[0]),!0)),s=i.length;for(let u=s-1;u>0;u-=2){let e=i[u-1][0];l.includes(e)||i.splice(u-1,2)}var c=[];s=i.length;for(let u=0;u<s;u+=2)c.push([i[u][0],i[u+1][0]]);return c.forEach(n=>{var i=r[n[0]],s=i.match(/(`{3,}|~{3,})[ 　\t]*/)[0],o=i.indexOf(s);s=i.substr(o+s.length,i.length),s=s.replace(/^[ 　\t]+|[ 　\t]+$/g,"");var l="<pre",c="</code></pre>";0===s.length?l=l+' lang="'+s+'"><code>':l+="><code>",s=l;var u=[];for(let e=n[0]+1;e<n[1];e++)u.push(r[e]);u=u.join("\n"),u=l+u+c;var p="codeblock-"+h();a.finals[p]=u,r[n[0]]="%"+p+"%";for(let e=n[0]+1;e<=n[1];e++)r[e]=null;for(let r=n[0];r<=n[1];r++){let a=t[r];if(!a)continue;let n=e.indexOf(a);n>=0&&e.splice(n,1),delete t[r],a[0]=-1}}),c.length>0},w=(e,t,r,a,n)=>{var i=[];if(e.forEach(e=>{e[6]&&i.push(e)}),0!==i.length){var s=[],o=0,l=i[0][0];s.push([i[0]]);var c=i.length;for(let e=1;e<c;e++){let t=i[e];t[0]===l+1?s[o].push(t):(o++,s[o]=[t]),l=t[0]}return s=s.filter(e=>!(e.length<2)),s.forEach(i=>{x(i,e,t,r,a,n)}),!0}},O=(e,t,r,a,n)=>{var i=0,s=r.length;if(e.forEach((e,t)=>{if(e[3]+e[4]!==0){var r=e[0];r<s&&(s=r),r>i&&(i=r)}}),s>i)return!1;for(let p=i+1;p<r.length-1;p++){let e=t[p],r=t[p+1];if(e&&e[1]>0&&r&&r[1]>0)break;i=p}if(i===r.length-2){let e=r.length-1,a=t[e];a&&0!==a[1]||(i=e)}var o=0,l=[[[s,t[s]]]],c=!0;t[s][3];for(let p=s+1;p<=i;p++){var u=t[p];if(u)if(u[1]){if(!c)continue;let e=t[p+1];if(!e||e[1]>0){c=!1;continue}l[o].push([p,u])}else u[3]+u[4]!==0?(c||(o++,l[o]=[],t[p][3]>0,c=!0),l[o].push([p,u])):c&&l[o].push([p,u]);else c&&l[o].push([p,null])}var h=!1;return l.forEach(i=>{i.forEach(e=>{var t=e[0];e[1]||(r[t]="    "+r[t])});var s=0,o=i[0][0],l=r[o];s=-1;l.match(/^[ 　\t>]/)?s=0:l.match(/^[\-\+]|[\*~][ 　\t]/)?s=1:l.match(/^\d+\.[ 　\t]/)&&(s=2),s<0||(change=!0,0===s?L(i,e,t,r,a,n):1===s?S(!1,i,e,t,r,a,n):2===s&&S(!0,i,e,t,r,a,n))}),h},j=(e,t,r,a,n)=>{var i=[],s=[];e.forEach(e=>{if(0!==e[2]){var a=e[0],n=t[a-1];if(n)n[1]>0&&i.push([a,r[a].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let e=r[a-1];if(0===a||e.match(/^%[\w\-]+%$/))i.push([a,r[a].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let e=r[a].substr(0,1);"="===e?s.push([a-1,1]):"-"===e?s.push([a-1,2]):"~"===e||"+"===e||"_"===e?s.push([a-1,3]):"*"===e?s.push([a-1,4]):"#"===e?s.push([a-1,5]):"."===e&&s.push([a-1,6]),r[a]=null}}}});for(let o=0;o<r.length;o++){let e=r[o];if(!e)continue;let t=e.match(/^(#+)[ 　\t]*/);if(t){let a=t[0],n=t[1];a!==e&&0!==e.indexOf(a+"[")&&(s.push([o,n.length]),r[o]=e.replace(/^#+[ 　\t]*|[ 　\t]*#+$/g,""))}}return i.length+s.length!==0&&(s.sort((e,t)=>e[0]-t[0]),i.forEach(e=>{var[t,a]=e,i="headline-"+h(),s="<hr";s+="="===a?' class="heavy">':"-"===a?' class="light">':"*"===a?' class="star">':"~"===a?' class="wavy">':"."===a?' class="dotted">':"_"===a?' class="dashed">':"+"===a?' class="strong">':"#"===a?' class="heavystrong">':">",n[i]=s,r[t]="%"+i+"%"}),s.forEach(e=>{var[t,i]=e,s="header-"+h(),o="h"+(i||1),l=r[t];l=f(l,a),l=l.replace(/^[ 　\t\n]+|[ 　\t\n]+$/,""),l="<"+o+">"+l+"</"+o+">",n[s]=l,r[t]="%"+s+"%"}),!0)},k=(e,t,r,a,n)=>{var i=[],s=!0;while(s)s=!1,r.forEach(e=>{if(0===e.length)return i.push(e);e=e.replace(/(\])[ 　\t]*(\[([\w \-\.]+)\])/g,(e,t,r,n)=>{var i,s=a.refs[n];if(!s||s.indexOf("://")<0&&s.indexOf("@")<0&&!s.match(/^\.{0,2}[\\\/]/)||s.indexOf("\n")>=0){if(i=a.metas[n.toLowerCase()],!i||i.indexOf("://")<0&&i.indexOf("@")<0&&!i.match(/^\.{0,2}[\\\/]/)||i.indexOf("\n")>=0)return e;s=i}return t+"("+s+")"});var t=[],r=[],n=!0;while(n)n=!1,e=e.replace(/[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))/g,(e,a,i)=>(n=!0,i.match(/[ 　\t]+"(left|right)"\)$/)?r.push(e):t.push(e),""));e=e.replace(/^[ 　\t]+|[ 　\t]+$/g,""),r.forEach(e=>i.push(e)),e.length>0&&(t.length>0&&(s=!0),i.push(e)),t.forEach(e=>i.push(e))}),r.splice(0,r.length),i.forEach(e=>r.push(e)),i=[];return!0},_=(e,t,r,a,n)=>{var i=[],s=[],o=[],l=-1;r.forEach((e,t)=>{if(e&&0!==e.length){var r=e.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/);if(r)l=-1;else{if(r=e.match(/^[@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/),r)return o.push([t,e]),void(l=-1);r=e.match(/^!\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/);var a=r?1:0;a===l?0===a?i[i.length-1].push([t,e]):1===a&&s[s.length-1].push([t,e]):(0===a?i[i.length]=[[t,e]]:1===a&&(s[s.length]=[[t,e]]),l=a)}}else l=-1}),s=s.filter(e=>{var t=e.length>1;return 1===e.length&&o.push(e[0]),t}),i.forEach(e=>{var t=[],n=e[0][0];e.forEach(e=>{var n=e[0],i=e[1];0!==i.length&&(t.push(f(i,a)),r[n]=null)}),t=t.join("<br>"),r[n]=t}),s.forEach(e=>{var t=[],i=e[0][0];e.forEach(e=>{t.push(f(e[1],a)),r[e[0]]=null}),t=t.join(""),t='<div class="image-wall">'+t+"</div>";var s="imagewall-"+h();n[s]=t,r[i]="%"+s+"%"}),o.forEach(e=>{var[t,i]=e;i=f(i,a);var s="resource-"+h();n[s]=i,r[t]="%"+s+"%"})},x=(e,t,r,a,n,i)=>{var s=!0,o=null,l=-1;e.some((e,t)=>{var r=a[e[0]];r=r.replace(/^[ 　\t]+|[ 　\t]+$/g,"");var n=r.match(/[\|:\-]+/);if(n)return n=n[0],r===n?(o=n,l=e[0],0===t&&(s=!1),!0):void 0}),o?(o=o.replace(/^\||\|$/g,""),o=o.split("|"),o=o.map(e=>e.match(/^:\-:$/)?1:e.match(/^:\-$/)?0:e.match(/^\-:$/)?2:3)):(s=!1,o=[]);var c,u=[],p=0;e.forEach(e=>{var t=e[0];if(t!==l){var r=A(a[t]);u.push(r),r.length>p&&(p=r.length)}});for(let h=o.length;h<p;h++)o.push("");for(let h=0;h<u.length-1;h++){let e=u[h];e&&e.length;for(let t=e.length;t<p;t++)e.push("")}s&&(c=u[0],u.shift());for(let h=0;h<p;h++){if(3!==o[h])continue;let e=!0;u.some(t=>{var r=t[h];if(r)return 1*r!==r?(e=!1,!0):void 0}),o[h]=e?2:0}var d="<table>";s&&(d+="<thead><tr>",c.forEach((e,t)=>{e=f(e,n);var r='<th align="',a=o[t];r+=1===a?"center":2===a?"right":"left",r+='">'+e+"</td>",d+=r}),d+="</tr></thead>"),d+="<tbody>",u.forEach(e=>{d+="<tr>",e.forEach((e,t)=>{e=f(e,n);var r='<td align="',a=o[t];r+=1===a?"center":2===a?"right":"left",r+='">'+e+"</td>",d+=r}),d+="</tr>"}),d+="</tbody></table>";var m="table-"+h();i[m]=d,c=e[0][0],total=e.length;for(let h=0;h<total;h++){let n=e[h],i=n[0];a[i]=null,delete r[i];let s=t.indexOf(n);s>=0&&t.splice(s,1),n[0]=-1}a[c]="%"+m+"%"},A=e=>{"|"!==e.substr(0,1)&&(e="|"+e),"|"!==e.substr(e.length-1,1)&&(e+="|");var t=e.length,r=0,a=[],n=0;for(let i=1;i<t;i++){let t=e.substr(i,1);"|"!==t||0!==r?"([{<".indexOf(t)>=0?r++:">}])".indexOf(t)>=0&&r--:(a.push(e.substr(n+1,i-n-1)),n=i)}return a},L=(e,t,r,a,n,i)=>{var s="quote",o=a[e[0][0]];if(o=o.match(/^>[ 　\t]*\[([\w\W]+?)\]/),o){let e=o[1];e=e.replace(/^[ 　\t]+|[ 　\t]+$/g,""),e.length>0&&(n.metas[e]||n.blocks[e]||(s=e))}o=e.map(e=>{var t=e[0],r=a[t],n=r.match(/^[ 　\t]+/);if(n){n=n[0];let e=0,t=n.match(/ /g);t&&(e+=t.length),t=n.match(/　/g),t&&(e+=2*t.length),t=n.match(/\t/g),t&&(e+=4*t.length),t=4*(Math.floor(e/4)-1);let a="";for(let r=0;r<t-4;r++)a+=" ";r=r.replace(n,a),t>0}else n=r.match(/^>[ 　\t]*/),n&&(n=n[0],r=r.replace(n,""),!!r.match(/^>[ 　\t]*/));return r}),o[0]=o[0].replace(new RegExp("^[ 　\\t]*\\["+s.replace(/\\/g,"\\\\")+"\\][ 　\\t]*"),""),o=o.join("\n"),o=o.replace(/^\n+|\n+$/g,"");var l='<blockquote class="'+s+'">';o=m(o,n,2,i),l+=o,l+="</blockquote>";var c="blockquote-"+h();i[c]=l,e.forEach(e=>{var n=e[0];a[n]=null,delete r[n];var i=t.indexOf(e[1]);i>=0&&t.splice(i,1)}),a[e[0][0]]="%"+c+"%"},S=(e,t,r,a,n,i,s)=>{var o=[],l=-1;t.forEach(e=>{var t=e[0],r=n[t];if(head=r.match(/^([\-\+\*>~]|\d+\.)[ 　\t]+/),head)return r=r.replace(head[0],""),l++,void(o[l]=[r]);if(head=r.match(/^[ 　\t]+/),head){head=head[0];let e=0,t=head.match(/ /g);t&&(e+=t.length),t=head.match(/　/g),t&&(e+=2*t.length),t=head.match(/\t/g),t&&(e+=4*t.length),t=4*(Math.floor(e/4)-1);let a="";for(let r=0;r<t-4;r++)a+=" ";r=r.replace(head,a)}o[l].push(r)}),o=o.map(e=>(e=e.join("\n"),e=e.replace(/^\n+|\n+$/g,""),e));var c="";c=e?"<ol>":"<ul>",o.forEach(e=>{c+="<li>",c+=m(e,i,2,s),c+="</li>"}),c+=e?"</ol>":"</ul>";var u="list-"+h();s[u]=c,t.forEach(e=>{var t=e[0];n[t]=null,delete a[t];var i=r.indexOf(e[1]);i>=0&&r.splice(i,1)}),n[t[0][0]]="%"+u+"%"},E=(e,t)=>{var r=[[]],a=0,n=[0],i=[];if(e.forEach(e=>{e=e.replace(/^<h(\d+)>/i,(t,s)=>{!0,s*=1,1===s&&(a++,r[a]=[]),n[s-1]=(n[s-1]||0)+1;for(let e=s;e<n.length;e++)n[e]=0;var o="chap";for(let e=0;e<s;e++)o+="-"+(n[e]||1);return t=t+'<a name="'+o+'">',i.push([s,o,e.replace(/<[\w\W]+?>/gi,"")]),t}).replace(/<\/h(\d+)>$/i,e=>"</a>"+e).replace(/\{([\w \-\.]+)\}/g,(e,r)=>{var a=t.termList[r];return a?(Array.isArray(a)&&(a=a[0]),'<a class="terminology" name="'+r+'" href="#ref-'+r+'"><strong>'+a+"</strong></a>"):e}),r[a].push(e)}),r=r.filter(e=>e.length>0),t.chapList=i,r=r.map(e=>{var r=[],a="<section>",n="</section>";return e.forEach((t,a)=>{var n=!1;t=t.replace(/<a class="notemark" type="footnote" name="([\w \-\.]+?)">/g,(e,t)=>{n=!0,r.push(t);var a=e.substr(0,e.length-1)+' href="#footnote-'+t+'">';return a}),n&&(e[a]=t)}),e=e.join(""),0===r.length||(r=r.map((r,a)=>{var n=t.refs[r],i=t.footnotes.indexOf(r);return a++,e=e.replace(new RegExp("%%FN-"+i+"%%","g"),a),'<p class="footnote-content"><a class="index" name="footnote-'+r+'">'+a+"：</a>"+n+"</p>"}),e+='<hr class="footnote-line"><footer><p class="footnote-title">脚注：</p>',e+=r.join(""),e+='</footer><hr class="footnote-line end">'),a+e+n}),t.endnotes&&t.endnotes.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="EndNote">尾注</a></h1>',t.endnotes.forEach((r,a)=>{e+='<p class="endnote-content"><a class="index" name="endnote-'+r+'">'+(a+1)+"：</a>"+t.refs[r]+"</p>"}),e+="</section>",r.push(e)}if(t.metas.glossary&&t.termList&&t.termList.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="Glossary">术语表</a></h1>',e+=T(t),e+="</section>",r.push(e)}if(t.image=t.image||[],t.video=t.video||[],t.audio=t.audio||[],t.metas.resources&&t.image.length+t.video.length+t.audio.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="ResourceList">资源表</a></h1>',t.image.length>0&&(e+='<h2><a name="ImageResourceList">图片</a></h2>',e+=q(t,"image")),t.video.length>0&&(e+='<h2><a name="VideoResourceList">视频</a></h2>',e+=q(t,"video")),t.audio.length>0&&(e+='<h2><a name="AudioResourceList">音频</a></h2>',e+=q(t,"audio")),e+="</section>",r.push(e)}if(t.metas.showtitle){let e='<header class="article-title">';if(e+="<p>"+t.metas.title+"</p>",t.metas.showauthor&&(t.metas.author&&(e+='<p class="author">',t.metas.email&&(e+='<a href="mailto:'+t.metas.email+'">'),e+=t.metas.author,t.metas.email&&(e+="</a>"),e+="</p>"),t.metas.date)){e+='<p class="author date">';let r=1*t.metas.date;if(isNaN(r))r=t.metas.date;else{r=new Date(r);let e=r.getYear()+1900,t=r.getMonth()+1;t<10&&(t="0"+t);let a=r.getDate();a<10&&(a="0"+a);let n=r.getHours();n<10&&(n="0"+n);let i=r.getMinutes();i<10&&(i="0"+i);let s=r.getSeconds();s<10&&(s="0"+s),r=e+"/"+t+"/"+a+" "+n+":"+i+":"+s}e+=r,e+="</p>"}e+="</header>",r.unshift(e)}return r},C=(e,t)=>{var r=!0,a=0;while(r)if(r=!1,e=e.map(e=>(e=e.replace(/\[([\w \-\.]+?)\]/g,(a,n,i)=>{var s=e.lastIndexOf("<sup>",i),o=e.lastIndexOf("</sup>",i);if(s>o)return a;var l=t.blocks[n];return l?(r=!0,l):a}),e)),a++,10===a)break;return e},M=(e,t)=>{var r=(t.metas.LANG||"zh").toLowerCase();if(e=e.map(e=>(e=e.replace(/%glossary%/gi,e=>T(t)),e=e.replace(/%resources%/gi,e=>q(t,"image")+q(t,"video")+q(t,"audio")),e=e.replace(/%images%/gi,e=>q(t,"image")),e=e.replace(/%videos%/gi,e=>q(t,"video")),e=e.replace(/%audios%/gi,e=>q(t,"audio")),e=e.replace(/%toc%(\{[\w\W]+?\})*/gi,e=>{var r=e.match(/\{[\w\W]+?\}/g),a="目录",n=3;return r&&r.forEach(e=>{e=e.substr(1,e.length-2);var t=1*e;isNaN(t)?a=e:n=t}),t.toced=!0,P(t,a,n)}),Object.keys(t.metas).forEach(n=>{var i=n.toLowerCase();a.includes(n)||(i=t.metas[n],!0===i||!1===i?i="zh"===r?i?"是":"否":i?"On":"Off":Array.isArray(i)&&(i="zh"===r?i.join("、"):i.join(", ")),e=e.replace(new RegExp("%"+n+"%","gi"),e=>i))}),e=e.replace(/%([\w \-\.]+)%/g,(e,r)=>{var a=t.finals[r];return a||e}),e)),t.metas.toc&&!t.toced){let r=P(t,"目录",3);r.indexOf('<p class="content-')>=0&&(r="<section>"+r+"</section>",t.metas.showtitle?e.splice(1,0,r):e.unshift(r))}return e},P=(e,t,r)=>{var a='<h1 name="ContentTable">'+t+'</h1><aside class="content-table">';return e.chapList.forEach(e=>{if(!(e[0]>r)){var t='<p class="content-item level-'+e[0]+'">';for(let r=0;r<e[0];r++)t+='<span class="content-indent"></span>';t+='<a class="content-link" href="#'+e[1]+'">'+e[2]+"</a>",t+="</p>",a+=t}}),e.endnotes&&e.endnotes.length>0&&(a+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#EndNote">尾注</a></p>'),e.metas.glossary&&e.termList&&e.termList.length>0&&(a+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#Glossary">术语表</a></p>'),e.metas.resources&&e.image.length+e.video.length+e.audio.length>0&&(a+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#ResourceList">资源表</a></p>',e.image.length>0&&(a+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#ImageResourceList">图片</a></p>'),e.video.length>0&&(a+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#VideoResourceList">视频</a></p>'),e.audio.length>0&&(a+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#AudioResourceList">音频</a></p>')),a+="</aside>",a},T=e=>{var t="";return 0===e.termList?"":(e.termList.forEach(r=>{var[a,n]=r,i=e.terms[a],s='<p class="glossary-item">';s+='<a class="glossary-indent" name="ref-'+a+'">'+n+"</a>",s+=i,s+="</p>",t+=s}),t)},q=(e,t)=>{var r=e[t];if(!r||!Array.isArray(r)||0===r.length)return"";var a=[],n="<ul>";return r.forEach(e=>{var t=e[1];a.includes(t)||(a.push(t),n+='<li><a href="'+t+'" target="_blank">'+t+"</a></li>")}),n+="</ul>",n},U=e=>(e=e.replace(/(\\+)(.)/g,(e,t,r)=>{var a=Math.floor(t.length/2),n=2*a!==t.length,s="",o="%"+i["\\"]+"%";for(let i=0;i<a;i++)s+=o;if(n){let e=i[r];e?s=s+"%"+e+"%":s+=r}else s+=r;return s}),e),$=(e,r,a=!0)=>{var n=!0;while(n)n=!1,e=e.replace(/\%([\w \-]+?)\%/g,(e,t)=>{var a=r[t];return a?(n=!0,a):e});if(!a)return e;n=!0;while(n)n=!1,e=e.replace(/\%([\w \-]+?)\%/g,(e,a)=>{var i=r[t][a.toLowerCase()];return i?(n=!0,i):e});return e=e.replace(/\n+/g,"<br>"),e=e.replace(/\/{2}/g,(t,r)=>{if(0===r)return"<br>";var a=e.substr(r-1,1);return":"===a?t:"<br>"}),e=e.replace(/^(<\/?br>)+|(<\/?br>)+$/gi,"<br>"),e},I=e=>{if(!e)return[];e=e.split(/[ ,，；;、　]+/).filter(e=>e.length>0);var t=[];return e.forEach(e=>{t.includes(e)||t.push(e)}),t},B=(e,t)=>{var a={},n=!0;while(n)n=!1,t=t.replace(/\n([A-Z\u0800-\uffff]+?) *[:：] *([\w\W]*?)\n/,(e,t,i)=>0===i.length?e:(t="标题"===t?"title":"作者"===t?"author":"简介"===t?"description":"关键词"===t?"keyword":"更新"===t?"date":t.toLowerCase(),r.includes(t)?(n=!0,a[t]=i,"\n"):e));if(a.showtitle&&["on","yes","true"].includes(a.showtitle.toLowerCase())?a.showtitle=!0:a.showtitle=!1,a.glossary&&["on","yes","true"].includes(a.glossary.toLowerCase())?a.glossary=!0:a.glossary=!1,a.links&&["on","yes","true"].includes(a.links.toLowerCase())?a.links=!0:a.links=!1,a.refs&&["on","yes","true"].includes(a.refs.toLowerCase())?a.refs=!0:a.refs=!1,a.terms&&["on","yes","true"].includes(a.terms.toLowerCase())?a.terms=!0:a.terms=!1,a.resources&&["on","yes","true"].includes(a.resources.toLowerCase())?a.resources=!0:a.resources=!1,a.toc&&["on","yes","true"].includes(a.toc.toLowerCase())?a.toc=!0:a.toc=!1,e.metas=a,e.metas.keyword=I(e.metas.keyword),e.metas.date)try{e.metas.date=new Date(e.metas.date).getTime()}catch{delete e.metas.date}e.metas.god=e.metas.theone='<a href="mailto:lostabaddon@gmail.com">LostAbaddon</a>',e.metas.script?e.metas.script=e.metas.script.split(/[,; 　\t]+/):e.metas.script=[],e.metas.style?e.metas.style=e.metas.style.split(/[,; 　\t]+/).map(e=>e.replace(/\{[\w\W]*\}/,"")):e.metas.style=[],e.termList=e.termList||[],e.mainParser=!1,e.refs={},n=!0;while(n)n=!1,t=t.replace(/\n\[([\w \-\.\+\=\\\/]+?)\] *[:：] *([\w\W]+?)\n([\n\[])/,(t,r,a,i,s)=>(r=r.trim(),a=a.trim(),0===r.length||0===a.length?t:(e.refs[r]=a,n=!0,"\n"+i)));e.blocks={},n=!0;while(n)n=!1,t=t.replace(/\[:([\w \-\.\+\=\\\/]+?):\]([\w\W]*?)\n*\[:\1:\]/g,(t,r,a)=>{if(r=r.trim(),0!==r.length&&0!==a.length)return e.blocks[r]=a,n=!0,""});return Object.keys(e.refs).forEach(t=>{var r=e.refs[t];r=f(r,e),r=r.replace(/\%([\w \-]+?)\%/g,(e,t)=>{var r=s[t.toLowerCase()];return r||e});f(r,e);e.refs[t]=r}),Object.keys(e.blocks).forEach(t=>{var r,a=e.blocks[t],n=a.match(/^\n+/);a=a.trim(),e.parseLevel=0,r=n?m(a,e,1):[f(a,e)],e.blocks[t]=r.join("")}),e.anchors=[],e.terms={},e.notes={},t.replace(/\] *(\[[\^:]([\w ]+?)\]|\{([\w ]+?)\})/g,(t,r,a,n)=>{var i=a||n;e.refs[i]?"{"===r.substr(0,1)?e.terms[i]=e.refs[i]:e.notes[i]=e.refs[i]:"{"!==r.substr(0,1)||e.anchors.includes(i)||e.anchors.push(i)}),t=d(t),t};o.fullParse=(e,t)=>{var r={finals:{},toced:!1};e=p(e),e=B(r,e),t&&Object.keys(t).forEach(e=>{let a=t[e];e=e.toLowerCase(),["title","author","email","date"].indexOf(e)>=0||void 0!==a&&null!==a&&(r.metas[e]=a)}),r.parseLevel=0,r.mainParser=!0,r.metas.title=r.metas.title||"无名文",t.overwrite?(r.metas.title=t.title?t.title:r.metas.title,r.metas.author=t.author?t.author:r.metas.author,r.metas.email=t.email?t.email:r.metas.email,r.metas.date=t.date?t.date:r.metas.date):(r.metas.title=r.metas.title?r.metas.title:t.title,r.metas.author=r.metas.author?r.metas.author:t.author,r.metas.email=r.metas.email?r.metas.email:t.email,r.metas.date=r.metas.date?r.metas.date:t.date),e=m(e,r),e=e.map(e=>e.replace(/\%([\w \-]+?)\%/g,(e,t)=>{var r=s[t.toLowerCase()];return r||e})),e=C(e,r),e=E(e,r),e=M(e,r),e=r.metas.classname?'<article class="'+r.metas.classname+'">'+e.join("")+"</article>":"<article>"+e.join("")+"</article>",r.metas.fullexport&&(r.metas.style.forEach(t=>{e+='<link type="text/css" rel="stylesheet" href="'+t+'">'}),r.metas.script.forEach(t=>{e+='<script type="text/javascript" src="'+t+'"><\/script>'}));var a=u["_indexes_"]||[];a.forEach(t=>{var r=u[t];r&&r.forEach(t=>{e=t.parse(e)})});var n={};return n.content=e,n.title=r.metas.title,n.lineCount=r.metas.totalLineCount,n.meta={},n.meta.author=r.metas.author,n.meta.email=r.metas.email,n.meta.description=r.metas.description,n.meta.update=r.metas.date,n.meta.keywords=r.metas.keyword.map(e=>e),n.terminology={},r.termList.forEach(e=>{n.terminology[e[0]]=e[1]}),n.notes={},Object.keys(r.refs).forEach(e=>{n.notes[e]=r.refs[e]}),n.blocks={},Object.keys(r.refs).forEach(e=>{n.blocks[e]=r.blocks[e]}),n},o.parse=(e,t)=>{var r;return r=o.fullParse(e+"\n",t),r?r.content:""};const N=(e,t)=>{t.__level++;var r=[],a="";return e.childNodes.forEach(e=>{var i,s=e.tagName;if(!s){if("#comment"===e.nodeName)return;let t=e.textContent||"";return t=t.trim(),void(t.length>0&&(a+=t))}if(s=s.trim().toLowerCase(),n.includes(s)){if(!1,a.length>0&&(r.push(t.__prefix+a),a=""),"blockquote"===s){let r=t.__prefix;t.__prefix=t.__prefix+">\t",i=N(e,t),i=i.flat(1/0),i.push("\n"),t.__prefix=r}else if("ol"===s){let r=t.__prefix;t.__prefix.indexOf("-\t")>=0||t.__prefix.indexOf("1.\t")>=0?t.__prefix="\t"+t.__prefix:t.__prefix=t.__prefix+"1.\t",i=N(e,t),i=i.flat(1/0),i.push(""),t.__prefix=r}else if("ul"===s){let r=t.__prefix;t.__prefix.indexOf("-\t")>=0||t.__prefix.indexOf("1.\t")>=0?t.__prefix="\t"+t.__prefix:t.__prefix=t.__prefix+"-\t",i=N(e,t),i=i.flat(1/0),i.push(""),t.__prefix=r}else i=N(e,t),i=i.flat(1/0),i.push("");i&&i.length>0&&r.push(...i)}else{let[n,i]=H(e,s,t);i?n.length>0&&(a+=n.join("")):(a.length>0&&(r.push(t.__prefix+a),a=""),n.forEach(e=>{r.push(t.__prefix+e)}))}}),a.length>0&&r.push(t.__prefix+a),t.__level--,r},D=(e,t)=>{var r="";return e.childNodes.forEach(e=>{var a=e.tagName;if(!a){if("#comment"===e.nodeName)return;let t=e.textContent||"";return t=t.trim(),void(t.length>0&&(r+=t))}if(a=a.trim().toLowerCase(),"a"!==a)if("span"!==a&&"font"!==a)if("strong"!==a&&"b"!==a)if("em"!==a&&"i"!==a)if("sup"!==a)if("sub"!==a)if("del"!==a)r+=e.innerText;else{let a=D(e,t);r+=a}else{let a=D(e,t);r+=a}else{let a=D(e,t);r+=a}else{let a=D(e,t);r+=a}else{let a=D(e,t);r+=a}else{let a=D(e,t);r+=a}else{let a=e.href;0===a.indexOf("javascript:")&&(a="");let n=D(e,t);a&&"#"!==a.substr(0,1)?(a.match(/^(ftp|https?):\/\//i)||(a=t.host+a),n="["+n+"]("+a+")",r+=n):r+=n}}),r},H=(e,t,r)=>{if("script"===t)return[[""],!0];if("style"===t)return[[""],!0];if("link"===t)return[[""],!0];if("hr"===t)return[["\n---\n"],!1];if("br"===t)return[["\n"],!0];if(t.match(/^h\d+$/)){let a=t.substring(1,t.length);a*=1;let n="\n";for(let e=0;e<a;e++)n+="#";let i=D(e,r);return i=n+i+"\n",[[i],!1]}if("a"===t){let t=e.href;0===t.indexOf("javascript:")&&(t="");let a=D(e,r);return t&&"#"!==t.substr(0,1)?(t.match(/^(ftp|https?):\/\//i)||(t=r.host+t),a="["+a+"]("+t+")",[[a],!0]):[[a],!0]}if("img"===t){if(0===e.src.length)return[[""],!0];let t="\n![]("+e.src+")\n";return[[t],!1]}if("video"===t){if(0===e.src.length)return[[""],!0];let t="\n@[]("+e.src+")\n";return[[t],!0]}if("audio"===t){if(0===e.src.length)return[[""],!0];let t="\n#[]("+e.src+")\n";return[[t],!0]}if("span"===t||"font"===t){let t=D(e,r);return[[t],!0]}if("strong"===t||"b"===t){let t=D(e,r);return[["**"+t+"**"],!0]}if("em"===t||"i"===t){let t=D(e,r);return[["*"+t+"*"],!0]}if("u"===t){let t=D(e,r);return[["__"+t+"__"],!0]}if("sup"===t){let t=D(e,r);return[["^"+t+"^"],!0]}if("sub"===t){let t=D(e,r);return[["_"+t+"_"],!0]}if("del"===t){let t=D(e,r);return[["~~"+t+"~~"],!0]}var a=D(e,r);return[[a],!1]};o.reverse=(e,t,r=!0)=>{if(!e)return"";t=t||{},t.__level=0,t.__prefix="",t.host=t.host||"";var a=N(e,t);return a=a.flat(1/0),a=a.join("\n"),a=a.replace(/\n{2,}/g,"\n\n"),a},o.parseLine=f,o.parseSection=m,o.generateRandomKey=h,o.SymHidden=t,o.PreserveWords=i;try{window.MarkUp=o}catch{try{e.MarkUp=o}catch(W){console.error(W)}}})()}).call(this,r("950f"))},d61b:function(e,t,r){"use strict";var a=r("79c4");const n={class:"nav-menu-item"},i={key:0,class:"fas fa-caret-down"},s={key:0,class:"hint fas fa-caret-right"};function o(e,t,r,o,l,c){const u=Object(a["x"])("NavMenuBar");return Object(a["q"])(),Object(a["d"])("div",n,[Object(a["h"])("a",{onClick:t[1]||(t[1]=e=>c.click(r.type,r.action))},[Object(a["g"])(Object(a["z"])(r.title),1),r.subs?(Object(a["q"])(),Object(a["d"])("i",i)):Object(a["e"])("",!0)]),r.subs?(Object(a["q"])(),Object(a["d"])("i",s)):Object(a["e"])("",!0),r.subs?(Object(a["q"])(),Object(a["d"])(u,{key:1,menu:r.subs,supers:r.action},null,8,["menu","supers"])):Object(a["e"])("",!0)])}const l=new BroadcastChannel("page-changed");var c={name:"NavMenuItem",props:{title:String,type:String,action:String,subs:Array},methods:{click(e,t){if(t=t.split(",").filter(e=>e.length>0),0!==t.length){var r={};if("page"===e)r.path="/"+t.join("/");else{if("viewer"!==e&&"folder"!==e)return"action"===e?void("color"===t[0]&&changeThemeColor(t[1])):void 0;r.path="/category",r.query={c:t.join(",")}}var a=!0,n=!1;if(this.$route.path===r.path){n=!0;let e=this.$route.query&&this.$route.query.c||"",t=r.query&&r.query.c||"";e===t&&(a=!1)}a&&(this.$router.push(r),n&&l.postMessage(r))}}}};c.render=o;t["a"]=c},dc94:function(e,t){(()=>{const e=Symbol("update"),t=100,r=e=>!isNaN(e)&&"number"===typeof e;class a{constructor(e=100){this.cache=new Map,this.secondary=new Map,this.limit=r(e)?e:t,this.length=0}set(t,r){const a=this.cache.has(t);a?this.cache.set(t,r):this[e](t,r)}get(t){var r=this.cache.get(t);return void 0!==r||(r=this.secondary.get(t),void 0!==r&&this[e](t,r)),r}del(e){const t=this.cache.has(e);t&&this.length--,this.cache.delete(e),this.secondary.delete(e)}has(e){return this.cache.has(e)||this.secondary.has(e)}clear(){this.cache.clear(),this.secondary.clear(),this.length=0}[e](e,t){this.length++,this.length>=this.limit&&(this.secondary=this.cache,this.cache=new Map,this.length=0),this.cache.set(e,t)}}window.LRUCache=a})()},ea3a:function(e,t,r){(function(e,t){e.setTimeout&&(e.setImmediate=e.setImmediate||function(e){setTimeout(e,0)},e.nextTick=t&&t.nextTick||e.setImmediate,e.wait=promisify((e,t)=>{var r=(new Date).getTime();Function.is(e)&&(t=e,e=0),setTimeout(()=>t((new Date).getTime()-r),e)}),e.waitLoop=promisify(e=>{var t=(new Date).getTime();setImmediate(()=>e((new Date).getTime()-t))}),e.waitTick=promisify(e=>{var t=(new Date).getTime();nextTick(()=>e((new Date).getTime()-t))}),e.queueMicrotask&&(e.waitQueue=promisify(e=>{var t=(new Date).getTime();queueMicrotask(()=>e((new Date).getTime()-t))}))),"node"===e._env?e.now=()=>{var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:e.now=()=>Date.now(),e.Clock=class{constructor(r="Initialized",a=!1){this.stamps=[],this.isNode=!!e.process,this.isNode&&!a?this.clock=()=>{var e=t.hrtime();return e[0]+e[1]/1e9}:this.clock=()=>(new Date).getTime()/1e3,this.stamp(r)}stamp(e=""){var t=this.clock();return this.stamps.push([t,e]),t}list(e=!0){var t,r=this.stamps[0][0],a=(this.stamps.length,0);return t=this.stamps.map(e=>{var t=[e[0]-r,e[1]];r=e[0];var n=e[1].length;return n>a&&(a=n),t}),e?(t=t.map(e=>{var t=e[1],r=e[0];return t=t.padStart(a," "),t+"\t"+r}),t.join("\n")):t}getStamp(e){if(!e)return-1;var t=-1;return this.stamps.some(r=>r[1]===e&&(t=r[0],!0)),t}spent(e,t){return t?(e=this.getStamp(e),e<0&&(e=this.stamps[0][0]),t=this.getStamp(t),t<0&&(t=this.stamps[this.stamps.length-1][0])):(t=this.getStamp(e),t<0&&(t=this.stamps[this.stamps.length-1][0]),e=this.stamps[0][0]),t-e}}}).call(this,r("950f"),r("3cbd"))},ef5b:function(e,t){const r=MarkUp.generateRandomKey;MarkUp.addExtension({name:"LaTeX",parse:(e,t,a)=>{a[MarkUp.SymHidden]=a[MarkUp.SymHidden]||{};var n=!1;return e=e.replace(/(\\+)\$/g,(e,t)=>{var r=Math.floor(t.length/2),a="",i="%"+MarkUp.PreserveWords["\\"]+"%";for(let n=0;n<r;n++)a+=i;if(2*r!==t.length){let e=MarkUp.PreserveWords["$"];a+="%"+e+"%"}else a+="$";return n=!0,a}),e=e.replace(/\$([\w\W]+?)\$/g,(e,t)=>{if(e.indexOf("$$")>=0)return e;var i="latex-"+r();return a[MarkUp.SymHidden][i]='<span class="latex inline">$'+t+"$</span>",n=!0,"%"+i+"%"}),[e,n]}},0,-1),MarkUp.addExtension({name:"FontAwesome",parse:(e,t,r)=>{var a=!1;return e=e.replace(/:([\w\-\.]+?):/g,(e,t,r)=>(t=t.trim(),a=!0,'<i class="fas far fa-'+t+'"></i>')),[e,a]}},0,3),MarkUp.addExtension({name:"HyperLinks",parse:(e,t,a)=>{t.links=t.links||[];var n=!1;return e=e.replace(/([!@#]?)\[([\w %'"\*_\^\|~\-\.\+=·,;:\?!\\\/&\u0800-\uffff]*?)\] *\((\@?[\w\W]*?)\)/g,(e,i,s,o,l)=>{if(o=o.trim(),0===o.length)return e;if(a[s])return e;if(""===i){t.links.push([s,o]);let e=o.substr(0,1),i="@"===e,l=MarkUp.parseLine(s,t,3,a),c="link-"+r(),u='<a href="';return u=i?u+"#"+o.substr(1,o.length)+'">':o.indexOf("@")>1?u+"mailto:"+o+'">':"."===e||"\\"===e||"/"===e||"#"===e?u+o+'">':u+o+'" target="_blank">',u=u+l+"</a>",a[c]=u,n=!0,"%"+c+"%"}return e}),[e,n]}},0,3),MarkUp.addExtension({name:"AnchorAndTerm",parse:(e,t,a)=>{var n=!1;return e=e.replace(/\[([\w %'"\-\.\+=,;:\?!\\\/&\u0800-\uffff]*?)\] *\{([\w \-\.]+?)\}/g,(e,i,s,o)=>{if(s=s.trim(),i=i.trim(),0===s.length)return e;if(0===i.length)return e;if(a[i])return e;var l;MarkUp.parseLine(i,t,3,a);if(t.refs[s]){l="term-"+r(),t.termList=t.termList||[],t.termList.push([s,i]),t.termList[s]=i;let e='<a class="terminology" name="'+s+'" href="#ref-'+s+'"><strong>'+i+"</strong></a>";a[l]=e}else{l="anchor-"+r();let e='<a name="'+s+'">'+i+"</a>";a[l]=e}return n=!0,"%"+l+"%"}),[e,n]}},0,3),MarkUp.addExtension({name:"Code",parse:(e,t,a)=>{a[MarkUp.SymHidden]=a[MarkUp.SymHidden]||{};var n=!1;return e=e.replace(/`([\w\W]+?)`/g,(e,t)=>{if(e.indexOf("``")>=0)return e;var i="code-"+r();return a[MarkUp.SymHidden][i]="<code>"+t+"</code>",n=!0,"%"+i+"%"}),[e,n]}}),MarkUp.addExtension({name:"BoldAndItalic",parse:(e,t,a)=>{var n=[];if(e.replace(/\*+/g,(e,t)=>{n.push([t,e.length])}),n.length<2)return[e,!1];var i=(n,i,s)=>{var o,l=e.substring(n,i+(s?2:1));o=s?l.substring(2,l.length-2):l.substring(1,l.length-1);var c=(s?"strong":"em")+"-"+r();o=MarkUp.parseLine(o,t,5,a),a[c]=s?"<strong>"+o+"</strong>":"<em>"+o+"</em>",c="%"+c+"%",e=e.replace(l,c)},s=n[0][1],o=n[1][1];if(s<3){if(s===o)return i(n[0][0],n[1][0],2===s),[e,!0];if(o<3){let t=n[2];return t?(t=t[1],t<3?o===t?(i(n[1][0],n[2][0],2===o),[e,!0]):s===t?(i(n[0][0],n[2][0],2===s),[e,!0]):[e,!1]:(i(n[1][0],n[2][0],2===o),[e,!0])):s>o?(i(n[0][0]+1,n[1][0],!1),[e,!0]):(i(n[0][0],n[1][0],!1),[e,!0])}return i(n[0][0],n[1][0],2===s),[e,!0]}return o<3?1===o?(i(n[0][0]+s-1,n[1][0],!1),[e,!0]):(i(n[0][0]+s-2,n[1][0],!0),[e,!0]):(i(n[0][0],n[1][0]+o-2,!0),[e,!0])}}),MarkUp.addExtension({name:"SubAndUnderline",parse:(e,t,a)=>{var n=[];if(e.replace(/_+/g,(e,t)=>{n.push([t,e.length])}),n.length<2)return[e,!1];var i=(n,i,s)=>{var o,l=e.substring(n,i+(s?2:1));o=s?l.substring(2,l.length-2):l.substring(1,l.length-1);var c=(s?"underline":"sub")+"-"+r();o=MarkUp.parseLine(o,t,5,a),a[c]=s?"<u>"+o+"</u>":"<sub>"+o+"</sub>",c="%"+c+"%",e=e.replace(l,c)},s=n[0][1],o=n[1][1];if(s<3){if(s===o)return i(n[0][0],n[1][0],2===s),[e,!0];if(o<3){let t=n[2];return t?(t=t[1],t<3?o===t?(i(n[1][0],n[2][0],2===o),[e,!0]):s===t?(i(n[0][0],n[2][0],2===s),[e,!0]):[e,!1]:(i(n[1][0],n[2][0],2===o),[e,!0])):s>o?(i(n[0][0]+1,n[1][0],!1),[e,!0]):(i(n[0][0],n[1][0],!1),[e,!0])}return i(n[0][0],n[1][0],2===s),[e,!0]}return o<3?1===o?(i(n[0][0]+s-1,n[1][0],!1),[e,!0]):(i(n[0][0]+s-2,n[1][0],!0),[e,!0]):(i(n[0][0],n[1][0]+o-2,!0),[e,!0])}}),MarkUp.addExtension({name:"WavyAndDelete",parse:(e,t,a)=>{var n=[];if(e.replace(/~+/g,(e,t)=>{n.push([t,e.length])}),n.length<2)return[e,!1];var i=(n,i,s)=>{var o,l=e.substring(n,i+(s?2:1));o=s?l.substring(2,l.length-2):l.substring(1,l.length-1);var c=(s?"delete":"wavy")+"-"+r();o=MarkUp.parseLine(o,t,5,a),a[c]=s?"<del>"+o+"</del>":'<span class="text-wavy">'+o+"</span>",c="%"+c+"%",e=e.replace(l,c)},s=n[0][1],o=n[1][1];if(s<3){if(s===o)return i(n[0][0],n[1][0],2===s),[e,!0];if(o<3){let t=n[2];return t?(t=t[1],t<3?o===t?(i(n[1][0],n[2][0],2===o),[e,!0]):s===t?(i(n[0][0],n[2][0],2===s),[e,!0]):[e,!1]:(i(n[1][0],n[2][0],2===o),[e,!0])):s>o?(i(n[0][0]+1,n[1][0],!1),[e,!0]):(i(n[0][0],n[1][0],!1),[e,!0])}return i(n[0][0],n[1][0],2===s),[e,!0]}return o<3?1===o?(i(n[0][0]+s-1,n[1][0],!1),[e,!0]):(i(n[0][0]+s-2,n[1][0],!0),[e,!0]):(i(n[0][0],n[1][0]+o-2,!0),[e,!0])}}),MarkUp.addExtension({name:"SupAndLarger",parse:(e,t,a)=>{var n=(n,i,s)=>{var o=e.substring(n,i+s),l=o.substring(s,o.length-s),c="larger-"+s+"-"+r();l=MarkUp.parseLine(l,t,5,a),a[c]=s<=1?"<sup>"+l+"</sup>":'<span class="text-larger level-'+(s-1)+'">'+l+"</span>",c="%"+c+"%",e=e.replace(o,c)},i=!1;return e.replace(/(\^+)([\w\W]+?)(\^+)/,(e,t,r,a,s)=>{var o=r.match(/(\\*)\[/);if(o){let t=o[1].length;if(t>>1<<1===t)return e}return t=t.length,a=a.length,t>a?n(s+t-a,s+e.length-a,a):n(s,s+e.length-a,t),i=!0,e}),[e,i]}}),MarkUp.addExtension({name:"Color",parse:(e,t,a)=>{var n=!1;return e=e.replace(/\[(\w+)\]([\w\W]+?)\[\/\]/,(e,i,s,o)=>{if(0===s.length)return e;s=MarkUp.parseLine(s,t,5,a);var l="color-"+r();return a[l]='<span class="color-'+i+'">'+s+"</span>",n=!0,"%"+l+"%"}),[e,n]}},0,6),MarkUp.addExtension({name:"FootnoteAndEndnote",parse:(e,t,a)=>{var n=!1;return e=e.replace(/(\[([\w %'"\-\.\+=,;:\?!\\\/&\u0800-\uffff]*?)\])?\[([\^:])([\w \-\.]+?)\]/g,(e,n,i="",s,o)=>{if(o=o.trim(),0===o.length)return e;if(!t.refs[o])return e;var l='<a class="notemark" type="';if(l+="^"===s?'endnote" href="#endnote-'+o:"footnote",l+='" name="'+o+'">',i&&(l+=MarkUp.parseLine(i,t,6,a)),l+="<sup>","^"===s){t.endnotes=t.endnotes||[];let e=t.endnotes.indexOf(o);e<0&&(e=t.endnotes.length,t.endnotes.push(o)),e++,l+="("+e+")"}else{t.footnotes=t.footnotes||[];let e=t.footnotes.indexOf(o);e<0&&(e=t.footnotes.length,t.footnotes.push(o)),l+="[%%FN-"+e+"%%]"}l+="</sup></a>";var c="notemark-"+r();return a[c]=l,"%"+c+"%"}),[e,n]}},0,6),MarkUp.addExtension({name:"Images",parse:(e,t,a)=>{var n=!1;return e=e.replace(/([!@#])\[([^\n]*?)\] *\((\@?[\w\W]*?)\)/g,(e,i,s,o,l)=>{if(o=o.trim(),0===o.length)return e;var c=o.match(/[ 　\t]+"(left|right)"/);c&&(o=o.replace(c[0],""),c=c[1]);var u="image";"@"===i?u="video":"#"===i&&(u="audio"),t[u]=t[u]||[],t[u].push([s,o]);var h='<div class="resource '+u;c&&(h+=" float-"+c),h+='">',h+="<figure>","!"===i?h+='<img src="'+o+'">':"@"===i?h+='<video src="'+o+'" controls>你的浏览器不支持 <code>video</code> 标签.</video>':"#"===i&&(h+='<audio src="'+o+'" controls>你的浏览器不支持 <code>audio</code> 标签.</audio>'),h+="</figure>",h+="<figcaption>"+s+"</figcaption>",h+="</div>";var p=u+"-"+r();return a[p]=h,n=!0,"%"+p+"%"}),[e,n]}},0,7),MarkUp.addExtension({name:"InlineLinks",parse:(e,t,a)=>{var n=!1;return t.mainParser?(e=e.replace(/https?:\/\/[\w\-\+=\.;\?\\\/%]+/gi,(e,i)=>{t.links.push([e,e]);var s='<a href="'+e+'" target="_blank">'+e+"</a>",o="link-"+r();return a[o]=s,n=!0,"%"+o+"%"}),[e,n]):[e,n]}},0,8)},fc58:function(e,t,r){(function(e){(()=>{const t=new BroadcastChannel("change-loading-hint"),r=(new BroadcastChannel("show-image"),(e,t)=>{t=t||document;var r=t.querySelectorAll(e);return[].map.call(r,e=>e)}),a=(e,t)=>{var r=document.createElement(e);return String.is(t)?r.classList.add(t):Array.is(t)&&t.forEach(e=>r.classList.add(e)),r},n=(e,t)=>{t.forEach(t=>{t!==e&&t.pause()})};e.ImageWall={whRate:3/4,async init(){const e=document.querySelector("#container > div");var i=[...r(".markup-content audio"),...r(".markup-content video")];i.forEach(e=>{e.onplay=()=>n(e,i)});var s=0,o=0;r(".markup-content .image-wall").forEach(e=>{var t=r("div.resource",e);e._total=t.length,e._index=0,e._frame=e.querySelector("div.image-container.image-ghost"),e._frame||(e._frame=a("div",["image-container","image-ghost"]),e.appendChild(e._frame)),e._float=e.querySelector("div.image-container.image-float"),e._float||(e._float=a("div",["image-container","image-float"]),e.appendChild(e._float)),e._left=e.querySelector("div.image-button-left"),e._left||(e._left=a("div","image-button-left"),e._left.innerHTML='<i class="fas fa-angle-left"></i>',e.appendChild(e._left),e._left.addEventListener("click",t=>{e._index<=0||(e._index--,e._float.style.transform="translateX(-"+100/e._total*e._index+"%)",e._index<e._total-1&&e._right.classList.remove("inactive"),e._index<=0&&e._left.classList.add("inactive"))})),e._right=e.querySelector("div.image-button-right"),e._right||(e._right=a("div","image-button-right"),e._right.innerHTML='<i class="fas fa-angle-right"></i>',e.appendChild(e._right),e._right.addEventListener("click",t=>{e._index>=e._total-1||(e._index++,e._float.style.transform="translateX(-"+100/e._total*e._index+"%)",e._index>0&&e._left.classList.remove("inactive"),e._index>=e._total-1&&e._right.classList.add("inactive"))})),e._callback=(n,i)=>{t.some(e=>!e._ready)||(e.classList.add("loaded"),e._index=0,e._float.style.transform="translateX(0%)",e._left.classList.add("inactive"),t.forEach((t,r)=>{var n=a("div","image-frame");e._frame.appendChild(n),n.appendChild(t)}),e._float.innerHTML=e._frame.innerHTML,e._float.style.width=100*e._total+"%",r("div.image-frame",e._float).forEach(t=>{t.style.width=100/e._total+"%"}))},t.forEach(t=>{e._frame.appendChild(t),t._wall=e,t.classList.add("inside")})}),await Promise.all(r("div.resource.image").map(r=>new Promise(a=>{s++;var n=r.querySelector("img"),i=r.querySelector("figure");if(!n)return o++,t.postMessage({title:"载入图片: "+o+" / "+s}),a();var l=r.classList.contains("inside");l||r.classList.add("outside"),n.onload=()=>{var l=e.getBoundingClientRect().width;ImageWall.whRate;n._available=!0,n.setAttribute("oWidth",n.naturalWidth),n.setAttribute("oHeight",n.naturalHeight),i.classList.add("loaded"),i.style.backgroundImage="url("+n.src+")",r.style.width=n.naturalWidth+"px";var c=n.naturalWidth,u=n.naturalHeight;n.naturalHeight/n.naturalWidth>ImageWall.whRate?(i.classList.add("tall"),i.style.width=100*n.naturalWidth/n.naturalHeight*ImageWall.whRate+"%",i.style.paddingTop=100*ImageWall.whRate+"%",u=n.naturalWidth*ImageWall.whRate,c=u*n.naturalWidth/n.naturalHeight):(i.classList.remove("tall"),i.style.width="100%",i.style.paddingTop=100*n.naturalHeight/n.naturalWidth+"%"),r._wall&&(r._ready=!0,r._wall._callback(c,u)),o++,t.postMessage({title:"载入图片: "+o+" / "+s}),a()},n.onerror=()=>{n._available=!1,r.classList.add("failed"),o++,t.postMessage({title:"载入图片: "+o+" / "+s}),a()}})))}}})()}).call(this,r("950f"))}});
//# sourceMappingURL=index.js.map