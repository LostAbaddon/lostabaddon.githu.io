(function(e){function t(t){for(var r,n,s=t[0],c=t[1],l=t[2],u=0,h=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&h.push(i[n][0]),i[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,n=1;n<a.length;n++){var s=a[n];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},n={index:0},i={index:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+".js"}function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-22ee1d28":1,"chunk-2ca2da94":1,"chunk-5324898a":1,"chunk-5369b2eb":1,"chunk-5ae8ae3f":1,"chunk-75ac00fa":1,"chunk-821ebf42":1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var r="css/"+({}[e]||e)+".css",i=c.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var l=o[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===i))return t()}var h=document.getElementsByTagName("style");for(s=0;s<h.length;s++){l=h[s],u=l.getAttribute("data-href");if(u===r||u===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete n[e],p.parentNode.removeChild(p),a(o)},p.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){n[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,a){r=i[e]=[t,a]}));t.push(r[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var h=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=i[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",h.name="ChunkLoadError",h.type=r,h.request=n,a[1](h)}i[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var h=0;h<l.length;h++)t(l[h]);var p=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"068a":function(e,t){const a=(e,t,a,r)=>{isNaN(r)&&(r=a);var n=e.match(t);return n=n?n.length:r,n<a&&(n=a),n},r=(e,t)=>{if(0===t)return"";var a=e.length;return a>t?e=e.substring(a-t,a):a<t&&(e=e.padStart(t,"0")),e},n=(e,t,a,r)=>{var n=[];return e.length>0&&n.push(e),t.length>0&&n.push(t),a.length>0&&n.push(a),n.join(r)},i=(e,t,a,r,n)=>{var i=[];e.length>0&&i.push(e),t.length>0&&i.push(t),a.length>0&&i.push(a);var o=i.join(n);return r.length>0&&(o+="."+r),o},o=(e,t="YYYYMMDDhhmmss",o="/",s=":",c=" ")=>{e=e||new Date;var l=a(t,/Y/g,0,0),u=a(t,/M/g,1,0),h=a(t,/D/g,1,0),p=a(t,/h/g,0,0),d=a(t,/m/g,0,0),m=a(t,/s/g,0,0),f=a(t,/x/g,0),g=r(e.getYear()+1900+"",l),y=r(e.getMonth()+1+"",u),b=r(e.getDate()+"",h),v=r(e.getHours()+"",p),w=r(e.getMinutes()+"",d),j=r(e.getSeconds()+"",m),O=r(e.getMilliseconds()+"",f),k=n(g,y,b,o),C=i(v,w,j,O,s);return 0===C.length?k:k+c+C};_("Utils").getTimeString=o},"0747":function(e,t,a){"use strict";(function(e){const a=e=>{var t={};return e.forEach(e=>{var r={name:e.name,type:e.type};e.subs&&(r.subs=a(e.subs)),t[e.category]=r}),t};e.getPathNameList=(t,a=!0)=>{if(!e.SiteMap)return null;var r=e.SiteMap,n=[],i=[];return t.some((e,t)=>{if(!r)return!0;var a=r[e];if(!a)return!0;var o={name:a.name};n.push(e),"page"===a.type?o.path="/"+n.join("/"):"viewer"!==a.type&&"view"!==a.type&&"folder"!==a.type||(o.path="/category",o.query={c:n.join(",")}),r=a.subs,i.push(o)}),a&&i.unshift({name:"首页",path:"/"}),i},t["a"]={name:"NavBar",data(){return{menu:[{name:"随笔",type:"viewer",category:"essay",subs:[{name:"头脑风暴",type:"viewer",category:"mindstorm"},{name:"书评影评",type:"viewer",category:"reviews"},{name:"闲扯",type:"viewer",category:"issue"}]},{name:"格物致知",type:"viewer",category:"science",subs:[{name:"数学",type:"viewer",category:"math",subs:[{name:"组合数学",type:"viewer",category:"combination"},{name:"数论",type:"viewer",category:"number"},{name:"几何",type:"viewer",category:"geometry"}]},{name:"物理",type:"viewer",category:"physics",subs:[{name:"广义相对论",type:"viewer",category:"gravity"},{name:"规范场论",type:"viewer",category:"gauge"},{name:"复杂网络",type:"viewer",category:"complexnetwork"},{name:"量子计算",type:"viewer",category:"quantumcompute"},{name:"虚构",type:"viewer",category:"virtual"}]},{name:"算法信息论",type:"viewer",category:"AIT"},{name:"IT相关",type:"viewer",category:"IT"}]},{name:"虚拟世界",type:"viewer",category:"novel",subs:[{name:"科幻",type:"viewer",category:"scific"},{name:"奇幻",type:"viewer",category:"magic"},{name:"推理",type:"viewer",category:"detective"}]},{name:"实用工具",type:"folder",category:"tools",subs:[{name:"解析 MarkUp",type:"page",category:"parseMarkup"},{name:"写字板（迁移中）",type:"page",category:"writer"},{name:"计算器（迁移中）",type:"page",category:"calculator"}]},{name:"休闲娱乐",type:"folder",category:"entertain",subs:[{name:"诡异哥布林与不靠谱守卫",type:"page",category:"ballcrush"},{name:"五子棋",type:"page",category:"rushgo"},{name:"三消俄罗斯方块（迁移中）",type:"page",category:"tritetris"},{name:"无尽2048（迁移中）",type:"page",category:"infinity2048"}]},{name:"资料库",type:"folder",category:"library",subs:[{name:"颜色表",type:"page",category:"",subs:[{name:"中国古代常用色",type:"page",category:"chinesecolor"},{name:"日本古代常用色",type:"page",category:"japanesecolor"}]},{name:"码库",type:"page",category:"",subs:[{name:"MarkUp 语法表",type:"page",category:"markup"},{name:"LaTeX 数学公式",type:"page",category:"latex"}]}]}],aboutMe:"aboutMe"}},computed:{aboutMenu(){var e=[{name:"配色",type:"action",category:"color",subs:[{name:"亮",type:"action",category:"light"},{name:"淡",type:"action",category:"normal"},{name:"黯",type:"action",category:"dark"}]},{name:"本站",type:"page",category:"about"}];return this.aboutMe?(e[1]={name:"关于",type:"page",category:"",subs:[e[1]]},e[1].subs.unshift({name:"本站",type:"page",category:this.aboutMe}),e[1].subs[1].name="系统"):e[1].name="关于",e}},mounted(){e.SiteMap=a(this.menu)},methods:{toggleHint(){Devices.isMobile&&document.querySelector(".masker").classList.add("show")},backHome(){location.href="/#"}}}}).call(this,a("950f"))},1214:function(e,t){const a=new BroadcastChannel("source-updated"),r={server:"",DB:null,ready:!1,API:"/api",DataGranary:"/api/granary",async init(){r.DB=new CachedDB("APIData",1),r.DB.onUpdate(()=>{r.DB.open("data","url",10),console.log("Barn::CacheStorage::APIData Updated")}),r.DB.onConnect(()=>{console.log("Barn::CacheStorage::APIData Connected")}),await r.DB.connect(),r.ready=!0;var e=[...r.waiters];r.waiters=[],e.forEach(e=>e())},waiters:[],waitForReady:()=>new Promise(e=>{if(r.ready)return e();r.waiters.push(e)}),get(e,t=!1,n=0){return new Promise(async i=>{var o=!!e.match(/(^sources|[\\\/]sources)\.json$/);r.ready||await r.waitForReady();var s=await r.DB.get("data",e);if(!(s&&(i(s.data),t&&n<=s.update))){var c;try{c=await axios.get(r.server+e)}catch(l){c=null,console.error(l)}if(c&&(c=c.data),c){await r.DB.set("data",e,{data:c,update:n||Date.now()});let t=s&&s.data.update||0,i=c.update||0;if(i>t){let r={latest:i,last:t};r.target=o?"SOURCE":e,a.postMessage(r)}}s||i(c)}})},async clearAllCache(){r.DB.clearCache("data"),await r.DB.clear("data")}};window.Granary={async getSource(e,t){var a={articles:[],comments:[]};return await Promise.all(Array.generate(t+1).map(async n=>{var i=r.API+"/"+e+"-"+n+".json",o=await r.get(i,t!==n);String.is(o)||(a.articles.push(...o.articles),a.comments.push(...o.comments))})),a.articles.sort((e,t)=>t.publish-e.publish),a.comments.sort((e,t)=>t.publish-e.publish),a},async getCategory(e){var t=await r.get(r.API+"/sources.json",!1),a=[];return t&&t.sources?(await Promise.all(t.sources.map(async t=>{var r=await Granary.getSource(t.owner,t.pages);r=r.articles.filter(t=>0===t.sort.indexOf(e)),a.push(...r)})),a.sort((e,t)=>t.publish-e.publish),a):a},async getColumnHeader(e){var t=await r.get(r.API+"/sources.json",!1);t=t||{},t.update=t.update||0;var a,n=r.DataGranary+"/";e&&(n=n+e+"/"),n+="info.md";try{a=await r.get(n,!0,t.update),a=a||""}catch{a=""}return a},async getArticle(e,t=0){if(t<=0){var a=await r.get(r.API+"/sources.json",!1);a=a||{},t=a.update||0}var n;e=r.DataGranary+"/"+e;try{n=await r.get(e,!0,t),n=n||""}catch{n="你所寻找的文件不存在！"}return n},async getContent(e,t=!0){if(t){var a=await r.get(r.API+"/sources.json",!1);a=a||{},timestamp=a.update||0}var n;try{n=await r.get(e,t,timestamp),n=n||""}catch(i){n="你所寻找的文件不存在！"}return n},async clearAllCache(){sessionStorage.clear();var e=[caches.delete("schwarzschild"),r.clearAllCache()];await Promise.all(e)}},r.init()},2231:function(e,t){Symbol.set=Symbol.setSymbols=function(e,t){String.is(e)?(t=[].map.call(arguments,e=>e),e=null):Array.is(e)&&!t&&(t=e,e=null),e=e||{};var a={},r={};return t.forEach(t=>{if(t=t.split("|"),0!==t.length){t.length<2&&(t[1]=t[0]);var n=t[1];t=t[0];var i=Symbol(t);a[i]=n,r[t]=n,Object.defineProperty(e,t,{value:i,configurable:!1,enumerable:!0})}}),e.toString=e=>a[e]||r[e]||"No Such Symbol",Object.defineProperty(e,"toString",{enumerable:!1}),e},Symbol.is=e=>Symbol.__proto__===Symbol.prototype||"symbol"===typeof e},2294:function(e,t,a){},3202:function(e,t){(async()=>{if(!navigator.serviceWorker)return;const e=new BroadcastChannel("service-messages");if(e.addEventListener("message",e=>{console.log("CacheUpdated: "+e.data.url+" ("+e.data.timestamp+")")}),window.caches){let e=await caches.keys();e.length>0&&e.forEach(async e=>{var t=await caches.open(e),a=await t.keys();console.log("资源缓存库 "+e+": "+a.length)})}try{let e=await navigator.serviceWorker.getRegistrations();console.log("Service Worker: "+e.length);for(let t of e)t.waiting&&(console.log("有等待中的新版本 Service Worker"),notify({title:"有新版网站中台等待更新",message:"新版 Service Worker 将在下次打开本页面后启用。",duration:5e3,type:"warn"}))}catch(t){console.error("获取已安装 Service 出错：",t)}try{let e=await navigator.serviceWorker.register("/priory.js");e.onupdatefound=e=>{e.target.update()},console.log("安装 Service Worker "+(e?"成功":"失败"))}catch(t){console.error("安装本地 Service 出错：",t)}})()},"346c":function(e,t,a){},"3dfd":function(e,t,a){"use strict";var r=a("79c4");const n={id:"container"},i=Object(r["h"])("div",{id:"footnoteFrame"},null,-1),o=Object(r["h"])("i",{class:"fas fa-angle-up"},null,-1);function s(e,t,a,s,c,l){const u=Object(r["x"])("NavBar"),h=Object(r["x"])("loading"),p=Object(r["x"])("Notification"),d=Object(r["x"])("ImageShowcase"),m=Object(r["x"])("router-view"),f=Object(r["x"])("TailBar");return Object(r["q"])(),Object(r["d"])(r["a"],null,[Object(r["h"])(u),Object(r["h"])(h),Object(r["h"])(p,{hAlign:"right",vAlign:"top"}),Object(r["h"])(d),Object(r["h"])("div",n,[Object(r["h"])(m)]),i,Object(r["h"])(f),Object(r["h"])("div",{class:"backer",show:c.overscroll,onClick:t[1]||(t[1]=(...e)=>l.backTop&&l.backTop(...e))},[o],8,["show"]),Object(r["h"])("div",{ref:"masker",class:"masker",onClick:t[2]||(t[2]=(...e)=>l.onClick&&l.onClick(...e))},null,512)],64)}const c=new BroadcastChannel("page-scroll");var l={name:"App",data(){return{overscroll:!1}},mounted(){app.onscroll=this.onScroll},methods:{onScroll(){app.scrollTop>=app.offsetHeight?this.overscroll||(this.overscroll=!0):this.overscroll&&(this.overscroll=!1),c.postMessage({top:app.scrollTop,total:app.scrollHeight,height:app.offsetHeight})},onClick(){this.$refs.masker.classList.remove("show")},backTop(){app.scrollBy({top:-app.scrollTop,behavior:"smooth"})}}};l.render=s;t["a"]=l},"4cf0":function(e,t,a){},5563:function(e,t){(()=>{class e{constructor(e,t){this._name=e,this._version=t,this.conn=null,this.db=null,this.cbUpdates=[],this.cbConnects=[],this.caches={}}connect(){return new Promise((e,t)=>{this.conn=indexedDB.open(this.name,this.version),this.conn.onupgradeneeded=e=>{this.db=this.conn.result,this.cbUpdates.forEach(e=>e(this))},this.conn.onsuccess=t=>{this.db=this.conn.result,this.cbConnects.forEach(e=>e(this)),e(this)},this.conn.onerror=e=>{t(e)}})}onConnect(e){this.cbConnects.push(e)}onUpdate(e){this.cbUpdates.push(e)}open(e,t="id",a=100){if(!this.db.objectStoreNames.contains(e)){let a=this.db.createObjectStore(e,{keyPath:t});a.createIndex(t,t,{unique:!0})}}cache(e,t){this.caches[e]||(this.caches[e]=new LRUCache(t))}set(e,t,a){return new Promise((r,n)=>{var i=this.db.transaction([e],"readwrite");i||n(new Error("Open IndexedDB Transaction Failed: "+e));var o=i.objectStore(e);e||n(new Error("Open IndexedDB ObjectStore Failed: "+e));var s={};s[o.keyPath]=t,s.data=a;var c=o.put(s);c.onsuccess=n=>{var i=this.caches[e];i&&i.set(t,a),r(n.result)},c.onerror=e=>{n(e)}})}get(e,t){return new Promise((a,r)=>{var n=this.db.transaction([e],"readonly");n||r(new Error("Open IndexedDB Transaction Failed: "+e));var i=n.objectStore(e);e||r(new Error("Open IndexedDB ObjectStore Failed: "+e));var o,s=i.index(i.keyPath),c=this.caches[e];if(c&&(o=c.get(t),void 0!==o))return a(o);o=s.get(t),o.onsuccess=e=>{e.target.result?a(e.target.result.data):a(void 0)},o.onerror=e=>{r(e)}})}all(e){return new Promise((t,a)=>{var r=this.db.transaction([e],"readonly");r||a(new Error("Open IndexedDB Transaction Failed: "+e));var n=r.objectStore(e);e||a(new Error("Open IndexedDB ObjectStore Failed: "+e));var i=n.index(n.keyPath),o=i.getAll();o.onsuccess=e=>{var a=e.target.result;if(!a)return t(a);var r={};a.forEach(e=>{r[e[n.keyPath]]=e.data}),t(r)},o.onerror=e=>{a(e)}})}del(e,t){return new Promise((a,r)=>{var n=this.db.transaction([e],"readwrite");n||r(new Error("Open IndexedDB Transaction Failed: "+e));var i=n.objectStore(e);e||r(new Error("Open IndexedDB ObjectStore Failed: "+e));var o=i.delete(t);o.onsuccess=r=>{var n=this.caches[e];n&&n.del(t),a(r.result)},o.onerror=e=>{r(e)}})}clear(e){return new Promise((t,a)=>{var r=this.db.transaction([e],"readwrite");r||a(new Error("Open IndexedDB Transaction Failed: "+e));var n=r.objectStore(e);e||a(new Error("Open IndexedDB ObjectStore Failed: "+e));var i=n.clear();i.onsuccess=a=>{var r=this.caches[e];r&&r.clear(),t(a.result)},i.onerror=e=>{a(e)}})}clearCache(e){var t=this.caches[e];t&&t.clear()}get name(){return this._name}get version(){return this._version}}window.CachedDB=e})()},"55a5":function(e,t,a){(function(e,t,a){try{window?(window.global=window,e._env="browser",e.require=()=>{},e.module={exports:{}}):e._env="node"}catch(r){e._env="node"}t&&t.execArgv&&!t.execArgv.includes("--expose-gc")&&(e.gc=()=>{}),e.noEventModules||e._canThread,"node"===e._env&&(e.loadjLAssModule=e=>{loadall(a,"./"+e)})}).call(this,a("950f"),a("3cbd"),"/")},"55f6":function(e,t){Boolean.is=e=>"boolean"===typeof e||e instanceof Boolean,BigInt.is=e=>"bigint"===typeof e||e instanceof BigInt,Number.is=e=>"number"===typeof e||e instanceof Number,Object.isBasicType=e=>!!String.is(e)||(!!Boolean.is(e)||(!!BigInt.is(e)||(!!Number.is(e)||!!Symbol.is(e)))),Object.prototype.copy=function(){return Object.assign({},this)},Object.prototype.duplicate=function(){var e={};for(let t in this){let a=this[t];Object.isBasicType(a)?e[t]=a.valueOf():null===a||void 0===a?e[t]=a:a instanceof Date?e[t]=new Date(a.getTime()):"object"!==typeof a||a instanceof Promise||(e[t]=a.duplicate())}return Object.assign({},this,e)},Object.prototype.extent=function(...e){var t=Object.assign({},this);e.reverse(),Object.assign(this,...e,t)},Object.defineProperty(Object.prototype,"copy",{enumerable:!1}),Object.defineProperty(Object.prototype,"duplicate",{enumerable:!1}),Object.defineProperty(Object.prototype,"extent",{enumerable:!1}),Number.prototype.duplicate=function(){return 1*this},Object.defineProperty(Number.prototype,"duplicate",{enumerable:!1}),BigInt.prototype.duplicate=function(){return 1n*this},Object.defineProperty(BigInt.prototype,"duplicate",{enumerable:!1}),Boolean.prototype.duplicate=function(){return!1!==this&&!1!==this.valueOf()},Object.defineProperty(Boolean.prototype,"duplicate",{enumerable:!1}),Proxy&&(Proxy.toObject=e=>{var t={};for(let a in e){let r=e[a];r instanceof Proxy?t[a]=Proxy.toObject(r):t[a]=r}return t})},"56d7":function(e,t,a){"use strict";a.r(t),function(e){a("55a5"),a("5abc"),a("b9a5"),a("9eab"),a("78d8"),a("746b"),a("55f6"),a("64c5"),a("2231"),a("ea3a"),a("068a"),a("94b5"),a("3202"),a("dc94"),a("5563"),a("1214"),a("cf03"),a("6ae3"),a("fc58");var t=a("79c4"),r=a("7338"),n=a.n(r),i=a("3dfd"),o=a("a18c"),s=a("c428"),c=a("75be"),l=a("9d8d"),u=a("b2e4"),h=a("d61b"),p=a("bfef"),d=a("aab0"),m=a("8397"),f=a("c531");a("346c"),a("aa46"),a("5aea"),a("2294"),a("9a67"),a("4cf0"),a("6851"),a("899d"),a("6f45"),a("8f09"),e.axios=n.a,Devices.isMobile?document.body.classList.add("mobile"):document.body.classList.add("notmobile"),(async()=>{if(await LifeCycle.emit.loaded()){await InitAsimov();const e=Object(t["c"])(i["a"]);if(e.config.globalProperties.SiteName="过气网红回收站",e.config.globalProperties.SiteOwner="LostAbaddon",e.config.globalProperties.LikeCoin=null,e.use(c["a"]),e.component("Loading",s["a"]),e.component("NavBar",l["a"]),e.component("NavMenuBar",u["a"]),e.component("NavMenuItem",h["a"]),e.component("TailBar",p["a"]),e.component("ImageShowcase",d["a"]),e.component("Crumb",m["a"]),e.component("Column",f["a"]),await LifeCycle.emit.ready(e)){e.use(o["a"]).mount("#app"),o["a"].app=e,await LifeCycle.emit.initialized(e);let t=sessionStorage.getItem("sourceUpdated");t&&(sessionStorage.removeItem("sourceUpdated"),notify({title:"网站有新数据",message:"updateTarget 已更新\n刷新可浏览新内容",duration:3e3,type:"success"}))}}})()}.call(this,a("950f"))},"5abc":function(e,t,a){(function(e){const t=new Map;e._=(a,r)=>{if(a=a.split(/[\/\\,\.\:;]/).map(e=>e.trim()).filter(e=>e.length>0),a.length<1)return e;if(a=a.join("/"),r)return t.set(a,r),r;if(r=t.get(a),r)return r;var n=[...t.keys()];return n=n.filter(e=>0===e.indexOf(a)),r={},n.forEach(e=>{var n=t.get(e);e=e.replace(a+"/",""),e=e.split("/");var i=e.pop(),o=r;e.forEach(e=>{o[e]&&(o[e]={}),o=o[e]}),o[i]=n}),r},_("Utils",{})}).call(this,a("950f"))},"5aea":function(e,t,a){},"64c5":function(e,t,a){(function(e,t){const a=[];(()=>{for(let e=0;e<10;e++)a.push(""+e);for(let e=65;e<=90;e++)a.push(String.fromCharCode(e));for(let e=97;e<=122;e++)a.push(String.fromCharCode(e))})(),String.random=e=>{var t="";for(let r=0;r<e;r++)t+=a[Math.floor(a.length*Math.random())];return t},String.blank=(e,t=" ")=>{var a="";for(let r=0;r<e;r++)a+=t;return a},String.is=e=>e instanceof String||"string"===typeof e,String.prototype.copy=String.prototype.duplicate=function(){return String(this).toString()},Object.defineProperty(String.prototype,"copy",{enumerable:!1}),Object.defineProperty(String.prototype,"duplicate",{enumerable:!1}),"node"===e._env&&Object.defineProperty(String.prototype,"byteLength",{get(){var e=t.from(this,"utf8");return e.byteLength},enumerable:!1,configurable:!1})}).call(this,a("950f"),a("4458").Buffer)},6851:function(e,t,a){},"6ae3":function(e,t){(()=>{var e,t;const a=async a=>{var r=a.target,n=r.className,i=r.getAttribute("href");if(i&&"#"===i.substr(0,1)){i=i.substring(1,i.length);var o=t.querySelector('a[name="'+i+'"]');if(o){var s=o.parentElement.innerHTML.replace(o.outerHTML,""),c="";"terminology"===n&&(c='<p class="note-title">'+r.innerText+"</p>"),c+='<p class="note-content">'+s+"</p>",e.innerHTML=c,e._status=1;var l=r.getBoundingClientRect(),u=!0,h=!0,p=l.left-10,d=l.top+l.height+10;p>.6*window.innerWidth&&(h=!1,p=window.innerWidth-l.right),d>.7*window.innerHeight&&(u=!1,d=window.innerHeight-l.top),h?(e.style.left=p+"px",e.style.right=""):(e.style.left="",e.style.right=p+"px"),u?(e.style.top=d+"px",e.style.bottom=""):(e.style.top="",e.style.bottom=d+"px"),e.style.display="block",await wait(50),e.style.opacity="1",e._status=2}}},r=async t=>{e.style.opacity="0",await wait(200),2===e._status&&(e.style.display="none",e._status=0)},n=async a=>{var r=a.target,n=r.className;if("notemark"===n||"terminology"===n){var i=r.computedStyleMap();i=i.get("text-decoration").toString();var o=!1;if(i.indexOf("underline")>=0&&(o=!0),o){var s=r.getAttribute("href");if("#"!==s.substr(0,1))return;s=s.substring(1,s.length);var c=t.querySelector('a[name="'+s+'"]');if(!c)return;var l=c.parentElement.innerHTML.replace(c.outerHTML,""),u="";"terminology"===n&&(u='<p class="note-title">'+r.innerText+"</p>"),u+='<p class="note-content">'+l+"</p>",e.innerHTML=u,e._status=1;var h=r.getBoundingClientRect(),p=!0,d=!0,m=h.left-10,f=h.top+h.height+10;m>.6*window.innerWidth&&(d=!1,m=window.innerWidth-h.right),f>.7*window.innerHeight&&(p=!1,f=window.innerHeight-h.top),d?(e.style.left=m+"px",e.style.right=""):(e.style.left="",e.style.right=m+"px"),p?(e.style.top=f+"px",e.style.bottom=""):(e.style.top="",e.style.bottom=f+"px"),e.style.display="block",await wait(50),e.style.opacity="1",e._status=2}else e.style.opacity="0",await wait(200),2===e._status&&(e.style.display="none",e._status=0)}},i=(e,t)=>{Devices.isMobile||e.querySelectorAll(t).forEach(e=>{var t=e.getAttribute("footnote_inited");t||(e.addEventListener("mouseleave",r),e.addEventListener("mouseenter",a),e.setAttribute("footnote_inited",!0))})},o=(e,t)=>{Devices.isMobile||e.querySelectorAll(t).forEach(e=>{var t=e.getAttribute("footnote_inited");t&&(e.removeEventListener("mouseleave",r),e.removeEventListener("mouseenter",a),e.removeAttribute("footnote_inited"))})};window.InitNotes=a=>{e=document.querySelector("#footnoteFrame"),e._status=e._status||0,t!==a&&t&&destructe(),t=a;var r=a.getAttribute("footnoted");r||(a.setAttribute("footnoted",!0),a.addEventListener("transitionstart",n)),i(a,"a.notemark"),i(a,"a.terminology")},window.destructe=()=>{t.removeEventListener("transitionstart",n),o(UI,"a.notemark"),o(UI,"a.terminology")}})()},"6f45":function(e,t,a){},"746b":function(e,t){Math.pick=e=>{if(Array.is(e)){let t=Math.floor(Math.random()*e.length);return e[t]}return isNaN(e)?null:Math.random()<=e},Math.range=(e,t)=>(isNaN(t)&&(t=e,e=0),e+Math.random()*(t-e))},"75be":function(e,t,a){"use strict";var r,n=a("79c4");function i(e,t,a,r,i,o){return Object(n["q"])(),Object(n["d"])("div",{class:"notifaction-frame",horizontal:a.hAlign,vertial:a.vAlign,onClick:t[1]||(t[1]=(...e)=>o.onClick&&o.onClick(...e))},null,8,["horizontal","vertial"])}const o=new BroadcastChannel("show-notification");o.addEventListener("message",e=>{r&&r.showMessage(e.data)}),window.notify=e=>{r&&r.showMessage(e)};var s={name:"Notification",props:{hAlign:String,vAlign:String},install(e){a("7fd5"),e.component("Notification",this)},mounted(){r=this},methods:{async showMessage(e){var t=e.duration||3e3,a=Math.floor(1e10*Math.random());e.key=a,e.ele=this.newMsg(e),e.ele.exit=async()=>{e.timer&&clearTimeout(e.timer),delete e.timer,e.ele.classList.remove("show"),await wait(300),this.$el.removeChild(e.ele),delete e.ele.exit,delete e.ele},this.$el.appendChild(e.ele),await wait(),e.ele.classList.add("show"),e.timer=setTimeout(e.ele.exit,t)},newMsg(e){var t=document.createElement("section");if(t.setAttribute("key",e.key),t.setAttribute("type",e.type||"default"),e.title){let a=document.createElement("header");a.innerText=e.title,t.appendChild(a)}if(e.message){let a=document.createElement("article");a.innerText=e.message,t.appendChild(a)}return t},onClick(e){var t=e.target;t&&t.exit&&t.exit()}}};s.render=i;t["a"]=s},"78d8":function(e,t,a){(function(e){Function.is=e=>e instanceof Function,e.AsyncFunction=(async()=>{}).constructor,AsyncFunction.is=e=>e instanceof AsyncFunction;const t=e=>{if(!(e instanceof Function))return null;if(e._promised)return e;var t=(...t)=>new Promise((a,r)=>{try{e(...t,a,r)}catch(n){r(n)}});return t._promised=!0,t._original=e,t};t.withTimeout=e=>{if(!(e instanceof Function))return null;if(e._promised)return e;var t=(...t)=>{var a,r,n=null,i=-1,o=null,s=new Promise((n,i)=>{r=i;var s=(...e)=>{o&&clearTimeout(o),o=null,n(...e)};try{a=(new Date).getTime(),e(...t,s,r)}catch(c){r(c)}});return s.timeout=(...e)=>{if(e[0]instanceof Number&&(e[0]=1*e[0]),isNaN(e[0]))e[0]instanceof Function&&(n=e[0]);else if(e[1]instanceof Function&&(n=e[1]),i=e[0]>=0?e[0]:-1,i<0&&o)clearTimeout(o),o=null;else if(i>=0){o&&clearTimeout(o);let e=(new Date).getTime();o=setTimeout(()=>{n&&n(),r(new Error("Timeout!"))},i-(e-a))}return s},s};return t._promised=!0,t._original=e,t};const a=(e,...a)=>{var r,n,i;return a[0]instanceof Array?(r=a[0],n=a[1],i=a[2],i||(i=n,n=null)):(i=a.pop(),n=a[a.length-1]instanceof Function?null:a.pop(),r=a),r=e?r.map(e=>t(e)):r.map(e=>e._original||e),[r,n,i]};t.s=t.serial=t(async(...e)=>{var[t,r,n]=a(!0,...e);for(let a of t){let e;e=null===r||void 0===r?await a():await a(r),void 0!==e&&(r=e)}n(r)}),t.p=t.parallel=t(async(...e)=>{var[t,r,n]=a(!0,...e),i=t.length,o=[];t.forEach(async(e,t)=>{var a;a=null===r||void 0===r?await e():await e(r),o[t]=a,i--,i>0||n(o)})}),t.a=t.any=t(async(...e)=>{var[t,r,n]=a(!0,...e);t.forEach(async(e,t)=>{var a;a=null===r||void 0===r?await e():await e(r),n(a)})}),e.promisify=Function.promisify=t,e.oncilize=Function.oncilize=e=>{var t,a,r=!1;return a=e._promised?(...a)=>new Promise(async(n,i)=>{if(r)return await waitLoop(),void n(t);r=!0,t=await e(...a),n(t)}):(...a)=>(r||(r=!0,t=e(...a)),t),a.refresh=()=>r=!1,a},e.pumplize=Function.pumplize=(e,t,a=!0)=>{var r=[],n=null,i=100,o=null,s=()=>{n=null;var i=r;r=[],t(a?e(...i):e(i))},c=(...e)=>{null===n&&(n=Date.now(),o&&clearTimeout(o),o=setTimeout(s,i));var t=Date.now();t-n>=i?s():a?r=e:r.push(e)};return c.dump=()=>{o&&clearTimeout(o),o=null,s()},c.timeout=e=>{if(isNaN(e))return c;if(i=e,null===n)return c;var t=Date.now();return o&&clearTimeout(o),o=setTimeout(s,i+n-t),c},c}}).call(this,a("950f"))},"7fd5":function(e,t,a){},8397:function(e,t,a){"use strict";var r=a("79c4");const n={key:0,class:"crumb"},i=Object(r["h"])("span",{class:"hint"},"位置：",-1),o=Object(r["h"])("i",{class:"fas fa-angle-right"},null,-1);function s(e,t,a,s,c,l){return c.show?(Object(r["q"])(),Object(r["d"])("div",n,[i,(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(c.path,(e,t)=>(Object(r["q"])(),Object(r["d"])(r["a"],null,[Object(r["h"])("span",{onClick:t=>l.jump(e.path,e.query)},Object(r["z"])(e.name),9,["onClick"]),o],64))),256))])):Object(r["e"])("",!0)}var c=null;const l=new BroadcastChannel("page-changed");l.addEventListener("message",e=>{c&&c.update()});var u={name:"Crumb",data(){return{show:!0,path:[]}},props:{target:String},methods:{jump(e,t){t=Proxy.toObject(t);var a={path:e,query:t};this.$router.push(a),e===this.$route.path&&l.postMessage(a)},update(){var e=null,t="";if("/"===this.$route.path)e=null;else if("/category"===this.$route.path)this.$route.query&&this.$route.query.c&&(e=decodeURIComponent(this.$route.query.c).split(",").filter(e=>e.length>0),t="viewer");else if("/view"===this.$route.path)this.$route.query&&this.$route.query.f&&(e=decodeURIComponent(this.$route.query.f).split("/"),e.pop(),e=e.filter(e=>e.length>0),t="view");else{let a=this.target||this.$route.path;e=a.split("/").filter(e=>e.length>0),t="view"}e?(this.show=!0,this.path.splice(0,this.path.length),"viewer"!==t&&"page"!==t||e.pop(),this.path.push(...getPathNameList(e))):this.show=!1}},mounted(){this.update(),c=this},unmounted(){c=null}};u.render=s;t["a"]=u},"899d":function(e,t,a){},"8f09":function(e,t,a){},"94b5":function(e,t,a){(function(e){window.loadJS=e=>new Promise(t=>{var a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=t,a.onerror=t,document.body.appendChild(a)}),window.loadCSS=e=>new Promise(t=>{var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,a.onload=t,a.onerror=t,document.body.appendChild(a)}),window.onVueHyperLinkTriggered=(e,t)=>{var a=t.target;if(!a||!a.nodeName)return!1;if("span"===a.nodeName.toLowerCase()&&(a=a.parentElement),"a"!==a.nodeName.toLowerCase())return!1;var r=a.getAttribute("href");if(!r)return!1;if(0===r.indexOf("#/"))r=r.replace(/^#+[\\\/]+/,""),r=r.split(/[\\\/]+/),r={path:"/category",query:{c:r.join(",")}};else{if(0===r.indexOf("#")){r=r.replace(/^#+/,"");let e=document.querySelector('[name="'+r+'"]');if(e){let t=document.body.querySelector("#app");if(t){let a=(e.offsetTop||0)-t.scrollTop;Devices.isMobile||(a-=25),t.scrollBy({top:a,behavior:"smooth"})}}return t.preventDefault(),!0}if(0===r.indexOf("/page/#/"))r=r.replace(/^[\\\/]+page[\\\/]+#+[\\\/]+/,"/"),r={path:r};else if(0===r.indexOf("/page/"))r=r.replace("/page/","/"),r={path:r};else{if(0!==r.indexOf("/article/"))return!1;r=r.replace("/article/",""),r=encodeURIComponent(r),r={path:"/view",query:{f:r}}}}t.preventDefault();var n=location.hash.replace(/^#+/,"").split("?")[0];if(e.$router.push(r),r.path===n){let e=new BroadcastChannel("page-changed");e.postMessage(r)}return!0},LifeCycle.on.ready(t=>{console.log("Schwarzschild Blackhole System is READY!");var a=!0;t.config.globalProperties.afterMarkUp=async()=>{InitNotes(document.body.querySelector("#container")),a?(a=!1,MathJax.Hub.Config({extensions:["tex2jax.js"],TeX:{extensions:["AMSmath.js","AMSsymbols.js"]},jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"]]}}),MathJax.Hub.Queue(["Typeset",MathJax.Hub])):MathJax.Hub.Queue(["Typeset",MathJax.Hub]),await ImageWall.init()};const r=new MutationObserver(async e=>{var a=document.querySelectorAll(".markup");await Promise.all([].map.call(a,async e=>{var t=e.innerText;t=t.replace(/^\t+|\t+$/g,"\n"),t=await MarkUp.parse(t,{toc:e.classList.contains("toc"),glossary:e.classList.contains("glossary"),resources:e.classList.contains("resources"),showtitle:e.classList.contains("showtitle"),showauthor:!1,classname:"markup-content"}),e.innerHTML=t,e.classList.remove("markup")})),a.length>0&&await t.config.globalProperties.afterMarkUp()});r.observe(document.body,{childList:!0,subtree:!0}),e.changeThemeColor=e=>{e&&(localStorage.setItem("themeColor",e),document.body.setAttribute("theme",e))},changeThemeColor(localStorage.getItem("themeColor"))}),LifeCycle.on.initialized(e=>{console.log("Schwarzschild Blackhole System is INITIALIZED!")});var t=null;const a=e=>{sessionStorage.setItem("sourceUpdated",e.target),location.reload()};new BroadcastChannel("source-updated").addEventListener("message",({data:e})=>{t&&clearTimeout(t),t=setTimeout(()=>{t=null,a(e)},100)})}).call(this,a("950f"))},"9a67":function(e,t,a){},"9d8d":function(e,t,a){"use strict";var r=a("79c4");const n={class:"nav-bar"},i=Object(r["h"])("i",{class:"fas fa-angle-right"},null,-1),o={class:"nav-docker"},s=Object(r["h"])("i",{class:"fas fa-caret-right"},null,-1),c={class:"nav-container"},l={class:"about-bar nav-container right"};function u(e,t,a,u,h,p){const d=Object(r["x"])("NavMenuBar");return Object(r["q"])(),Object(r["d"])("div",n,[Object(r["h"])("div",{class:"nav-hint",onClick:t[1]||(t[1]=(...e)=>p.toggleHint&&p.toggleHint(...e))},[i]),Object(r["h"])("div",o,[Object(r["h"])("a",{onClick:t[2]||(t[2]=(...e)=>p.backHome&&p.backHome(...e))},"首页"),s,Object(r["h"])("div",c,[Object(r["h"])(d,{menu:h.menu},null,8,["menu"])]),Object(r["h"])("div",l,[Object(r["h"])(d,{menu:p.aboutMenu},null,8,["menu"])])])])}var h=a("0747");h["a"].render=u;t["a"]=h["a"]},"9eab":function(e,t,a){(function(e){e.ProtoType=Function.prototype,Object.defineProperty(ProtoType,"kerneltype",{get(){return this===ProtoType||this.__proto__===ProtoType?this:this.__proto__.kerneltype?this.__proto__.kerneltype:this},enumerable:!1,configurable:!1}),Object.prototype.isSubClassOf=function(e){if("function"!==typeof this)return!1;var t=this;while(t){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1},Object.defineProperty(Object.prototype,"isSubClassOf",{enumerable:!1})}).call(this,a("950f"))},a18c:function(e,t,a){"use strict";var r=a("3608"),n=a("79c4");const i={class:"home"};function o(e,t,a,r,o,s){const c=Object(n["x"])("Column");return Object(n["q"])(),Object(n["d"])("div",i,[Object(n["h"])(c)])}var s={name:"Home"};s.render=o;var c=s;const l={class:"category"};function u(e,t,a,r,i,o){const s=Object(n["x"])("Crumb"),c=Object(n["x"])("Column");return Object(n["q"])(),Object(n["d"])("div",l,[Object(n["h"])(s),Object(n["h"])(c)])}var h={name:"Category"};h.render=u;var p=h;const d={key:0,ref:"menu",class:"floatMenu"},m=Object(n["h"])("i",{class:"fas fa-bars"},null,-1),f={class:"menuFrame"},g={key:1,class:"likeCoinArea"};function y(e,t,a,r,i,o){const s=Object(n["x"])("Crumb");return Object(n["q"])(),Object(n["d"])(n["a"],null,[Object(n["h"])(s),i.menuList.length>0?(Object(n["q"])(),Object(n["d"])("div",d,[m,Object(n["h"])("div",f,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(i.menuList,e=>(Object(n["q"])(),Object(n["d"])("div",{class:"menuItem",read:e.read,level:e.level,onClick:t=>o.gotoMenu(e.key)},Object(n["z"])(e.title),9,["read","level","onClick"]))),256))])],512)):Object(n["e"])("",!0),Object(n["h"])("div",{ref:"article",class:"container",onClick:t[1]||(t[1]=(...e)=>o.onClick&&o.onClick(...e))},null,512),i.showLikeCoin?(Object(n["q"])(),Object(n["d"])("div",g,[i.likecoin?(Object(n["q"])(),Object(n["d"])("iframe",{key:0,src:i.likecoin},null,8,["src"])):Object(n["e"])("",!0)])):Object(n["e"])("",!0)],64)}const b=new BroadcastChannel("page-scroll"),v=new BroadcastChannel("page-changed"),w=new BroadcastChannel("change-loading-hint"),j=["BY","SA","NC","ND"],O={BY:"署名",SA:"相同方式共享",NC:"非商业性使用",ND:"禁止演绎"};var k,C=null;b.addEventListener("message",({data:e})=>{C&&(k&&clearTimeout(k),k=setTimeout(()=>{C&&(C.onScroll(e),k=null)},100))}),v.addEventListener("message",({data:e})=>{C&&C.update()});var S={name:"Viewer",data(){return{likecoin:"",showLikeCoin:!1,menuList:[],chapList:[],chapMap:{}}},methods:{async update(){w.postMessage({name:"加载中……",action:"show"});var e=this.$route.query.f,t=1*this.$route.query.t;if(e){var a=!!e.match(/\.mu$/i);t=t||0;var r=[Granary.getArticle(e,t)];a&&r.push(Granary.getContent("/api/copyright.md"));var n,[i,o]=await Promise.all(r),s="",c="",l=!0;i?o&&a&&(i.match(/(^ *#|\n *#)[ \t].+/)||(i="# 正文\n\n"+i),i=i+"\n\n\n"+o):(l=!1,s='<div class="page_not_found"><div class="frame"></div><div class="title">指定内容不存在，请联系站长。</div></div>'),l&&(0===t&&(t=Date.now()),n=await MarkUp.fullParse(i,{toc:!0,glossary:a,resources:!1,showtitle:!0,showauthor:a,date:t,classname:"markup-content"}),n.meta.others=n.meta.others||{},o=n.meta.others.CopyRight,c="《"+n.title+"》",s=n.content,s||(s='<div class="page_not_found"><div class="frame"></div><div class="title">MarkUp 内容解析失败，请联系作者。</div></div>',l=!1)),this.$refs.article.innerHTML=s,l?(await this.afterMarkUp(),this.addLikeCoin(n.meta.others.LikeCoin),this.refreshMenu(n),o&&a&&(await wait(),this.adjustCopyRight(o))):(this.showLikeCoin=!1,this.likecoin="",this.refreshMenu()),document.title=c+" ("+this.SiteName+")",w.postMessage({action:"hide"})}else this.$router.push({path:"/"})},adjustCopyRight(e){if(!e)return html;var t=[],a="0";if(!e.match(/^ *cc *0(\.0)* *$/i)){if(!e.match(/^ *(cc +)(\w+\-)*\w+( +(\d+\.)*\d) *$/i))return;e=e.replace(/^ *cc +/i,"").replace(/ +$/,"").split(/ +/),a=e[1]||"4.0",a.indexOf(".")<0&&(a+=".0"),t=e[0].split("-").map(e=>e.toUpperCase()).filter(e=>j.includes(e)),t.sort((e,t)=>t>e?-1:t<e?1:0)}var r=null;this.$refs.article.querySelectorAll("section").forEach(e=>{var t=e.querySelector("h1");t&&"版权申明"===t.innerText&&(r=e)});var n=r.querySelector("p a"),i=r.querySelector("blockquote p");if(0===t.length){n.innerText="公共领域许可（CC0）协议",n.href="https://en.wikipedia.org/wiki/Creative_Commons_license#Zero_/_public_domain",i.innerHTML="通过本协议，您的作品将不受限制地在全球范围内发布内容，您将法律允许范围内放弃一切权利。";let e=i.parentElement.nextSibling;e.parentElement.removeChild(e)}else t.includes("BY")?(n.innerText="知识共享署名 4.0 国际许可（CC "+t.join("-")+" "+a+"）协议",n.href="http://creativecommons.org/licenses/"+t.join("-").toLowerCase()+"/"+a+"/",i.innerHTML="通过本协议，您可以<a href='https://en.wikipedia.org/wiki/Creative_Commons_license#Attribution' target='_blank'>分享并演绎本作品（创建派生内容）</a>，只要你遵守以下授权条款规定："+t.map(e=>"<strong>"+O[e]+"</strong>").join("、")+"。<br>具体内容请查阅上述协议声明。"):(n.innerText="知识共享 4.0 许可（CC "+t.join("-")+" "+a+"）协议",n.href="https://en.wikipedia.org/wiki/Creative_Commons",i.innerHTML="通过本协议，您可以<a href='https://en.wikipedia.org/wiki/Creative_Commons_license#Attribution' target='_blank'>分享并演绎本作品（创建派生内容）</a>，只要你遵守以下授权条款规定："+t.map(e=>"<strong>"+O[e]+"</strong>").join("、")+"。<br>具体内容请查阅上述协议声明。")},addLikeCoin(e){var t=!0;if(this.LikeCoin&&this.LikeCoin.forbidden&&this.LikeCoin.forbidden.length>0){let e=("."+location.hostname+".").replace(/\.+/g,".");t=this.LikeCoin.forbidden.every(t=>(t=("."+t+".").replace(/\.+/g,"."),e.indexOf(t)<0))}if(t){if(!e){if(!this.LikeCoin)return void(this.showLikeCoin=!1);e=String.is(this.LikeCoin)?this.LikeCoin:this.LikeCoin.id}e?(this.showLikeCoin=!0,this.likecoin="https://button.like.co/"+e):this.likecoin=""}else this.showLikeCoin=!1},refreshMenu(e){this.menuList.clear(),this.chapList.clear();for(let t in this.chapMap)delete this.chapMap[t];e&&e.chapList.forEach(e=>{this.menuList.push({level:e[0]-1,key:e[1],title:e[2],read:!1});var t=this.$refs.article.querySelector('a[name="'+e[1]+'"]');t&&(this.chapList.push(t),this.chapMap[e[1]]=t)})},onScroll(e){var t=Devices.isMobile?0:25,a=0,r=!0,n=0;e.total>e.height&&(n=e.top/(e.total-e.height),n=n*n*e.height),this.chapList.some((e,i)=>{var o=e.getBoundingClientRect().top;if(o-=n,o>t)return r=!1,a=i,!0}),0===a&&r&&(a=this.menuList.length);for(let i=0;i<this.menuList.length;i++)this.menuList[i].read=i<a},onClick(e){onVueHyperLinkTriggered(this,e)},gotoMenu(e){var t=this.chapMap[e];if(t){var a=t.getBoundingClientRect().top-(Devices.isMobile?5:30);app.scrollBy({top:a,behavior:"smooth"}),this.$refs.article.focus()}}},async mounted(){C=this,await this.update(),this.$refs.article.focus()},unmounted(){C=null}};S.render=y;var _=S;const A=[{path:"/",name:"Home",component:c},{path:"/category",name:"Category",component:p},{path:"/view",name:"Viewer",component:_},{path:"/about",name:"AboutSite",component:function(){return a.e("chunk-5324898a").then(a.bind(null,"52a1"))}},{path:"/chinesecolor",name:"chinesecolor",component:function(){return a.e("chunk-22ee1d28").then(a.bind(null,"de6d"))}},{path:"/freemusic",name:"freemusic",component:function(){return a.e("chunk-2d0c4d67").then(a.bind(null,"3d11"))}},{path:"/japanesecolor",name:"japanesecolor",component:function(){return a.e("chunk-75ac00fa").then(a.bind(null,"ce9d"))}},{path:"/latex",name:"latex",component:function(){return a.e("chunk-2d0cbe04").then(a.bind(null,"4c10"))}},{path:"/markup",name:"markup",component:function(){return a.e("chunk-821ebf42").then(a.bind(null,"f4c6"))}},{path:"/entertain/ballcrush",name:"ballcrush",component:function(){return a.e("chunk-2d0d4006").then(a.bind(null,"5ebb"))}},{path:"/entertain/rushgo",name:"rushgo",component:function(){return a.e("chunk-2d0de03c").then(a.bind(null,"849c"))}},{path:"/tools/parseMarkup",name:"parseMarkup",component:function(){return a.e("chunk-5ae8ae3f").then(a.bind(null,"dcfb"))}},{path:"/popsci/quantum1",name:"quantum1",component:function(){return a.e("chunk-2ca2da94").then(a.bind(null,"1836"))}},{path:"/aboutMe",name:"AboutMe",component:function(){return a.e("chunk-5369b2eb").then(a.bind(null,"dd86"))}},{path:"/404",name:"PageNotFound",component:function(){return a.e("chunk-2d0e95df").then(a.bind(null,"8cdb"))}},{path:"/:pathMatch(.*)*",name:"PageNotFound",component:function(){return a.e("chunk-2d0e95df").then(a.bind(null,"8cdb"))}}],L=Object(r["a"])({history:Object(r["b"])(),routes:A});L.afterEach((e,t)=>{if("Category"===e.name){let t=getPathNameList(e.query.c.split(","),!1);document.title=t?L.app.config.globalProperties.SiteName+" / "+t.map(e=>e.name).join(" / "):L.app.config.globalProperties.SiteName}else document.title=L.app.config.globalProperties.SiteName;document.querySelector("#app").scrollTo(0,0)});t["a"]=L},aa46:function(e,t,a){},aab0:function(e,t,a){"use strict";var r=a("79c4");const n={class:"imageFrame"},i={class:"imageLegend"},o=Object(r["h"])("i",{class:"fas fa-times-circle"},null,-1),s=Object(r["h"])("i",{class:"fas fa-angle-left"},null,-1),c=Object(r["h"])("i",{class:"fas fa-angle-right"},null,-1);function l(e,t,a,l,u,h){return Object(r["q"])(),Object(r["d"])("div",{class:"imageShowcase "+(u.show?"show":"hide"),onClick:t[4]||(t[4]=(...e)=>h.onClick&&h.onClick(...e))},[Object(r["h"])("div",n,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(u.gallary,(e,t)=>(Object(r["q"])(),Object(r["d"])("div",{class:"imagePage",style:{left:100*(t-u.index)+"%"}},[Object(r["h"])("div",{class:"imageInstance",style:{backgroundImage:"url("+e.image+")",width:e.width+"px"},width:e.width,height:e.height},null,12,["width","height"]),Object(r["h"])("div",i,Object(r["z"])(e.title),1)],4))),256))]),Object(r["h"])("div",{class:"imageButton close",onClick:t[1]||(t[1]=e=>u.show=!1)},[o]),Object(r["h"])("div",{class:"imageButton left",inactive:u.index<=0,onClick:t[2]||(t[2]=e=>u.index--)},[s],8,["inactive"]),Object(r["h"])("div",{class:"imageButton right",inactive:u.index>=u.gallary.length-1,onClick:t[3]||(t[3]=e=>u.index++)},[c],8,["inactive"])],2)}const u=e=>{var t=e.parentNode;if(!t)return null;var a=t.tagName;return a?(a=a.toLowerCase(),"figuren"===a?u(t):"div"!==a?null:t.classList.contains("image-wall")?t:u(t)):null};var h={name:"ImageShowcase",data(){return{show:!1,index:0,gallary:[]}},created(){document.body.addEventListener("click",e=>{if(!this.show){var t=e.target,a=t.tagName;if(a){a=a.toLowerCase();var r,n,i=!1;if("img"===a?(i=!0,r=t,n=u(t)):("figure"===a||"div"===a&&t.classList.contains("resource"))&&(r=t.querySelector("img"),r&&(i=!0,n=u(t))),i){var o=[],s=0;if(n)n.querySelectorAll(".image-container.image-float div.resource.image").forEach((e,t)=>{var a=e.querySelector("img");a===r&&(s=t);var n=e.querySelector("figcaption");n=n.innerText||"",o.push({image:a.src,width:a.naturalWidth,height:a.naturalHeight,title:n})});else{s=0;let e=r.parentNode;e&&(e=e.parentNode),e&&(e=e.querySelector("figcaption")),e&&(e=e.innerText),e=e||"",o=[{image:r.src,width:r.naturalWidth,height:r.naturalHeight,title:e}]}this.showGallary(s,o)}}}}),document.body.addEventListener("keydown",e=>{this.show&&(37===e.keyCode?this.index>0&&this.index--:39===e.keyCode?this.index<this.gallary.length-1&&this.index++:27===e.keyCode&&(this.show=!1),e.preventDefault())})},methods:{onClick(e){if(!e.target.classList.contains("fas")&&!e.target.querySelector(".fas"))if(e.target.querySelector(".imageInstance"))this.show=!1;else if(e.target.classList.contains("imageInstance")){var t=1*e.target.getAttribute("width")||0,a=1*e.target.getAttribute("height")||0,r=e.target.getBoundingClientRect(),n=r.height;r=r.width;var i=e.offsetX,o=e.offsetY,s=0,c=0;if(t<=r)if(a>n){let e=t/a*n;s=(r-e)/2}else s=(r-t)/2,c=(n-a)/2;else{let e=r,i=a/t*r;i>n&&(e=r/i*n,i=n),s=(r-e)/2,c=(n-i)/2}i>r/2&&(i=r-i),o>n/2&&(o=n-o),(i<s||o<c)&&(this.show=!1)}},showGallary(e,t){this.index=e,this.gallary.splice(0,this.gallary.length),t.forEach(e=>this.gallary.push(e)),this.show=!0}}};h.render=l;t["a"]=h},b2e4:function(e,t,a){"use strict";var r=a("79c4");const n={class:"nav-menu-bar"};function i(e,t,a,i,o,s){const c=Object(r["x"])("NavMenuItem");return Object(r["q"])(),Object(r["d"])("nav",n,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(a.menu,e=>(Object(r["q"])(),Object(r["d"])(c,{title:e.name,action:e.category&&e.category.length>0?a.supers?a.supers+","+e.category:e.category:"",type:e.type,subs:e.subs},null,8,["title","action","type","subs"]))),256))])}var o={name:"NavMenuBar",props:{supers:"",menu:Array}};o.render=i;t["a"]=o},b9a5:function(e,t,a){(function(e,t){Array.prototype.copy=function(){return this.map(e=>e)},Array.prototype.duplicate=function(){var e=this.map(e=>Object.isBasicType(e)?e.valueOf():null===e||void 0===e?e:e instanceof Date?new Date(e.getTime()):"object"!==typeof e||e instanceof Promise?void 0:e.duplicate());return Object.assign([],this,e)},Array.prototype.randomize=function(){var e=this.length,t=Array.random(e),a=this;return t=t.map(e=>a[e]),t},Array.prototype.remove=function(e){var t=this.indexOf(e);return t<0||this.splice(t,1),this},Array.prototype.clear=function(e){return this.splice(0,this.length),this},Array.prototype.translate=function(e){var t=this.copy();if(isNaN(e))return t;var a=this.length;if(e>=a||e<=-a)return t;if(e>0){for(let r=0,n=e;r<a-e;r++,n++)t[r]=this[n];for(let r=a-e,n=0;r<a;r++,n++)t[r]=this[n]}else{e=-e;for(let r=0,n=e;r<a-e;r++,n++)t[n]=this[r];for(let r=a-e,n=0;r<a;r++,n++)t[n]=this[r]}return t},Array.prototype.query=function(e){var t=-1;return this.some((a,r)=>{const n=!!e(a);return n&&(t=r),n}),t},Array.prototype.pick=function(){var e=this.length,t=Math.floor(Math.random()*e);return this[t]},Array.prototype.equal=function(e){if(!(e instanceof Array))return!1;var t=this.byteLength;if(t!=e.byteLength)return!1;for(let a=0;a<t;a++)if(this[a]!==e[a])return!1;return!0},Object.defineProperty(Array.prototype,"first",{get(){return this[0]},enumerable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"last",{get(){return this[this.length-1]},enumerable:!1,configurable:!1}),Object.defineProperty(Array.prototype,"copy",{enumerable:!1}),Object.defineProperty(Array.prototype,"duplicate",{enumerable:!1}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1}),Object.defineProperty(Array.prototype,"clear",{enumerable:!1}),Object.defineProperty(Array.prototype,"randomize",{enumerable:!1}),Object.defineProperty(Array.prototype,"translate",{enumerable:!1}),Object.defineProperty(Array.prototype,"query",{enumerable:!1}),Object.defineProperty(Array.prototype,"pick",{enumerable:!1}),Object.defineProperty(Array.prototype,"equal",{enumerable:!1}),Array.is=e=>e instanceof Array,Array.generate=(e,t=(e=>e))=>{var a=[];if(Function.is(t))for(let r=0;r<e;r++)a.push(t(r));else for(let r=0;r<e;r++)a.push(t);return a},Array.random=(e,t=(e=>e))=>{var a=[],r=[];for(let n=0;n<e;n++)a.push(n);for(let n=0;n<e;n++){let e=Math.floor(Math.random()*a.length);r.push(t(a[e])),a.splice(e,1)}return r},Uint8Array.prototype.__proto__.copy=function(){return new Uint8Array(this)},Uint8Array.prototype.__proto__.duplicate=Uint8Array.prototype.__proto__.copy,Object.defineProperty(Uint8Array.prototype.__proto__,"copy",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype.__proto__,"duplicate",{enumerable:!1}),"node"===e._env&&(Uint8Array.prototype.__proto__.toBuffer=function(){var e=t.alloc(this.length,this);return e},Uint8Array.prototype.__proto__.toBase64=function(){var e=t.alloc(this.length,this);return e.toString("base64")},Object.defineProperty(Uint8Array.prototype.__proto__,"toBuffer",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype.__proto__,"toBase64",{enumerable:!1}),Uint8Array.fromString=(e,a="utf8")=>Uint8Array.fromBuffer(t.from(e,a)),Uint8Array.fromBase64=e=>{var a=t.from(e,"base64");return Uint8Array.fromBuffer(a)},Uint8Array.fromBuffer=e=>new Uint8Array(e),Uint16Array.fromBuffer=e=>new Uint16Array(e),Uint32Array.fromBuffer=e=>new Uint32Array(e),Int8Array.fromBuffer=e=>new Int8Array(e),Int16Array.fromBuffer=e=>new Int16Array(e),Int32Array.fromBuffer=e=>new Int32Array(e),Float32Array.fromBuffer=e=>new Float32Array(e),Float64Array.fromBuffer=e=>new Float64Array(e),BigInt64Array.fromBuffer=e=>new BigInt64Array(e),BigUint64Array.fromBuffer=e=>new BigUint64Array(e)),Uint8Array.prototype.sub=function(e,a){return isNaN(e)?this.copy():(isNaN(a)&&(a=e,e=0),new Uint8Array(t.from(this).subarray(e,e+a)))},Uint8Array.prototype.concat=function(e){if(!(e instanceof Uint8Array))return this.copy();var a=t.concat([this,e]);return t.from(a)},Uint8Array.prototype.padEnd=function(e,t=0){if(e<=this.length)return this.copy();(!Number.is(t)||t<0||t>255)&&(t=0);var a=new Uint8Array(e);for(let r=0;r<this.length;r++)a[r]=this[r];for(let r=this.length;r<e;r++)a[r]=t;return a},Uint8Array.prototype.padStart=function(e,t=0){if(e<=this.length)return this.copy();(!Number.is(t)||t<0||t>255)&&(t=0);var a=new Uint8Array(e);e-=this.length;for(let r=0;r<e;r++)a[r]=t;for(let r=0;r<this.length;r++)a[r+e]=this[r];return a},Uint8Array.prototype.equal=function(e){if(!(e instanceof Uint8Array))return!1;var t=this.byteLength;if(t!=e.byteLength)return!1;for(let a=0;a<t;a++)if(this[a]!==e[a])return!1;return!0},Object.defineProperty(Uint8Array.prototype,"sub",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"concat",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"padEnd",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"padStart",{enumerable:!1}),Object.defineProperty(Uint8Array.prototype,"equal",{enumerable:!1})}).call(this,a("950f"),a("4458").Buffer)},bae9:function(e,t,a){"use strict";(function(e){const a=new BroadcastChannel("change-loading-hint");e.callPageLoaded=()=>{var e=new BroadcastChannel("change-loading-hint");e.postMessage({action:"hide"})};var r=null;t["a"]={name:"Loading",data(){return{title:"载入中……",show:!0,type:"pulse",forcequit:!1}},created(){a.addEventListener("message",e=>{var t=e.data;"show"===t.action?(t.title=t.title||"载入中……",this.forcequit=!1,r&&(clearTimeout(r),r=null),r=setTimeout(()=>{this.forcequit=!0},5e3),this.show=!0):"hide"===t.action&&(t.title=t.title||"载入中……",this.forcequit=!1,r&&(clearTimeout(r),r=null),this.show=!1),String.is(t.title)&&(this.title=t.title),["spin","pulse"].indexOf(t.type)>=0&&(this.type=t.type)})},methods:{forceQuit(){r&&(clearTimeout(r),r=null),this.show=!1}}}}).call(this,a("950f"))},bfef:function(e,t,a){"use strict";var r=a("79c4");const n={class:"tail-bar"},i=Object(r["h"])("div",{class:"left"}," © 2020 - 2021 LostAbaddon, all rights reserved. ",-1),o=Object(r["h"])("div",{class:"right"},[Object(r["g"])(" Generated by "),Object(r["h"])("a",{target:"_blank",href:"https://github.com/LostAbaddon/Schwarzschild"},"Schwarzschild v0.1.1")],-1);function s(e,t,a,s,c,l){return Object(r["q"])(),Object(r["d"])("div",n,[i,o])}var c={name:"TailBar"};c.render=s;t["a"]=c},c428:function(e,t,a){"use strict";var r=a("79c4");const n={class:"hint"},i={key:0,class:"animate spin"},o=Object(r["h"])("i",{class:"fas fa-spinner fa-spin fa-fast"},null,-1),s={key:1,class:"animate pulse"},c=Object(r["f"])('<i class="fas fa-square"></i><i class="fas fa-square"></i><i class="fas fa-square"></i><i class="fas fa-square"></i><i class="fas fa-square"></i>',5),l={class:"title"};function u(e,t,a,u,h,p){return Object(r["q"])(),Object(r["d"])("div",{class:["loading",h.show?"show":"hide"]},[Object(r["h"])("div",n,["spin"===h.type?(Object(r["q"])(),Object(r["d"])("div",i,[o])):Object(r["e"])("",!0),"pulse"===h.type?(Object(r["q"])(),Object(r["d"])("div",s,[c])):Object(r["e"])("",!0),Object(r["h"])("div",l,Object(r["z"])(h.title),1)]),h.forcequit?(Object(r["q"])(),Object(r["d"])("div",{key:0,class:"forceQuit",onClick:t[1]||(t[1]=(...e)=>p.forceQuit&&p.forceQuit(...e))},"强制关闭")):Object(r["e"])("",!0)],2)}var h=a("bae9");h["a"].render=u;t["a"]=h["a"]},c531:function(e,t,a){"use strict";var r=a("79c4");const n={ref:"header"},i={key:0},o=Object(r["f"])('<span>文章列表</span><div class="controller"><div class="hint"><i class="fas fa-sliders-h"></i></div><div class="styleList"><div class="styleItem" name="bars"><i class="fas fa-bars"></i></div><div class="styleItem" name="lines"><i class="fas fa-stream"></i></div><div class="styleItem" name="columns"><i class="fas fa-columns"></i></div></div></div>',2);function s(e,t,a,s,c,l){const u=Object(r["x"])("ColumnItem");return Object(r["q"])(),Object(r["d"])("section",{class:"column container",onClick:t[1]||(t[1]=(...e)=>l.onClick&&l.onClick(...e))},[Object(r["h"])("header",n,null,512),c.showList?(Object(r["q"])(),Object(r["d"])("caption",i,[o])):Object(r["e"])("",!0),c.showList?(Object(r["q"])(!0),Object(r["d"])(r["a"],{key:1},Object(r["w"])(c.list,e=>(Object(r["q"])(),Object(r["d"])(u,{title:e.title,author:e.author,description:e.description,type:e.type,timemark:e.timemark,timestamp:e.timestamp,categoryName:e.category,categoryPath:e.sort,filename:e.filename},null,8,["title","author","description","type","timemark","timestamp","categoryName","categoryPath","filename"]))),256)):Object(r["e"])("",!0)])}const c={class:"title"},l={class:"author"},u={class:"timestamp"};function h(e,t,a,n,i,o){return Object(r["q"])(),Object(r["d"])("section",{class:"column-item",filename:a.categoryPath+"/"+a.filename,timestamp:a.timestamp},[Object(r["h"])("header",null,[Object(r["h"])("div",c,Object(r["z"])(a.title),1),Object(r["h"])("div",{class:"category",path:a.categoryPath},Object(r["z"])(a.categoryName),9,["path"])]),Object(r["h"])("article",null,Object(r["z"])(a.description),1),Object(r["h"])("footer",null,[Object(r["h"])("div",l,Object(r["z"])(a.author),1),Object(r["h"])("div",u,Object(r["z"])(a.timemark),1)])],8,["filename","timestamp"])}var p={name:"ColumnItem",props:{title:String,author:String,description:String,type:String,timemark:String,timestamp:Number,categoryName:String,categoryPath:String,filename:String}};p.render=h;var d=p;const m=_("Utils").getTimeString;var f=null;const g=new BroadcastChannel("page-changed");g.addEventListener("message",e=>{f&&f.update()});const y=new BroadcastChannel("change-loading-hint"),b=new Map,v=e=>{var t=b.get(e);if(t)return t;var a=SiteMap;return t=null,e=e.split(/[\\\/]/).filter(e=>e.length>0),e.some((r,n)=>{var i=a[r];if(!i)return!0;a=i.subs,n===e.length-1&&(t=i.name)}),t?(b.set(e,t),t):e.last};var w={name:"Column",components:{ColumnItem:d},data(){return{itemPerPage:20,list:[],showList:!0}},methods:{async getHeaderInfo(e){var t=await Granary.getColumnHeader(e),a="";t&&(a=await MarkUp.parse(t,{toc:!1,glossary:!1,resources:!1,showtitle:!1,showauthor:!1,classname:"markup-content"})),this.$refs.header.innerHTML=a,t&&await this.afterMarkUp()},async getArticleList(e){var t=await Granary.getCategory(e);this.list.splice(0,this.list.length),t.forEach(e=>{e.category=v(e.sort),e.placehoding=!1,e.timestamp=new Date(e.publish).getTime(),e.timemark=m(new Date(e.publish),"YYMMDDhhmm"),e.description=e.description||"暂无",this.list.push(e)})},async update(){y.postMessage({name:"加载中……",action:"show"});var e=localStorage.getItem("columnStyle")||"lines";this.$el.setAttribute("columnStyle",e),this.list.splice(0,this.list.length),this.header="";var t=null;if("/"===this.$route.path)t="/";else{if("/category"!==this.$route.path)return void y.postMessage({action:"hide"});if(!this.$route.query||!this.$route.query.c)return void y.postMessage({action:"hide"});t="/"+this.$route.query.c.split(",").filter(e=>e.length>0).join("/")}t=t.replace(/^[\/\\]+/,"");var a=t.split("/").filter(e=>e.length>0),r=SiteMap;a.length>0?a.some(e=>{if(e=r[e],!(e.subs&&e.subs.length>0))return r=e.type,!0;r=e.subs}):r="viewer","folder"===r?(this.showList=!1,await this.getHeaderInfo(t)):"viewer"===r?(this.showList=!0,await Promise.all([this.getHeaderInfo(t),this.getArticleList(t)])):this.showList=!1,y.postMessage({action:"hide"})},onClick(e){var t=e.target;if("span"===t.tagName.toLowerCase()&&(t=t.parentElement),!t.classList.contains("hint")){if(t.classList.contains("styleItem")){let e=t.getAttribute("name");return this.$el.setAttribute("columnStyle",e),void localStorage.setItem("columnStyle",e)}if("a"!==t.nodeName.toLowerCase()||!onVueHyperLinkTriggered(this,e)){var a=void 0,r=void 0,n=void 0;if(t){while(!a&&!r)if(a=t.getAttribute("filename"),r=t.getAttribute("path"),n=1*t.getAttribute("timestamp"),t=t.parentNode,!t||t===document.body)break;if(r){let e="/category?c="+r.split("/").join(",");this.$route.fullPath!==e&&this.$router.push({path:e})}else a&&this.$router.push({path:"/view",query:{f:a,t:n}})}}}}},mounted(){f=this,this.update()},unmounted(){f=null}};w.render=s;t["a"]=w},cf03:function(e,t){window.InitAsimov=async()=>{if(window.SharedWorker||window.Worker){let e,t,a,r=new Map,n=()=>Math.floor(1e8*Math.random());window.SharedWorker?(a="Shared-Worker Asimov",e=new SharedWorker("/js/worker/asimov.js"),t=e.port):(a="Dedicated-Worker Asimov",e=new Worker("/js/worker/asimov.js"),t=e),t.onmessage=({data:e})=>{console.log(a+" finished task-"+e.id);var t=r.get(e.id);r.delete(e.id),t&&t(e.markup)},window.MarkUp=window.MarkUp||{},window.MarkUp.fullParse=(e,i)=>new Promise(o=>{var s=n();r.set(s,o),console.log(a+" started task-"+s),t.postMessage({id:s,content:e,config:i})}),window.MarkUp.parse=async(e,t)=>{var a;return a=await MarkUp.fullParse(e+"\n",t),a?a.content:""},window.onbeforeunload=()=>{t.postMessage("suicide"),t.close()}}else await loadJS("/Asimov/markup.js"),await loadJS("/Asimov/extensions.js"),await loadJS("/js/worker/extmarkup.js")}},d61b:function(e,t,a){"use strict";var r=a("79c4");const n={class:"nav-menu-item"},i={key:0,class:"fas fa-caret-down"},o={key:0,class:"hint fas fa-caret-right"};function s(e,t,a,s,c,l){const u=Object(r["x"])("NavMenuBar");return Object(r["q"])(),Object(r["d"])("div",n,[Object(r["h"])("a",{onClick:t[1]||(t[1]=e=>l.click(a.type,a.action))},[Object(r["g"])(Object(r["z"])(a.title),1),a.subs?(Object(r["q"])(),Object(r["d"])("i",i)):Object(r["e"])("",!0)]),a.subs?(Object(r["q"])(),Object(r["d"])("i",o)):Object(r["e"])("",!0),a.subs?(Object(r["q"])(),Object(r["d"])(u,{key:1,menu:a.subs,supers:a.action},null,8,["menu","supers"])):Object(r["e"])("",!0)])}const c=new BroadcastChannel("page-changed");var l={name:"NavMenuItem",props:{title:String,type:String,action:String,subs:Array},methods:{click(e,t){if(t=t.split(",").filter(e=>e.length>0),0!==t.length){var a={};if("page"===e)a.path="/"+t.join("/");else{if("viewer"!==e&&"folder"!==e)return"action"===e?void("color"===t[0]&&changeThemeColor(t[1])):void 0;a.path="/category",a.query={c:t.join(",")}}var r=!0,n=!1;if(this.$route.path===a.path){n=!0;let e=this.$route.query&&this.$route.query.c||"",t=a.query&&a.query.c||"";e===t&&(r=!1)}r&&(this.$router.push(a),n&&c.postMessage(a))}}}};l.render=s;t["a"]=l},dc94:function(e,t){(()=>{const e=Symbol("update"),t=100,a=e=>!isNaN(e)&&"number"===typeof e;class r{constructor(e=100){this.cache=new Map,this.secondary=new Map,this.limit=a(e)?e:t,this.length=0}set(t,a){const r=this.cache.has(t);r?this.cache.set(t,a):this[e](t,a)}get(t){var a=this.cache.get(t);return void 0!==a||(a=this.secondary.get(t),void 0!==a&&this[e](t,a)),a}del(e){const t=this.cache.has(e);t&&this.length--,this.cache.delete(e),this.secondary.delete(e)}has(e){return this.cache.has(e)||this.secondary.has(e)}clear(){this.cache.clear(),this.secondary.clear(),this.length=0}[e](e,t){this.length++,this.length>=this.limit&&(this.secondary=this.cache,this.cache=new Map,this.length=0),this.cache.set(e,t)}}window.LRUCache=r})()},ea3a:function(e,t,a){(function(e,t){e.setTimeout&&(e.setImmediate=e.setImmediate||function(e){setTimeout(e,0)},e.nextTick=t&&t.nextTick||e.setImmediate,e.wait=promisify((e,t)=>{var a=(new Date).getTime();Function.is(e)&&(t=e,e=0),setTimeout(()=>t((new Date).getTime()-a),e)}),e.waitLoop=promisify(e=>{var t=(new Date).getTime();setImmediate(()=>e((new Date).getTime()-t))}),e.waitTick=promisify(e=>{var t=(new Date).getTime();nextTick(()=>e((new Date).getTime()-t))}),e.queueMicrotask&&(e.waitQueue=promisify(e=>{var t=(new Date).getTime();queueMicrotask(()=>e((new Date).getTime()-t))}))),"node"===e._env?e.now=()=>{var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:e.now=()=>Date.now(),e.Clock=class{constructor(a="Initialized",r=!1){this.stamps=[],this.isNode=!!e.process,this.isNode&&!r?this.clock=()=>{var e=t.hrtime();return e[0]+e[1]/1e9}:this.clock=()=>(new Date).getTime()/1e3,this.stamp(a)}stamp(e=""){var t=this.clock();return this.stamps.push([t,e]),t}list(e=!0){var t,a=this.stamps[0][0],r=(this.stamps.length,0);return t=this.stamps.map(e=>{var t=[e[0]-a,e[1]];a=e[0];var n=e[1].length;return n>r&&(r=n),t}),e?(t=t.map(e=>{var t=e[1],a=e[0];return t=t.padStart(r," "),t+"\t"+a}),t.join("\n")):t}getStamp(e){if(!e)return-1;var t=-1;return this.stamps.some(a=>a[1]===e&&(t=a[0],!0)),t}spent(e,t){return t?(e=this.getStamp(e),e<0&&(e=this.stamps[0][0]),t=this.getStamp(t),t<0&&(t=this.stamps[this.stamps.length-1][0])):(t=this.getStamp(e),t<0&&(t=this.stamps[this.stamps.length-1][0]),e=this.stamps[0][0]),t-e}}}).call(this,a("950f"),a("3cbd"))},fc58:function(e,t,a){(function(e){(()=>{const t=new BroadcastChannel("change-loading-hint"),a=(e,t)=>{t=t||document;var a=t.querySelectorAll(e);return[].map.call(a,e=>e)},r=(e,t)=>{var a=document.createElement(e);return String.is(t)?a.classList.add(t):Array.is(t)&&t.forEach(e=>a.classList.add(e)),a},n=(e,t)=>{t.forEach(t=>{t!==e&&t.pause()})};e.ImageWall={whRate:3/4,async init(){const e=document.querySelector("#container > div");var i=[...a(".markup-content audio"),...a(".markup-content video")];i.forEach(e=>{e.onplay=()=>n(e,i)});var o=0,s=0;a(".markup-content .image-wall").forEach(e=>{var t=a("div.resource",e);e._total=t.length,e._index=0,e._frame=e.querySelector("div.image-container.image-ghost"),e._frame||(e._frame=r("div",["image-container","image-ghost"]),e.appendChild(e._frame)),e._float=e.querySelector("div.image-container.image-float"),e._float||(e._float=r("div",["image-container","image-float"]),e.appendChild(e._float)),e._left=e.querySelector("div.image-button-left"),e._left||(e._left=r("div","image-button-left"),e._left.innerHTML='<i class="fas fa-angle-left"></i>',e.appendChild(e._left),e._left.addEventListener("click",t=>{e._index<=0||(e._index--,e._float.style.transform="translateX(-"+100/e._total*e._index+"%)",e._index<e._total-1&&e._right.classList.remove("inactive"),e._index<=0&&e._left.classList.add("inactive"))})),e._right=e.querySelector("div.image-button-right"),e._right||(e._right=r("div","image-button-right"),e._right.innerHTML='<i class="fas fa-angle-right"></i>',e.appendChild(e._right),e._right.addEventListener("click",t=>{e._index>=e._total-1||(e._index++,e._float.style.transform="translateX(-"+100/e._total*e._index+"%)",e._index>0&&e._left.classList.remove("inactive"),e._index>=e._total-1&&e._right.classList.add("inactive"))})),e._callback=(n,i)=>{t.some(e=>!e._ready)||(e.classList.add("loaded"),e._index=0,e._float.style.transform="translateX(0%)",e._left.classList.add("inactive"),t.forEach((t,a)=>{var n=r("div","image-frame");e._frame.appendChild(n),n.appendChild(t)}),e._float.innerHTML=e._frame.innerHTML,e._float.style.width=100*e._total+"%",a("div.image-frame",e._float).forEach(t=>{t.style.width=100/e._total+"%"}))},t.forEach(t=>{e._frame.appendChild(t),t._wall=e,t.classList.add("inside")})}),await Promise.all(a("div.resource.image").map(a=>new Promise(r=>{o++;var n=a.querySelector("img"),i=a.querySelector("figure");if(!n)return s++,t.postMessage({title:"载入图片: "+s+" / "+o}),r();var c=a.classList.contains("inside");c||a.classList.add("outside"),n.onload=()=>{var c=e.getBoundingClientRect().width;ImageWall.whRate;n._available=!0,n.setAttribute("oWidth",n.naturalWidth),n.setAttribute("oHeight",n.naturalHeight),i.classList.add("loaded"),i.style.backgroundImage="url("+n.src+")",a.style.width=n.naturalWidth+"px";var l=n.naturalWidth,u=n.naturalHeight;n.naturalHeight/n.naturalWidth>ImageWall.whRate?(i.classList.add("tall"),i.style.width=100*n.naturalWidth/n.naturalHeight*ImageWall.whRate+"%",i.style.paddingTop=100*ImageWall.whRate+"%",u=n.naturalWidth*ImageWall.whRate,l=u*n.naturalWidth/n.naturalHeight):(i.classList.remove("tall"),i.style.width="100%",i.style.paddingTop=100*n.naturalHeight/n.naturalWidth+"%"),a._wall&&(a._ready=!0,a._wall._callback(l,u)),s++,t.postMessage({title:"载入图片: "+s+" / "+o}),r()},n.onerror=()=>{n._available=!1,a.classList.add("failed"),s++,t.postMessage({title:"载入图片: "+s+" / "+o}),r()}})))}}})()}).call(this,a("950f"))}});
//# sourceMappingURL=index.js.map