(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f0a1c05"],{"3cd4":function(t,e,c){"use strict";c.r(e);var a=c("79c4");const s=Object(a["D"])("data-v-6923aaa9");Object(a["t"])("data-v-6923aaa9");const i={class:"infoPad"},n=Object(a["h"])("span",{class:"hint"},"文档数：",-1),o={ref:"count",class:"info"},l=Object(a["h"])("span",{class:"sep"},null,-1),r={class:"cateSelector"},h={class:"hint"},b={class:"articleList"},u={class:"article"},p={class:"controller right"},j={class:"category"};Object(a["r"])();const O=s((t,e,c,s,O,d)=>(Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["h"])("section",i,[n,Object(a["h"])("span",o,"0",512),l,Object(a["h"])("span",{class:"hint right clickable",onClick:e[1]||(e[1]=(...t)=>d.newArticle&&d.newArticle(...t))},"添加文档")]),Object(a["h"])("section",r,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(O.cateList,t=>(Object(a["q"])(),Object(a["d"])("span",{class:"cateItem clickable",onClick:e=>d.chooseCate(t.cate)},[Object(a["g"])(Object(a["z"])(t.name),1),Object(a["h"])("span",h,Object(a["z"])(t.count),1)],8,["onClick"]))),256))]),Object(a["h"])("section",b,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(O.list,t=>(Object(a["q"])(),Object(a["d"])("div",u,[Object(a["h"])("span",{class:"title",onClick:e=>d.openArticle(t.id)},Object(a["z"])(t.name),9,["onClick"]),Object(a["h"])("span",p,[Object(a["h"])("span",j,Object(a["z"])(t.category),1),Object(a["h"])("span",{class:"button",onClick:e=>d.modifyArticle(t.id)},"编辑",8,["onClick"]),Object(a["h"])("span",{class:"button",onClick:e=>d.removeArticle(t.id,t.title)},"删除",8,["onClick"])])]))),256))])],64)));var d={name:"LocalLibrary",data(){return{list:[],cateList:[]}},components:{},async mounted(){await this.updateList(),callPageLoaded()},unmounted(){},methods:{async updateList(t){var e=await BookShelf.getAllArticles(),c={},a=!t;this.$refs.count.innerText=e.length,e.reverse(),e=e.filter(e=>{e.author!==this.SiteOwner?e.name=e.title+" ("+e.author+")":e.name=e.title;var s=a;return e.category.length>0?(e.category.forEach(e=>{if(s=s||e===t,a){var i=c[e];i||(i={cate:e,name:CatePathMap[e]||e,count:0},c[e]=i),i.count++}}),e.category=e.category.map(t=>CatePathMap[t]||t).join("; ")):(e.category="未分类",s=t===e.category),s}),c=Object.keys(c).map(t=>c[t]),c.sort((t,e)=>e.count-t.count),a&&this.cateList.splice(0,this.cateList.length,...c),this.list.splice(0,this.list.length,...e)},newArticle(){this.$router.push({path:"/tools/markupEditor",query:{action:"newfile"}})},openArticle(t){this.$router.push({path:"/view",query:{l:t}})},modifyArticle(t){this.$router.push({path:"/tools/markupEditor",query:{action:t}})},removeArticle(t,e){showInfobox({title:"确认删除文章《"+e+"》么？",action:"yn",callback:async(e,c,a)=>{"yes"===e&&(await BookShelf.removeArticle(t),await this.updateList())}})},chooseCate(t){this.updateList(t)}}};c("b404");d.render=O,d.__scopeId="data-v-6923aaa9";e["default"]=d},"466f":function(t,e,c){},b404:function(t,e,c){"use strict";c("466f")}}]);
//# sourceMappingURL=chunk-7f0a1c05.js.map