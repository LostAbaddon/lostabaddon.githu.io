(()=>{const Z=Symbol("HIDDEN"),F=["GOD","THEONE","TITLE","AUTHOR","EMAIL","DESCRIPTION","STYLE","SCRIPT","DATE","KEYWORD","GLOSSARY","TOC","REF","LINK","IMAGES","VIDEOS","AUDIOS","ARCHOR","SHOWTITLE","SHOWAUTHOR","RESOURCES"],se=["toc","glossary","resources","images","videos","audios"],ie=["article","section","div","p","header","footer","aside","ul","ol","li","blockquote","pre","figure","figcaption"],U={system:/(.?)(if|else|for|while|do|continue|break|return|new|delete|try|catch|final|then|async|await|yield|null|undefined|nil|import|export|module|require|default)(.?)/g,function:/(.?)(const|var|let|function|class|Class|Number|String|Boolean|Integer|Float|Promise|Proxy|Array|ArrayBuffer|AysncFunction|Object|Function|Uint8Array|Uint16Array|Uint64Array|Int8Array|Int16Array|Int64Array|Buffer|BigInt)(.?)/g,operator:/(.?)(=>|>=|<=|\+=|\-=|\*=|\/=|\/|\+{1,2}|\-{1,2}|={1,3}|>{1,2}|<{1,2}|\-|\+|\*{1,2})(.?)/g,consts:/(.?)(\d+(\.\d*)?)(.?)/g,object:/(.?)(Math|console|window|process|document|Document|location|localStorage|sessionStorage|navigator|Navigator|Blob|BroadcastChannel|Cache|CacheStorage|CachedDB|History)(.?)/g},G={"\\":"slash","/":"antislash",_:"underline","*":"star","+":"plus","-":"minus","=":"equal","`":"dash","~":"wavy","!":"bang","?":"question",":":"colon","@":"at-circle","#":"sharp","^":"angle",$:"dollar","%":"percent","(":"left-bracket",")":"right-bracket","[":"left-square-bracket","]":"right-square-bracket","{":"left-curve-bracket","}":"right-curve-bracket","|":"vertical-line"},Q={};Object.keys(G).forEach(s=>Q[G[s].toLowerCase()]=s),Q.$="&#36;",F.forEach((s,a)=>F[a]=s.toLowerCase());const A={},k={},Y={},B={},R=(s=8)=>{var a="";for(let t=0;t<s;t++)a+=Math.floor(Math.random()*10)+"";return a};A.addExtension=(s,a=0,t=5)=>{if(a===0){let i=k._indexes_;i||(i=[],k._indexes_=i),i.includes(t)||(i.push(t),i.sort((l,r)=>l-r)),i=k[t],i||(i=[],k[t]=i),i.push(s)}else if(a===1){let i=Y._indexes_;i||(i=[],Y._indexes_=i),i.includes(t)||(i.push(t),i.sort((l,r)=>l-r)),i=Y[t],i||(i=[],Y[t]=i),i.push(s)}else if(a===2){let i=B._indexes_;i||(i=[],B._indexes_=i),i.includes(t)||(i.push(t),i.sort((l,r)=>l-r)),i=B[t],i||(i=[],B[t]=i),i.push(s)}};const le=s=>(s=`
`+s+`
`,s=s.replace(/(\r\n|\n\r)/g,`
`).replace(/\n([ 　]+)/g,(a,t)=>{var i=t.replace(/　/g,"  ").length;return i<4?`
`:a}),s=s.replace(/(\n[ 　\t>\-\+\*(\d+\.)]+)(`{3}|~{3}|\${2})/g,(a,t,i)=>t+`
`+i),F.forEach(a=>{var t=new RegExp("([\\w\\W]? *)\\["+a+"\\]( *[\\w\\W]?)","gi");s=s.replace(t,(i,l,r)=>l==="]"||r==="["||r==="("?i:l+"%"+a+"%"+r)}),s),ne=s=>(s=s.replace(/^\n+|\n+$/gi,""),s=s.replace(/\n{3,}/gi,`


`),s),T=(s,a,t=-Infinity,i)=>{var l=k._indexes_;if(!l)return"";var r=!i;return i=i||{},l.some(e=>{if(t>e||e>=0)return!0;for(var n=k[e],p=!0;p;)p=!1,n.forEach(h=>{var f;[s,f]=h.parse(s,a,i),f&&(p=!0)})}),s=ye(s),l.forEach(e=>{if(!(t>e)&&!(e<0))for(var n=k[e],p=!0;p;)p=!1,n.forEach(h=>{var f;[s,f]=h.parse(s,a,i),f&&(p=!0)})}),r&&(s=V(s,i)),s},K=(s,a,t=0,i)=>{a.parseLevel++;var l=[],r=!1;i||(r=!0,i={});var e=[];l=s.split(`
`),l.forEach((h,f)=>{var u=h.match(/^[ 　\t]*$/);if(h.length===0){e.push([f,1,0,0,0,0,0,0]);return}if(h.match(/^([=\-\+\*\._#]{3,}|~{4,})$/)){h.match(/^\-+$|^=+$/)?e.push([f,0,2,0,0,0,0,0]):h.match(/^~+$/)?e.push([f,0,2,0,0,1,0,0]):e.push([f,0,1,0,0,0,0,0]);return}if(u=h.match(/^(`{3}|~{3})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[2]?e.push([f,0,0,0,0,2,0,0,u[1]]):e.push([f,0,0,0,0,1,0,0,u[1]]);return}if(u=h.match(/^\${2}[ 　\t]*$/),u){u[2]?e.push([f,0,0,0,0,0,0,1]):e.push([f,0,0,0,0,0,0,1]);return}if(u=h.match(/^([\-\+\*~]|\d+\.)[ 　\t]+/),u){if(u=h.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[2]?e.push([f,0,0,0,1,2,0,0]):e.push([f,0,0,0,1,1,0,0]);return}if(u=h.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(\${2})[ 　\t]*$/),u){u[2]?e.push([f,0,0,0,1,0,0,1]):e.push([f,0,0,0,1,0,0,1]);return}e.push([f,0,0,0,1,0,0,0]);return}if(u=h.match(/^(> *)+/),u){if(u=h.match(/^(> *)+[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[2]?e.push([f,0,0,1,0,2,0,0]):e.push([f,0,0,1,0,1,0,0]);return}if(u=h.match(/^(> *)+[ 　\t]+(\${2})[ 　\t]*$/),u){u[2]?e.push([f,0,0,1,0,0,0,1]):e.push([f,0,0,1,0,0,0,1]);return}e.push([f,0,0,1,0,0,0,0]);return}if(u=h.match(/^([ 　\t]+)/),u){if(u=h.match(/(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[1]?e.push([f,0,0,1,1,2,0,0]):e.push([f,0,0,1,1,1,0,0]);return}if(u=h.match(/(\${2})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[1]?e.push([f,0,0,1,1,0,0,1]):e.push([f,0,0,1,1,0,0,1]);return}e.push([f,0,0,1,1,0,0,0]);return}if(u=h.match(/\|/g),u){let m=h.match(/\\\|/g);if(!m||!!m&&m.length!==u.length){let o=!0;for(m=h;o;){o=!1;let c=m.replace(/\([^\(\)\[\]\{\}]+?\)/g,"");c=c.replace(/\[[^\(\)\[\]\{\}]+?\]/g,""),c=c.replace(/\{[^\(\)\[\]\{\}]+?\}/g,""),o=c!==m,m=c}if(m.indexOf("|")>=0){e.push([f,0,0,0,0,0,1,0]);return}}}});var n={};e.forEach(h=>{n[h[0]]=h});var p=!1;if(e.length>0){if(p=fe(e,n,l,a,i)||p,e.length>0&&(p=ue(e,n,l,a,i)||p),e.length>0&&(p=he(e,n,l,a,i)||p),r&&t===0&&!!a.metas.linenumber){let h=0;l.forEach((f,u)=>{if(!!f&&!f.match(/^%[\w\-]+%$/)){var m=n[u];if(!(!!m&&(m[1]>0||m[2]>0))&&!f.match(/^[ 　\t>\+\-\*`\^\|_~=\{\}<]$/)&&!f.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))$/)&&!f.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\[[^\(\)\[\]\{\}]*?\])$/)){var o=f.match(/\{[<\|>]\}$/);o?(o=o[0],f=f.substr(0,f.length-o.length)+'<span name="line-'+h+'"></span>'+o):f=f+'<span name="line-'+h+'"></span>',h++,l[u]=f}}}),a.metas.totalLineCount=h}[l,n]=M(e,n,l),e.length>0&&(p=pe(e,n,l,a,i)||p,[l,n]=M(e,n,l)),e.length>0&&(p=me(e,n,l,a,i)||p,[l,n]=M(e,n,l))}return p=oe(e,n,l,a,i)||p,[l,n]=M(e,n,l),p=ce(e,n,l,a,i)||p,l=l.map(h=>{if(h===null||h===void 0||h.length===0)return"";var f="";if(r)h.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/)?f=V(h,i,!1):(f=q(h,a),f=V(f,i,!1));else{f=q(h,a);let u="param-"+R();i[u]=f,f="%"+u+"%"}return f}),a.parseLevel--,a.parseLevel>0&&(l=l.join("")),l},M=(s,a,t)=>(t=t.map((i,l)=>[l,i]),t=t.filter(i=>!(!i[1]&&i[1]!=="")),t.forEach((i,l)=>{var r=i[0],e=a[r];!e||(e[0]=l)}),a={},s.forEach(i=>{a[i[0]]=i}),t=t.map(i=>i[1]),[t,a]),q=(s,a)=>{var t="<p",i="</p>",l=[],r=s.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*/,""),e=r.match(/^\{[<\|>]\}/);e&&(e=e[0],e==="{<}"?l.push("align-left"):e==="{|}"?l.push("align-center"):e==="{>}"&&l.push("align-right"),s=s.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*\{[<\|>]\}[ 　\t]*/,(p,h)=>h||"")),r=s.replace(/[ 　\t]*(<\/\w+.*?>)?[ 　\t]*$/,""),e=r.match(/\{[<\|>]\}$/),e&&(e=e[0],e==="{<}"?l.push("align-left"):e==="{|}"?l.push("align-center"):e==="{>}"&&l.push("align-right"),s=s.replace(/[ 　\t]*\{[<\|>]\}[ 　\t]*(<\/\w+.*?>)?[ 　\t]*$/,(p,h)=>h||"")),r=s.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*/,"");var n=r.match(/^:+/);return!!n&&!r.match(/^:([\w\-\.]+?):/)&&(n=n[0],l.push("indent","indent-"+n.length),s=s.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*:+/,(p,h)=>h||"")),l.length>0&&(t=t+' class="'+l.join(" ")+'"'),t=t+">",s.length===0?"":t+s+i},fe=(s,a,t,i,l)=>{var r=[];if(s.forEach(f=>{!f[7]||r.push(f)}),r.length===0)return!1;if(r.length===1)return r[0][7]=0,!1;var e=r.length,n=r[0];n[7]=2;for(let f=1;f<e;f++){let u=r[f];n[7]===2?(u[3]=n[3],u[4]=n[4],u[7]=3):n[7]===3&&(u[7]=2),n=u}r[r.length-1][7]===2&&(r[r.length-1][7]=0),r.forEach(f=>{f[7]===1&&(f[7]=0)});var p=[];r=r.filter(f=>f[7]<2?!1:(f[7]===2&&p.push(f[0]),!0)),e=r.length;for(let f=e-1;f>0;f-=2){let u=r[f-1][0];p.includes(u)||r.splice(f-1,2)}var h=[];e=r.length;for(let f=0;f<e;f+=2)h.push([r[f][0],r[f+1][0]]);return h.forEach(f=>{var u=['<p class="latex block">$$'];for(let o=f[0]+1;o<f[1];o++)u.push(t[o]);u.push("$$</p>"),u=u.join("<br>");var m="latex-"+R();i.finals[m]=u,t[f[0]]="%"+m+"%";for(let o=f[0]+1;o<=f[1];o++)t[o]=null;for(let o=f[0];o<=f[1];o++){let c=a[o];if(!c)continue;let v=s.indexOf(c);v>=0&&s.splice(v,1),delete a[o],c[0]=-1}}),h.length>0},ue=(s,a,t,i,l)=>{var r=[];if(s.forEach(m=>{!m[5]||r.push(m)}),r.length===0)return!1;if(r.length===1)return r[0][5]=0,!1;var e=r.length,n=r[0],p=[],h;n[5]=2,h=n[8];for(let m=1;m<e;m++){let o=r[m];if(!!h&&o[8]!==h){o[5]=0;continue}if(o[5]===2){if(m===e-1&&(o[5]=0),n[5]!==3){n[5]=0;continue}h=o[8]}n[5]===2?(o[3]=n[3],o[4]=n[4],o[5]=3,h=null):n[5]===3&&(o[5]=2),n=o}r[r.length-1][5]===2&&(r[r.length-1][5]=0),r.forEach(m=>{m[5]===1&&(m[5]=0)});var f=[];r=r.filter(m=>m[5]<2?!1:(m[5]===2&&f.push(m[0]),!0)),e=r.length;for(let m=e-1;m>0;m-=2){let o=r[m-1][0];f.includes(o)||r.splice(m-1,2)}var u=[];e=r.length;for(let m=0;m<e;m+=2)u.push([r[m][0],r[m+1][0]]);return u.forEach(m=>{var o=t[m[0]],c=o.match(/(`{3,}|~{3,})[ 　\t]*/)[0],v=o.indexOf(c);c=o.substr(v+c.length,o.length),c=c.replace(/^[ 　\t]+|[ 　\t]+$/g,""),c=c.toLowerCase(),(!c||c===""||c==="text")&&(c="plaintext");var g='<pre lang="'+c+'"><code>',w="</code></pre>",N=!1,D=[],Oe=[];if(c==="plaintext")for(let O=m[0]+1;O<m[1];O++){let d=t[O];D.push("<p>"+d+"</p>")}else for(let O=m[0]+1;O<m[1];O++){let d=t[O],C=[],I=-1,W=null,X=[],H=!1;if(N){let E=d.match(/(\\*)`/);if(!E)C.push([0,d.length-1]);else{let _=E[1].length;_>>1<<1!==_?C.push([0,d.length-1]):(N=!1,H=!0,I=0,W="`",d.replace(/(\\*)(['"`])/g,(b,L,y,S)=>{var x=L.length;!!W&&y!==W||x>>1<<1===x&&(S+=x,I===-1?(I=S,W=y,y==="`"&&(H=!0)):(C.push([I,S]),I=-1,W=null,y==="`"&&(H=!1)))}),H&&(C.push([I,d.length-1]),N=!0))}}else d.replace(/(\\*)(['"`])/g,(E,_,b,L)=>{var y=_.length;!!W&&b!==W||y>>1<<1===y&&(L+=y,I===-1?(I=L,W=b,b==="`"&&(H=!0)):(C.push([I,L]),I=-1,W=null,b==="`"&&(H=!1)))}),H&&(C.push([I,d.length-1]),N=!0);for(let E=C.length-1;E>=0;E--){let _=C[E],b=d.substring(0,_[0]),L=d.substring(_[0],_[1]+1),y=d.substring(_[1]+1,d.length),S="[%:"+X.length+":%]";X.push(L),d=b+S+y}d=d.replace(U.operator,(E,_,b,L,y)=>{var S=C.some(j=>y>=j[0]&&y<=j[1]);if(S)return E;var x=(_||"")+'<span CLASS="operatorword">'+b+"</span>"+(L||"");return x}),d=d.replace(U.system,(E,_,b,L,y)=>{var S=C.some(j=>y>=j[0]&&y<=j[1]);if(S||!!_&&_.match(/[\w\d_\.]/)||!!L&&L.match(/[\w\d_\.]/))return E;var x=(_||"")+'<span CLASS="flowword">'+b+"</span>"+(L||"");return x}),d=d.replace(U.function,(E,_,b,L,y)=>{var S=C.some(j=>y>=j[0]&&y<=j[1]);if(S||!!_&&_.match(/[\w\d_\.]/)||!!L&&L.match(/[\w\d_]/))return E;var x=(_||"")+'<span CLASS="keyword">'+b+"</span>"+(L||"");return x}),d=d.replace(U.consts,(E,_,b,L,y,S)=>{var x=C.some(ae=>S>=ae[0]&&S<=ae[1]);if(x||!!_&&_.match(/[\w\d_\.]/)||!!y&&y.match(/[\w\d_\.]/))return E;var j=(_||"")+'<span CLASS="constsword">'+b+"</span>"+(y||"");return j}),d=d.replace(U.object,(E,_,b,L,y)=>{var S=C.some(j=>y>=j[0]&&y<=j[1]);if(S||!!_&&_.match(/[\w\d_\.]/)||!!L&&L.match(/[\w\d_]/))return E;var x=(_||"")+'<span CLASS="objectword">'+b+"</span>"+(L||"");return x}),X.forEach((E,_)=>{var b='\\[%:(<span CLASS="constsword">)?'+_+"(</span>)?:%\\]";b=new RegExp(b),d=d.replace(b,'<span CLASS="constsword">'+E+"</span>")}),d=d.replace(/<span CLASS="/g,'<span class="'),D.push("<p>"+d+"</p>")}D=D.join(""),D=g+D+w;var te="codeblock-"+R();i.finals[te]=D,t[m[0]]="%"+te+"%";for(let O=m[0]+1;O<=m[1];O++)t[O]=null;for(let O=m[0];O<=m[1];O++){let d=a[O];if(!d)continue;let C=s.indexOf(d);C>=0&&s.splice(C,1),delete a[O],d[0]=-1}}),u.length>0},he=(s,a,t,i,l)=>{var r=[];if(s.forEach(f=>{!f[6]||r.push(f)}),r.length!==0){var e=[],n=0,p=r[0][0];e.push([r[0]]);var h=r.length;for(let f=1;f<h;f++){let u=r[f];u[0]===p+1?e[n].push(u):(n++,e[n]=[u]),p=u[0]}return e=e.filter(f=>!(f.length<2)),e.forEach(f=>{ve(f,s,a,t,i,l)}),!0}},pe=(s,a,t,i,l)=>{var r=0,e=t.length;if(s.forEach((o,c)=>{if(o[3]+o[4]!==0){var v=o[0];v<e&&(e=v),v>r&&(r=v)}}),e>r)return!1;for(let o=r+1;o<t.length-1;o++){let c=a[o],v=a[o+1];if(!!c&&c[1]>0&&!!v&&v[1]>0)break;r=o}if(r===t.length-2){let o=t.length-1,c=a[o];(!c||c[1]===0)&&(r=o)}var n=0,p=[[[e,a[e]]]],h=!1,f=!0;a[e][3]>0&&(h=!0);for(let o=e+1;o<=r;o++){var u=a[o];if(!u){f&&p[n].push([o,null]);continue}if(u[1]){if(!f)continue;let c=a[o+1];if(!c||c[1]>0){f=!1;continue}p[n].push([o,u]);continue}if(u[3]+u[4]===0){f&&p[n].push([o,u]);continue}if(f){p[n].push([o,u]);continue}n++,p[n]=[],a[o][3]>0?h=!0:h=!1,f=!0,p[n].push([o,u])}var m=!1;return p.forEach(o=>{o.forEach(w=>{var N=w[0];w[1]||(t[N]="    "+t[N])});var c=0,v=o[0][0],g=t[v],c=-1;g.match(/^[ 　\t>]/)?c=0:g.match(/^[\-\+]|[\*~][ 　\t]/)?c=1:g.match(/^\d+\.[ 　\t]/)&&(c=2),!(c<0)&&(change=!0,c===0?de(o,s,a,t,i,l):c===1?J(!1,o,s,a,t,i,l):c===2&&J(!0,o,s,a,t,i,l))}),m},me=(s,a,t,i,l)=>{var r=[],e=[];s.forEach(n=>{if(n[2]!==0){var p=n[0],h=a[p-1];if(h)h[1]>0&&r.push([p,t[p].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let f=t[p-1];if(p===0||!!f.match(/^%[\w\-]+%$/))r.push([p,t[p].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let u=t[p].substr(0,1);u==="="?e.push([p-1,1]):u==="-"?e.push([p-1,2]):u==="~"?e.push([p-1,3]):u==="+"?e.push([p-1,3]):u==="_"?e.push([p-1,3]):u==="*"?e.push([p-1,4]):u==="#"?e.push([p-1,5]):u==="."&&e.push([p-1,6]),t[p]=null}}}});for(let n=0;n<t.length;n++){let p=t[n];if(!p)continue;let h=p.match(/^(#+)[ 　\t]*/);if(h){let f=h[0],u=h[1];f!==p&&p.indexOf(f+"[")!==0&&(e.push([n,u.length]),t[n]=p.replace(/^#+[ 　\t]*|[ 　\t]*#+$/g,""))}}return r.length+e.length===0?!1:(e.sort((n,p)=>n[0]-p[0]),r.forEach(n=>{var[p,h]=n,f="headline-"+R(),u="<hr";h==="="?u=u+' class="heavy">':h==="-"?u=u+' class="light">':h==="*"?u=u+' class="star">':h==="~"?u=u+' class="wavy">':h==="."?u=u+' class="dotted">':h==="_"?u=u+' class="dashed">':h==="+"?u=u+' class="strong">':h==="#"?u=u+' class="heavystrong">':u=u+">",l[f]=u,t[p]="%"+f+"%"}),e.forEach(n=>{var[p,h]=n,f="header-"+R(),u="h"+(h||1),m=t[p];m=T(m,i),m=m.replace(/^[ 　\t\n]+|[ 　\t\n]+$/,""),m="<"+u+">"+m+"</"+u+">",l[f]=m,t[p]="%"+f+"%"}),!0)},oe=(s,a,t,i,l)=>{for(var r=[],e=!0;e;)e=!1,t.forEach(n=>{if(n.length===0)return r.push(n);n=n.replace(/(\])[ 　\t]*(\[([\w \-\.]+)\])/g,(u,m,o,c)=>{var v=i.refs[c],g;if(!v||v.indexOf("://")<0&&v.indexOf("@")<0&&!v.match(/^\.{0,2}[\\\/]/)||v.indexOf(`
`)>=0){if(g=i.metas[c.toLowerCase()],!g||g.indexOf("://")<0&&g.indexOf("@")<0&&!g.match(/^\.{0,2}[\\\/]/)||g.indexOf(`
`)>=0)return u;v=g}return m+"("+v+")"});for(var p=[],h=[],f=!0;f;)f=!1,n=n.replace(/[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))/g,(u,m,o)=>(f=!0,o.match(/[ 　\t]+"(left|right)"\)$/)?h.push(u):p.push(u),""));n=n.replace(/^[ 　\t]+|[ 　\t]+$/g,""),h.forEach(u=>r.push(u)),n.length>0&&(p.length>0&&(e=!0),r.push(n)),p.forEach(u=>r.push(u))}),t.splice(0,t.length),r.forEach(n=>t.push(n)),r=[];return!0},ce=(s,a,t,i,l)=>{var r=[],e=[],n=[],p=-1;t.forEach((h,f)=>{if(!h||h.length===0){p=-1;return}var u=h.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/);if(u){p=-1;return}if(u=h.match(/^[@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/),u){n.push([f,h]),p=-1;return}u=h.match(/^!\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/);var m=u?1:0;m===p?m===0?r[r.length-1].push([f,h]):m===1&&e[e.length-1].push([f,h]):(m===0?r[r.length]=[[f,h]]:m===1&&(e[e.length]=[[f,h]]),p=m)}),e=e.filter(h=>{var f=h.length>1;return h.length===1&&n.push(h[0]),f}),r.forEach(h=>{var f=[],u=h[0][0];h.forEach(m=>{var o=m[0],c=m[1];c.length!==0&&(f.push(T(c,i)),t[o]=null)}),f=f.join("<br>"),t[u]=f}),e.forEach(h=>{var f=[],u=h[0][0];h.forEach(o=>{f.push(T(o[1],i)),t[o[0]]=null}),f=f.join(""),f='<div class="image-wall">'+f+"</div>";var m="imagewall-"+R();l[m]=f,t[u]="%"+m+"%"}),n.forEach(h=>{var[f,u]=h;u=T(u,i);var m="resource-"+R();l[m]=u,t[f]="%"+m+"%"})},ve=(s,a,t,i,l,r)=>{var e=!0,n=null,p=-1;s.some((c,v)=>{var g=i[c[0]];g=g.replace(/^[ 　\t]+|[ 　\t]+$/g,"");var w=g.match(/[\|:\-]+/);if(!!w&&(w=w[0],g===w))return n=w,p=c[0],v===0&&(e=!1),!0}),n?(n=n.replace(/^\||\|$/g,""),n=n.split("|"),n=n.map(c=>c.match(/^:\-:$/)?1:c.match(/^:\-$/)?0:c.match(/^\-:$/)?2:3)):(e=!1,n=[]);var h=[],f=0;s.forEach(c=>{var v=c[0];if(v!==p){var g=ge(i[v]);h.push(g),g.length>f&&(f=g.length)}});for(let c=n.length;c<f;c++)n.push("");for(let c=0;c<h.length-1;c++){let v=h[c],g=v?v.length:f;for(let w=v.length;w<f;w++)v.push("")}var u;e&&(u=h[0],h.shift());for(let c=0;c<f;c++){if(n[c]!==3)continue;let v=!0;h.some(g=>{var w=g[c];if(!!w&&w*1!==w)return v=!1,!0}),v?n[c]=2:n[c]=0}var m="<table>";e&&(m+="<thead><tr>",u.forEach((c,v)=>{c=T(c,l);var g='<th align="',w=n[v];w===1?g+="center":w===2?g+="right":g+="left",g+='">'+c+"</td>",m+=g}),m+="</tr></thead>"),m+="<tbody>",h.forEach(c=>{m+="<tr>",c.forEach((v,g)=>{v=T(v,l);var w='<td align="',N=n[g];N===1?w+="center":N===2?w+="right":w+="left",w+='">'+v+"</td>",m+=w}),m+="</tr>"}),m+="</tbody></table>";var o="table-"+R();r[o]=m,u=s[0][0],total=s.length;for(let c=0;c<total;c++){let v=s[c],g=v[0];i[g]=null,delete t[g];let w=a.indexOf(v);w>=0&&a.splice(w,1),v[0]=-1}i[u]="%"+o+"%"},ge=s=>{s.substr(0,1)!=="|"&&(s="|"+s),s.substr(s.length-1,1)!=="|"&&(s=s+"|");var a=s.length,t=0,i=[],l=0;for(let r=1;r<a;r++){let e=s.substr(r,1);if(e==="|"&&t===0){i.push(s.substr(l+1,r-l-1)),l=r;continue}"([{<".indexOf(e)>=0?t++:">}])".indexOf(e)>=0&&t--}return i},de=(s,a,t,i,l,r)=>{var e="quote",n=i[s[0][0]];if(n=n.match(/^>[ 　\t]*\[([\w\W]+?)\]/),n){let u=n[1];u=u.replace(/^[ 　\t]+|[ 　\t]+$/g,""),u.length>0&&!l.metas[u]&&!l.blocks[u]&&(e=u)}var p=!0;n=s.map((u,m)=>{var o=u[0],c=i[o];m>0&&(p=p&&!!c.match(/^(\t|　　|    | 　 |  　|　  )/));var v=c.replace(/^(\t|　　|    | 　 |  　|　  )/,"");return v!==c&&p?c=v:(head=c.match(/^>[ 　\t]*/),head&&(head=head[0],c=c.replace(head,""))),c}),n[0]=n[0].replace(new RegExp("^[ \u3000\\t]*\\["+e.replace(/\\/g,"\\\\")+"\\][ \u3000\\t]*"),""),n=n.join(`
`),n=n.replace(/^\n+|\n+$/g,"");var h='<blockquote class="'+e+'">';n=K(n,l,2,r),h+=n,h+="</blockquote>";var f="blockquote-"+R();r[f]=h,s.forEach(u=>{var m=u[0];i[m]=null,delete t[m];var o=a.indexOf(u[1]);o>=0&&a.splice(o,1)}),i[s[0][0]]="%"+f+"%"},J=(s,a,t,i,l,r,e)=>{var n=[],p=-1;a.forEach(u=>{var m=u[0],o=l[m];if(head=o.match(/^([\-\+\*>~]|\d+\.)[ 　\t]+/),head){o=o.replace(head[0],""),p++,n[p]=[o];return}o=o.replace(/^(\t|　　|    | 　 |  　|　  )/,""),n[p].push(o)}),n=n.map(u=>(u=u.join(`
`),u=u.replace(/^\n+|\n+$/g,""),u));var h="";s?h="<ol>":h="<ul>",n.forEach(u=>{h+="<li>",h+=K(u,r,2,e),h+="</li>"}),s?h+="</ol>":h+="</ul>";var f="list-"+R();e[f]=h,a.forEach(u=>{var m=u[0];l[m]=null,delete i[m];var o=t.indexOf(u[1]);o>=0&&t.splice(o,1)}),l[a[0][0]]="%"+f+"%"},we=(s,a)=>{var t=[[]],i=0,l=[0],r=[];if(s.forEach(e=>{var n=!1;e=e.replace(/^<h(\d+)>/i,(p,h)=>{n=!0,h=h*1,h===1&&(i++,t[i]=[]),l[h-1]=(l[h-1]||0)+1;for(let u=h;u<l.length;u++)l[u]=0;var f="chap";for(let u=0;u<h;u++)f+="-"+(l[u]||1);return p=p+'<a name="'+f+'">',r.push([h,f,e.replace(/<[\w\W]+?>/gi,"")]),p}).replace(/<\/h(\d+)>$/i,p=>"</a>"+p).replace(/\{([\w \-\.]+)\}/g,(p,h)=>{var f=a.termList[h];return f?(Array.isArray(f)&&(f=f[0]),'<a class="terminology" name="'+h+'" href="#ref-'+h+'"><strong>'+f+"</strong></a>"):p}),t[i].push(e)}),t=t.filter(e=>e.length>0),a.chapList=r,t=t.map(e=>{var n=[],p="<section>",h="</section>";return e.forEach((f,u)=>{var m=!1;f=f.replace(/<a class="notemark" type="footnote" name="([\w \-\.]+?)">/g,(o,c)=>{m=!0,n.push(c);var v=o.substr(0,o.length-1)+' href="#footnote-'+c+'">';return v}),m&&(e[u]=f)}),e=e.join(""),n.length===0||(n=n.map((f,u)=>{var m=a.refs[f],o=a.footnotes.indexOf(f);return u++,e=e.replace(new RegExp("%%FN-"+o+"%%","g"),u),'<p class="footnote-content"><a class="index" name="footnote-'+f+'">'+u+"\uFF1A</a>"+m+"</p>"}),e+='<hr class="footnote-line"><footer><p class="footnote-title">\u811A\u6CE8\uFF1A</p>',e+=n.join(""),e+='</footer><hr class="footnote-line end">'),p+e+h}),!!a.endnotes&&a.endnotes.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="EndNote">\u5C3E\u6CE8</a></h1>',a.endnotes.forEach((n,p)=>{e+='<p class="endnote-content"><a class="index" name="endnote-'+n+'">'+(p+1)+"\uFF1A</a>"+a.refs[n]+"</p>"}),e+="</section>",t.push(e)}if(a.metas.glossary&&!!a.termList&&a.termList.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="Glossary">\u672F\u8BED\u8868</a></h1>',e+=re(a),e+="</section>",t.push(e)}if(a.image=a.image||[],a.video=a.video||[],a.audio=a.audio||[],a.metas.resources&&a.image.length+a.video.length+a.audio.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="ResourceList">\u8D44\u6E90\u8868</a></h1>',a.image.length>0&&(e+='<h2><a name="ImageResourceList">\u56FE\u7247</a></h2>',e+=P(a,"image")),a.video.length>0&&(e+='<h2><a name="VideoResourceList">\u89C6\u9891</a></h2>',e+=P(a,"video")),a.audio.length>0&&(e+='<h2><a name="AudioResourceList">\u97F3\u9891</a></h2>',e+=P(a,"audio")),e+="</section>",t.push(e)}if(a.metas.showtitle){let e='<header class="article-title">';if(e+="<p>"+a.metas.title+"</p>",a.metas.showauthor&&(a.metas.author&&(e+='<p class="author">',a.metas.email&&(e+='<a href="mailto:'+a.metas.email+'">'),e+=a.metas.author,a.metas.email&&(e+="</a>"),e+="</p>"),a.metas.date)){e+='<p class="author date">';let n=a.metas.date*1;if(isNaN(n))n=a.metas.date;else{n=new Date(n);let p=n.getYear()+1900,h=n.getMonth()+1;h<10&&(h="0"+h);let f=n.getDate();f<10&&(f="0"+f);let u=n.getHours();u<10&&(u="0"+u);let m=n.getMinutes();m<10&&(m="0"+m);let o=n.getSeconds();o<10&&(o="0"+o),n=p+"/"+h+"/"+f+" "+u+":"+m+":"+o}e+=n,e+="</p>"}e+="</header>",t.unshift(e)}return t},_e=(s,a)=>{for(var t=!0,i=0;t&&(t=!1,s=s.map(l=>(l=l.replace(/\[([\w \-\.]+?)\]/g,(r,e,n)=>{var p=l.lastIndexOf("<sup>",n),h=l.lastIndexOf("</sup>",n);if(p>h)return r;var f=a.blocks[e];return f?(t=!0,f):r}),l)),i++,i!==10););return s},Ee=(s,a)=>{var t=(a.metas.LANG||"zh").toLowerCase();if(s=s.map(i=>(i=i.replace(/%glossary%/gi,l=>re(a)),i=i.replace(/%resources%/gi,l=>P(a,"image")+P(a,"video")+P(a,"audio")),i=i.replace(/%images%/gi,l=>P(a,"image")),i=i.replace(/%videos%/gi,l=>P(a,"video")),i=i.replace(/%audios%/gi,l=>P(a,"audio")),i=i.replace(/%toc%(\{[\w\W]+?\})*/gi,l=>{var r=l.match(/\{[\w\W]+?\}/g),e="\u76EE\u5F55",n=3;return r&&r.forEach(p=>{p=p.substr(1,p.length-2);var h=p*1;isNaN(h)?e=p:n=h}),a.toced=!0,ee(a,e,n)}),Object.keys(a.metas).forEach(l=>{var r=l.toLowerCase();se.includes(l)||(r=a.metas[l],r===!0||r===!1?t==="zh"?r=r?"\u662F":"\u5426":r=r?"On":"Off":Array.isArray(r)&&(t==="zh"?r=r.join("\u3001"):r=r.join(", ")),i=i.replace(new RegExp("%"+l+"%","gi"),e=>r))}),i=i.replace(/%([\w \-\.]+)%/g,(l,r)=>{var e=a.finals[r];return e||l}),i)),a.metas.toc&&!a.toced){let i=ee(a,"\u76EE\u5F55",3);i.indexOf('<p class="content-')>=0&&(i="<section>"+i+"</section>",a.metas.showtitle?s.splice(1,0,i):s.unshift(i))}return s},ee=(s,a,t)=>{var i='<h1 name="ContentTable">'+a+'</h1><aside class="content-table">';return s.chapList.forEach(l=>{if(!(l[0]>t)){var r='<p class="content-item level-'+l[0]+'">';for(let e=0;e<l[0];e++)r+='<span class="content-indent"></span>';r+='<a class="content-link" href="#'+l[1]+'">'+l[2]+"</a>",r+="</p>",i+=r}}),!!s.endnotes&&s.endnotes.length>0&&(i+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#EndNote">\u5C3E\u6CE8</a></p>'),s.metas.glossary&&!!s.termList&&s.termList.length>0&&(i+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#Glossary">\u672F\u8BED\u8868</a></p>'),s.metas.resources&&s.image.length+s.video.length+s.audio.length>0&&(i+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#ResourceList">\u8D44\u6E90\u8868</a></p>',s.image.length>0&&(i+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#ImageResourceList">\u56FE\u7247</a></p>'),s.video.length>0&&(i+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#VideoResourceList">\u89C6\u9891</a></p>'),s.audio.length>0&&(i+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#AudioResourceList">\u97F3\u9891</a></p>')),i+="</aside>",i},re=s=>{var a="";return s.termList===0?"":(s.termList.forEach(t=>{var[i,l]=t,r=s.terms[i],e='<p class="glossary-item">';e+='<a class="glossary-indent" name="ref-'+i+'">'+l+"</a>",e+=r,e+="</p>",a+=e}),a)},P=(s,a)=>{var t=s[a];if(!t||!Array.isArray(t)||t.length===0)return"";var i=[],l="<ul>";return t.forEach(r=>{var e=r[1];i.includes(e)||(i.push(e),l+='<li><a href="'+e+'" target="_blank">'+e+"</a></li>")}),l+="</ul>",l},ye=s=>(s=s.replace(/(\\+)(.)/g,(a,t,i)=>{var l=Math.floor(t.length/2),r=l*2!==t.length,e="",n="%"+G["\\"]+"%";for(let p=0;p<l;p++)e+=n;if(r){let p=G[i];p?e=e+"%"+p+"%":e=e+i}else e=e+i;return e}),s),V=(s,a,t=!0)=>{for(var i=!0;i;)i=!1,s=s.replace(/\%([\w \-]+?)\%/g,(l,r)=>{var e=a[r];return e?(i=!0,e):l});if(!t)return s;for(i=!0;i;)i=!1,s=s.replace(/\%([\w \-]+?)\%/g,(l,r)=>{var e=a[Z][r.toLowerCase()];return e?(i=!0,e):l});return s=s.replace(/\n+/g,"<br>"),s=s.replace(/\/{2}/g,(l,r)=>{if(r===0)return"<br>";var e=s.substr(r-1,1);return e===":"?l:"<br>"}),s=s.replace(/^(<\/?br>)+|(<\/?br>)+$/gi,"<br>"),s},Le=s=>{if(!s)return[];s=s.split(/[ ,，；;、　]+/).filter(t=>t.length>0);var a=[];return s.forEach(t=>{a.includes(t)||a.push(t)}),a},be=(s,a)=>{for(var t={},i=!0;i;)i=!1,a=a.replace(/\n([A-Z\u0800-\uffff]+?) *[:：] *([\w\W]*?)\n/,(l,r,e)=>e.length===0||(r==="\u6807\u9898"?r="title":r==="\u4F5C\u8005"?r="author":r==="\u7B80\u4ECB"?r="description":r==="\u5173\u952E\u8BCD"?r="keyword":r==="\u66F4\u65B0"?r="date":r=r.toLowerCase(),!F.includes(r))?l:(i=!0,t[r]=e,`
`));if(!!t.showtitle&&["on","yes","true"].includes(t.showtitle.toLowerCase())?t.showtitle=!0:t.showtitle=!1,!!t.glossary&&["on","yes","true"].includes(t.glossary.toLowerCase())?t.glossary=!0:t.glossary=!1,!!t.links&&["on","yes","true"].includes(t.links.toLowerCase())?t.links=!0:t.links=!1,!!t.refs&&["on","yes","true"].includes(t.refs.toLowerCase())?t.refs=!0:t.refs=!1,!!t.terms&&["on","yes","true"].includes(t.terms.toLowerCase())?t.terms=!0:t.terms=!1,!!t.resources&&["on","yes","true"].includes(t.resources.toLowerCase())?t.resources=!0:t.resources=!1,!!t.toc&&["on","yes","true"].includes(t.toc.toLowerCase())?t.toc=!0:t.toc=!1,s.metas=t,s.metas.keyword=Le(s.metas.keyword),s.metas.date)try{s.metas.date=new Date(s.metas.date).getTime()}catch{delete s.metas.date}for(s.metas.god=s.metas.theone='<a href="mailto:lostabaddon@gmail.com">LostAbaddon</a>',s.metas.script?s.metas.script=s.metas.script.split(/[,; 　\t]+/):s.metas.script=[],s.metas.style?s.metas.style=s.metas.style.split(/[,; 　\t]+/).map(l=>l.replace(/\{[\w\W]*\}/,"")):s.metas.style=[],s.termList=s.termList||[],s.mainParser=!1,s.refs={},i=!0;i;)i=!1,a=a.replace(/\n\[([\w \-\.\+\=\\\/]+?)\] *[:：] *([\w\W]+?)\n([\n\[])/,(l,r,e,n,p)=>(r=r.trim(),e=e.trim(),r.length===0||e.length===0?l:(s.refs[r]=e,i=!0,`
`+n)));for(s.blocks={},i=!0;i;)i=!1,a=a.replace(/\[:([\w \-\.\+\=\\\/]+?):\]([\w\W]*?)\n*\[:\1:\]/g,(l,r,e)=>{if(r=r.trim(),!(r.length===0||e.length===0))return s.blocks[r]=e,i=!0,""});return Object.keys(s.refs).forEach(l=>{var r=s.refs[l];r=T(r,s),r=r.replace(/\%([\w \-]+?)\%/g,(e,n)=>{var p=Q[n.toLowerCase()];return p||e}),s.refs[l]=r}),Object.keys(s.blocks).forEach(l=>{var r=s.blocks[l],e=r.match(/^\n+/);r=r.trim();var n;s.parseLevel=0,e?n=K(r,s,1):n=[T(r,s)],s.blocks[l]=n.join("")}),s.anchors=[],s.terms={},s.notes={},a.replace(/\] *(\[[\^:]([\w ]+?)\]|\{([\w ]+?)\})/g,(l,r,e,n)=>{var p=e||n;s.refs[p]?r.substr(0,1)==="{"?s.terms[p]=s.refs[p]:s.notes[p]=s.refs[p]:r.substr(0,1)==="{"&&!s.anchors.includes(p)&&s.anchors.push(p)}),a=ne(a),a};A.fullParse=(s,a)=>{var t={finals:{},toced:!1};s=le(s),s=be(t,s),a&&Object.keys(a).forEach(r=>{let e=a[r];r=r.toLowerCase(),!(["title","author","email","date"].indexOf(r)>=0)&&e!=null&&(t.metas[r]=e)}),t.parseLevel=0,t.mainParser=!0,t.metas.title=t.metas.title||"\u65E0\u540D\u6587",a.overwrite?(t.metas.title=a.title?a.title:t.metas.title,t.metas.author=a.author?a.author:t.metas.author,t.metas.email=a.email?a.email:t.metas.email,t.metas.date=a.date?a.date:t.metas.date):(t.metas.title=t.metas.title?t.metas.title:a.title,t.metas.author=t.metas.author?t.metas.author:a.author,t.metas.email=t.metas.email?t.metas.email:a.email,t.metas.date=t.metas.date?t.metas.date:a.date),s=K(s,t),s=s.map(r=>r.replace(/\%([\w \-]+?)\%/g,(e,n)=>{var p=Q[n.toLowerCase()];return p||e})),s=_e(s,t),s=we(s,t),s=Ee(s,t),t.metas.classname?s='<article class="'+t.metas.classname+'">'+s.join("")+"</article>":s="<article>"+s.join("")+"</article>",t.metas.fullexport&&(t.metas.style.forEach(r=>{s+='<link type="text/css" rel="stylesheet" href="'+r+'">'}),t.metas.script.forEach(r=>{s+='<script type="text/javascript" src="'+r+'"></script>'}));var i=B._indexes_||[];i.forEach(r=>{var e=B[r];!e||e.forEach(n=>{s=n.parse(s)})});var l={};return l.content=s,l.title=t.metas.title,l.lineCount=t.metas.totalLineCount,l.chapList=t.chapList,l.meta={},l.meta.author=t.metas.author,l.meta.email=t.metas.email,l.meta.description=t.metas.description,l.meta.update=t.metas.date,l.meta.keywords=t.metas.keyword.map(r=>r),t.metas.others&&(l.meta.others=t.metas.others),l.terminology={},t.termList.forEach(r=>{l.terminology[r[0]]=r[1]}),l.notes={},Object.keys(t.refs).forEach(r=>{l.notes[r]=t.refs[r]}),l.blocks={},Object.keys(t.refs).forEach(r=>{l.blocks[r]=t.blocks[r]}),l},A.parse=(s,a)=>{var t;return t=A.fullParse(s+`
`,a),t?t.content:""};const z=(s,a)=>{a.__level++;var t=[],i="",l=!0;return s.childNodes.forEach(r=>{var e=r.tagName;if(!e){if(r.nodeName==="#comment")return;let p=r.textContent||"";p=p.trim(),p.length>0&&(i+=p);return}e=e.trim().toLowerCase();var n;if(ie.includes(e)){if(l=!1,i.length>0&&(t.push(a.__prefix+i),i=""),e==="blockquote"){let p=a.__prefix;a.__prefix=a.__prefix+">	",n=z(r,a),n=n.flat(Infinity),n.push(`
`),a.__prefix=p}else if(e==="ol"){let p=a.__prefix;a.__prefix.indexOf("-	")>=0||a.__prefix.indexOf("1.	")>=0?a.__prefix="	"+a.__prefix:a.__prefix=a.__prefix+"1.	",n=z(r,a),n=n.flat(Infinity),n.push(""),a.__prefix=p}else if(e==="ul"){let p=a.__prefix;a.__prefix.indexOf("-	")>=0||a.__prefix.indexOf("1.	")>=0?a.__prefix="	"+a.__prefix:a.__prefix=a.__prefix+"-	",n=z(r,a),n=n.flat(Infinity),n.push(""),a.__prefix=p}else n=z(r,a),n=n.flat(Infinity),n.push("");!!n&&n.length>0&&t.push(...n)}else{let[p,h]=$e(r,e,a);h?p.length>0&&(i+=p.join("")):(i.length>0&&(t.push(a.__prefix+i),i=""),p.forEach(f=>{t.push(a.__prefix+f)}))}}),i.length>0&&t.push(a.__prefix+i),a.__level--,t},$=(s,a)=>{var t="";return s.childNodes.forEach(i=>{var l=i.tagName;if(!l){if(i.nodeName==="#comment")return;let r=i.textContent||"";r=r.trim(),r.length>0&&(t+=r);return}if(l=l.trim().toLowerCase(),l==="a"){let r=i.href;r.indexOf("javascript:")===0&&(r="");let e=$(i,a);!r||r.substr(0,1)==="#"||(r.match(/^(ftp|https?):\/\//i)||(r=a.host+r),e="["+e+"]("+r+")"),t+=e;return}if(l==="span"||l==="font"){t+=$(i,a);return}if(l==="strong"||l==="b"){t+=$(i,a);return}if(l==="em"||l==="i"){t+=$(i,a);return}if(l==="sup"){t+=$(i,a);return}if(l==="sub"){t+=$(i,a);return}if(l==="del"){t+=$(i,a);return}t+=i.innerText}),t},$e=(s,a,t)=>{if(a==="script")return[[""],!0];if(a==="style")return[[""],!0];if(a==="link")return[[""],!0];if(a==="hr")return[[`
---
`],!1];if(a==="br")return[[`
`],!0];if(a.match(/^h\d+$/)){let l=a.substring(1,a.length);l*=1;let r=`
`;for(let n=0;n<l;n++)r+="#";let e=$(s,t);return e=r+e+`
`,[[e],!1]}if(a==="a"){let l=s.href;l.indexOf("javascript:")===0&&(l="");let r=$(s,t);return!l||l.substr(0,1)==="#"?[[r],!0]:(l.match(/^(ftp|https?):\/\//i)||(l=t.host+l),r="["+r+"]("+l+")",[[r],!0])}if(a==="img")return s.src.length===0?[[""],!0]:[[`
![](`+s.src+`)
`],!1];if(a==="video")return s.src.length===0?[[""],!0]:[[`
@[](`+s.src+`)
`],!0];if(a==="audio")return s.src.length===0?[[""],!0]:[[`
#[](`+s.src+`)
`],!0];if(a==="span"||a==="font")return[[$(s,t)],!0];if(a==="strong"||a==="b"){let l=$(s,t);return[["**"+l+"**"],!0]}if(a==="em"||a==="i"){let l=$(s,t);return[["*"+l+"*"],!0]}if(a==="u"){let l=$(s,t);return[["__"+l+"__"],!0]}if(a==="sup"){let l=$(s,t);return[["^"+l+"^"],!0]}if(a==="sub"){let l=$(s,t);return[["_"+l+"_"],!0]}if(a==="del"){let l=$(s,t);return[["~~"+l+"~~"],!0]}var i=$(s,t);return[[i],!1]};A.reverse=(s,a,t=!0)=>{if(!s)return"";a=a||{},a.__level=0,a.__prefix="",a.host=a.host||"";var i=z(s,a);return i=i.flat(Infinity),i=i.join(`
`),i=i.replace(/\n{2,}/g,`

`),i},A.parseLine=T,A.parseSection=K,A.generateRandomKey=R,A.SymHidden=Z,A.PreserveWords=G;try{window.MarkUp=A}catch{try{global.MarkUp=A}catch(s){console.error(s)}}})();
