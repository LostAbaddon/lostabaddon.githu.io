(()=>{const Z=Symbol("HIDDEN"),Q=["GOD","THEONE","TITLE","AUTHOR","EMAIL","DESCRIPTION","STYLE","SCRIPT","DATE","KEYWORD","GLOSSARY","TOC","REF","LINK","IMAGES","VIDEOS","AUDIOS","ARCHOR","SHOWTITLE","SHOWAUTHOR","RESOURCES"],se=["toc","glossary","resources","images","videos","audios"],ie=["article","section","div","p","header","footer","aside","ul","ol","li","blockquote","pre","figure","figcaption"],U={system:/(.?)(if|else|for|while|do|continue|break|return|new|delete|try|catch|final|then|async|await|yield|null|undefined|nil|import|export|module|require|default)(.?)/g,function:/(.?)(const|var|let|function|class|Class|Number|String|Boolean|Integer|Float|Promise|Proxy|Array|ArrayBuffer|AysncFunction|Object|Function|Uint8Array|Uint16Array|Uint64Array|Int8Array|Int16Array|Int64Array|Buffer|BigInt)(.?)/g,operator:/(.?)(=>|>=|<=|\+=|\-=|\*=|\/=|\/|\+{1,2}|\-{1,2}|={1,3}|>{1,2}|<{1,2}|\-|\+|\*{1,2})(.?)/g,consts:/(.?)(\d+(\.\d*)?)(.?)/g,object:/(.?)(Math|console|window|process|document|Document|location|localStorage|sessionStorage|navigator|Navigator|Blob|BroadcastChannel|Cache|CacheStorage|CachedDB|History)(.?)/g},G={"\\":"slash","/":"antislash",_:"underline","*":"star","+":"plus","-":"minus","=":"equal","`":"dash","~":"wavy","!":"bang","?":"question",":":"colon","@":"at-circle","#":"sharp","^":"angle",$:"dollar","%":"percent","(":"left-bracket",")":"right-bracket","[":"left-square-bracket","]":"right-square-bracket","{":"left-curve-bracket","}":"right-curve-bracket","|":"vertical-line"},K={};Object.keys(G).forEach(r=>K[G[r].toLowerCase()]=r),K.$="&#36;",Q.forEach((r,s)=>Q[s]=r.toLowerCase());const A={},D={},Y={},B={},R=(r=8)=>{var s="";for(let a=0;a<r;a++)s+=Math.floor(Math.random()*10)+"";return s};A.addExtension=(r,s=0,a=5)=>{if(s===0){let i=D._indexes_;i||(i=[],D._indexes_=i),i.includes(a)||(i.push(a),i.sort((l,t)=>l-t)),i=D[a],i||(i=[],D[a]=i),i.push(r)}else if(s===1){let i=Y._indexes_;i||(i=[],Y._indexes_=i),i.includes(a)||(i.push(a),i.sort((l,t)=>l-t)),i=Y[a],i||(i=[],Y[a]=i),i.push(r)}else if(s===2){let i=B._indexes_;i||(i=[],B._indexes_=i),i.includes(a)||(i.push(a),i.sort((l,t)=>l-t)),i=B[a],i||(i=[],B[a]=i),i.push(r)}};const ne=r=>(r=`
`+r+`
`,r=r.replace(/(\r\n|\n\r)/g,`
`).replace(/\n([ 　]+)/g,(s,a)=>{var i=a.replace(/　/g,"  ").length;return i<4?`
`:s}),r=r.replace(/(\n[ 　\t>\-\+\*(\d+\.)]+)(`{3}|~{3}|\${2})/g,(s,a,i)=>a+`
`+i),Q.forEach(s=>{var a=new RegExp("([\\w\\W]? *)\\["+s+"\\]( *[\\w\\W]?)","gi");r=r.replace(a,(i,l,t)=>l==="]"||t==="["||t==="("?i:l+"%"+s+"%"+t)}),r),le=r=>(r=r.replace(/^\n+|\n+$/gi,""),r=r.replace(/\n{3,}/gi,`


`),r),T=(r,s,a=-Infinity,i)=>{var l=D._indexes_;if(!l)return"";var t=!i;return i=i||{},l.some(e=>{if(a>e||e>=0)return!0;for(var n=D[e],p=!0;p;)p=!1,n.forEach(h=>{var f;[r,f]=h.parse(r,s,i),f&&(p=!0)})}),r=ye(r),l.forEach(e=>{if(!(a>e)&&!(e<0))for(var n=D[e],p=!0;p;)p=!1,n.forEach(h=>{var f;[r,f]=h.parse(r,s,i),f&&(p=!0)})}),t&&(r=V(r,i)),r},z=(r,s,a=0,i)=>{s.parseLevel++;var l=[],t=!1;i||(t=!0,i={});var e=[];l=r.split(`
`),l.forEach((h,f)=>{var u=h.match(/^[ 　\t]*$/);if(h.length===0){e.push([f,1,0,0,0,0,0,0]);return}if(h.match(/^([=\-\+\*\._#]{3,}|~{4,})$/)){h.match(/^\-+$|^=+$/)?e.push([f,0,2,0,0,0,0,0]):h.match(/^~+$/)?e.push([f,0,2,0,0,1,0,0]):e.push([f,0,1,0,0,0,0,0]);return}if(u=h.match(/^(`{3}|~{3})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[2]?e.push([f,0,0,0,0,2,0,0,u[1]]):e.push([f,0,0,0,0,1,0,0,u[1]]);return}if(u=h.match(/^\${2}[ 　\t]*$/),u){u[2]?e.push([f,0,0,0,0,0,0,1]):e.push([f,0,0,0,0,0,0,1]);return}if(u=h.match(/^([\-\+\*~]|\d+\.)[ 　\t]+/),u){if(u=h.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[2]?e.push([f,0,0,0,1,2,0,0]):e.push([f,0,0,0,1,1,0,0]);return}if(u=h.match(/^([\-\+\*~]|\d+\.)[ 　\t]+(\${2})[ 　\t]*$/),u){u[2]?e.push([f,0,0,0,1,0,0,1]):e.push([f,0,0,0,1,0,0,1]);return}e.push([f,0,0,0,1,0,0,0]);return}if(u=h.match(/^(> *)+/),u){if(u=h.match(/^(> *)+[ 　\t]+(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[2]?e.push([f,0,0,1,0,2,0,0]):e.push([f,0,0,1,0,1,0,0]);return}if(u=h.match(/^(> *)+[ 　\t]+(\${2})[ 　\t]*$/),u){u[2]?e.push([f,0,0,1,0,0,0,1]):e.push([f,0,0,1,0,0,0,1]);return}e.push([f,0,0,1,0,0,0,0]);return}if(u=h.match(/^([ 　\t]+)/),u){if(u=h.match(/(`{3,}|~{3,})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[1]?e.push([f,0,0,1,1,2,0,0]):e.push([f,0,0,1,1,1,0,0]);return}if(u=h.match(/(\${2})[ 　\t]*([\w\-\.\+=\?\~\\\/]*)$/),u){u[1]?e.push([f,0,0,1,1,0,0,1]):e.push([f,0,0,1,1,0,0,1]);return}e.push([f,0,0,1,1,0,0,0]);return}if(u=h.match(/\|/g),u){let o=h.match(/\\\|/g);if(!o||!!o&&o.length!==u.length){let c=!0;for(o=h;c;){c=!1;let m=o.replace(/\([^\(\)\[\]\{\}]+?\)/g,"");m=m.replace(/\[[^\(\)\[\]\{\}]+?\]/g,""),m=m.replace(/\{[^\(\)\[\]\{\}]+?\}/g,""),c=m!==o,o=m}if(o.indexOf("|")>=0){e.push([f,0,0,0,0,0,1,0]);return}}}});var n={};e.forEach(h=>{n[h[0]]=h});var p=!1;if(e.length>0){if(p=fe(e,n,l,s,i)||p,e.length>0&&(p=ue(e,n,l,s,i)||p),e.length>0&&(p=he(e,n,l,s,i)||p),t&&a===0&&!!s.metas.linenumber){let h=0;l.forEach((f,u)=>{if(!!f&&!f.match(/^%[\w\-]+%$/)){var o=n[u];if(!(!!o&&(o[1]>0||o[2]>0))&&!f.match(/^[ 　\t>\+\-\*`\^\|_~=\{\}<]$/)&&!f.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))$/)&&!f.match(/^[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\[[^\(\)\[\]\{\}]*?\])$/)){var c=f.match(/\{[<\|>]\}$/);c?(c=c[0],f=f.substr(0,f.length-c.length)+'<span name="line-'+h+'"></span>'+c):f=f+'<span name="line-'+h+'"></span>',h++,l[u]=f}}}),s.metas.totalLineCount=h}[l,n]=M(e,n,l),e.length>0&&(p=pe(e,n,l,s,i)||p,[l,n]=M(e,n,l)),e.length>0&&(p=oe(e,n,l,s,i)||p,[l,n]=M(e,n,l))}return p=ce(e,n,l,s,i)||p,[l,n]=M(e,n,l),p=me(e,n,l,s,i)||p,l=l.map(h=>{if(h===null||h===void 0||h.length===0)return"";var f="";if(t)h.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/)?f=V(h,i,!1):(f=q(h,s),f=V(f,i,!1));else{f=q(h,s);let u="param-"+R();i[u]=f,f="%"+u+"%"}return f}),s.parseLevel--,s.parseLevel>0&&(l=l.join("")),l},M=(r,s,a)=>(a=a.map((i,l)=>[l,i]),a=a.filter(i=>!(!i[1]&&i[1]!=="")),a.forEach((i,l)=>{var t=i[0],e=s[t];!e||(e[0]=l)}),s={},r.forEach(i=>{s[i[0]]=i}),a=a.map(i=>i[1]),[a,s]),q=(r,s)=>{var a="<p",i="</p>",l=[],t=r.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*/,""),e=t.match(/^\{[<\|>]\}/);e&&(e=e[0],e==="{<}"?l.push("align-left"):e==="{|}"?l.push("align-center"):e==="{>}"&&l.push("align-right"),r=r.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*\{[<\|>]\}[ 　\t]*/,(p,h)=>h||"")),t=r.replace(/[ 　\t]*(<\/\w+.*?>)?[ 　\t]*$/,""),e=t.match(/\{[<\|>]\}$/),e&&(e=e[0],e==="{<}"?l.push("align-left"):e==="{|}"?l.push("align-center"):e==="{>}"&&l.push("align-right"),r=r.replace(/[ 　\t]*\{[<\|>]\}[ 　\t]*(<\/\w+.*?>)?[ 　\t]*$/,(p,h)=>h||"")),t=r.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*/,"");var n=t.match(/^:+/);return!!n&&!t.match(/^:([\w\-\.]+?):/)&&(n=n[0],l.push("indent","indent-"+n.length),r=r.replace(/^[ 　\t]*(<\w+.*?>)?[ 　\t]*:+/,(p,h)=>h||"")),l.length>0&&(a=a+' class="'+l.join(" ")+'"'),a=a+">",r.length===0?"":a+r+i},fe=(r,s,a,i,l)=>{var t=[];if(r.forEach(f=>{!f[7]||t.push(f)}),t.length===0)return!1;if(t.length===1)return t[0][7]=0,!1;var e=t.length,n=t[0];n[7]=2;for(let f=1;f<e;f++){let u=t[f];n[7]===2?(u[3]=n[3],u[4]=n[4],u[7]=3):n[7]===3&&(u[7]=2),n=u}t[t.length-1][7]===2&&(t[t.length-1][7]=0),t.forEach(f=>{f[7]===1&&(f[7]=0)});var p=[];t=t.filter(f=>f[7]<2?!1:(f[7]===2&&p.push(f[0]),!0)),e=t.length;for(let f=e-1;f>0;f-=2){let u=t[f-1][0];p.includes(u)||t.splice(f-1,2)}var h=[];e=t.length;for(let f=0;f<e;f+=2)h.push([t[f][0],t[f+1][0]]);return h.forEach(f=>{var u=['<p class="latex block">$$'];for(let c=f[0]+1;c<f[1];c++)u.push(a[c]);u.push("$$</p>"),u=u.join("<br>");var o="latex-"+R();i.finals[o]=u,a[f[0]]="%"+o+"%";for(let c=f[0]+1;c<=f[1];c++)a[c]=null;for(let c=f[0];c<=f[1];c++){let m=s[c];if(!m)continue;let v=r.indexOf(m);v>=0&&r.splice(v,1),delete s[c],m[0]=-1}}),h.length>0},ue=(r,s,a,i,l)=>{var t=[];if(r.forEach(o=>{!o[5]||t.push(o)}),t.length===0)return!1;if(t.length===1)return t[0][5]=0,!1;var e=t.length,n=t[0],p=[],h;n[5]=2,h=n[8];for(let o=1;o<e;o++){let c=t[o];if(!!h&&c[8]!==h){c[5]=0;continue}if(c[5]===2){if(o===e-1&&(c[5]=0),n[5]!==3){n[5]=0;continue}h=c[8]}n[5]===2?(c[3]=n[3],c[4]=n[4],c[5]=3,h=null):n[5]===3&&(c[5]=2),n=c}t[t.length-1][5]===2&&(t[t.length-1][5]=0),t.forEach(o=>{o[5]===1&&(o[5]=0)});var f=[];t=t.filter(o=>o[5]<2?!1:(o[5]===2&&f.push(o[0]),!0)),e=t.length;for(let o=e-1;o>0;o-=2){let c=t[o-1][0];f.includes(c)||t.splice(o-1,2)}var u=[];e=t.length;for(let o=0;o<e;o+=2)u.push([t[o][0],t[o+1][0]]);return u.forEach(o=>{var c=a[o[0]],m=c.match(/(`{3,}|~{3,})[ 　\t]*/)[0],v=c.indexOf(m);m=c.substr(v+m.length,c.length),m=m.replace(/^[ 　\t]+|[ 　\t]+$/g,""),m=m.toLowerCase(),(!m||m===""||m==="text")&&(m="plaintext");var g='<pre lang="'+m+'"><code>',w="</code></pre>",N=!1,H=[],Oe=[];if(m==="plaintext")for(let O=o[0]+1;O<o[1];O++){let d=a[O];H.push("<p>"+d+"</p>")}else for(let O=o[0]+1;O<o[1];O++){let d=a[O],C=[],I=-1,W=null,X=[],k=!1;if(N){let _=d.match(/(\\*)`/);if(!_)C.push([0,d.length-1]);else{let E=_[1].length;E>>1<<1!==E?C.push([0,d.length-1]):(N=!1,k=!0,I=0,W="`",d.replace(/(\\*)(['"`])/g,(b,L,y,S)=>{var j=L.length;!!W&&y!==W||j>>1<<1===j&&(S+=j,I===-1?(I=S,W=y,y==="`"&&(k=!0)):(C.push([I,S]),I=-1,W=null,y==="`"&&(k=!1)))}),k&&(C.push([I,d.length-1]),N=!0))}}else d.replace(/(\\*)(['"`])/g,(_,E,b,L)=>{var y=E.length;!!W&&b!==W||y>>1<<1===y&&(L+=y,I===-1?(I=L,W=b,b==="`"&&(k=!0)):(C.push([I,L]),I=-1,W=null,b==="`"&&(k=!1)))}),k&&(C.push([I,d.length-1]),N=!0);for(let _=C.length-1;_>=0;_--){let E=C[_],b=d.substring(0,E[0]),L=d.substring(E[0],E[1]+1),y=d.substring(E[1]+1,d.length),S="[%:"+X.length+":%]";X.push(L),d=b+S+y}d=d.replace(U.operator,(_,E,b,L,y)=>{var S=C.some(x=>y>=x[0]&&y<=x[1]);if(S)return _;var j=(E||"")+'<span CLASS="operatorword">'+b+"</span>"+(L||"");return j}),d=d.replace(U.system,(_,E,b,L,y)=>{var S=C.some(x=>y>=x[0]&&y<=x[1]);if(S||!!E&&E.match(/[\w\d_\.]/)||!!L&&L.match(/[\w\d_\.]/))return _;var j=(E||"")+'<span CLASS="flowword">'+b+"</span>"+(L||"");return j}),d=d.replace(U.function,(_,E,b,L,y)=>{var S=C.some(x=>y>=x[0]&&y<=x[1]);if(S||!!E&&E.match(/[\w\d_\.]/)||!!L&&L.match(/[\w\d_]/))return _;var j=(E||"")+'<span CLASS="keyword">'+b+"</span>"+(L||"");return j}),d=d.replace(U.consts,(_,E,b,L,y,S)=>{var j=C.some(ae=>S>=ae[0]&&S<=ae[1]);if(j||!!E&&E.match(/[\w\d_\.]/)||!!y&&y.match(/[\w\d_\.]/))return _;var x=(E||"")+'<span CLASS="constsword">'+b+"</span>"+(y||"");return x}),d=d.replace(U.object,(_,E,b,L,y)=>{var S=C.some(x=>y>=x[0]&&y<=x[1]);if(S||!!E&&E.match(/[\w\d_\.]/)||!!L&&L.match(/[\w\d_]/))return _;var j=(E||"")+'<span CLASS="objectword">'+b+"</span>"+(L||"");return j}),X.forEach((_,E)=>{var b='\\[%:(<span CLASS="constsword">)?'+E+"(</span>)?:%\\]";b=new RegExp(b),d=d.replace(b,'<span CLASS="constsword">'+_+"</span>")}),d=d.replace(/<span CLASS="/g,'<span class="'),H.push("<p>"+d+"</p>")}H=H.join(""),H=g+H+w;var te="codeblock-"+R();i.finals[te]=H,a[o[0]]="%"+te+"%";for(let O=o[0]+1;O<=o[1];O++)a[O]=null;for(let O=o[0];O<=o[1];O++){let d=s[O];if(!d)continue;let C=r.indexOf(d);C>=0&&r.splice(C,1),delete s[O],d[0]=-1}}),u.length>0},he=(r,s,a,i,l)=>{var t=[];if(r.forEach(f=>{!f[6]||t.push(f)}),t.length!==0){var e=[],n=0,p=t[0][0];e.push([t[0]]);var h=t.length;for(let f=1;f<h;f++){let u=t[f];u[0]===p+1?e[n].push(u):(n++,e[n]=[u]),p=u[0]}return e=e.filter(f=>!(f.length<2)),e.forEach(f=>{ve(f,r,s,a,i,l)}),!0}},pe=(r,s,a,i,l)=>{var t=0,e=a.length;if(r.forEach((c,m)=>{if(c[3]+c[4]!==0){var v=c[0];v<e&&(e=v),v>t&&(t=v)}}),e>t)return!1;for(let c=t+1;c<a.length-1;c++){let m=s[c],v=s[c+1];if(!!m&&m[1]>0&&!!v&&v[1]>0)break;t=c}if(t===a.length-2){let c=a.length-1,m=s[c];(!m||m[1]===0)&&(t=c)}var n=0,p=[[[e,s[e]]]],h=!1,f=!0;s[e][3]>0&&(h=!0);for(let c=e+1;c<=t;c++){var u=s[c];if(!u){f&&p[n].push([c,null]);continue}if(u[1]){if(!f)continue;let m=s[c+1];if(!m||m[1]>0){f=!1;continue}p[n].push([c,u]);continue}if(u[3]+u[4]===0){f&&p[n].push([c,u]);continue}if(f){p[n].push([c,u]);continue}n++,p[n]=[],s[c][3]>0?h=!0:h=!1,f=!0,p[n].push([c,u])}var o=!1;return p.forEach(c=>{c.forEach(w=>{var N=w[0];w[1]||(a[N]="    "+a[N])});var m=0,v=c[0][0],g=a[v],m=-1;g.match(/^[ 　\t>]/)?m=0:g.match(/^[\-\+]|[\*~][ 　\t]/)?m=1:g.match(/^\d+\.[ 　\t]/)&&(m=2),!(m<0)&&(change=!0,m===0?de(c,r,s,a,i,l):m===1?J(!1,c,r,s,a,i,l):m===2&&J(!0,c,r,s,a,i,l))}),o},oe=(r,s,a,i,l)=>{var t=[],e=[];r.forEach(n=>{if(n[2]!==0){var p=n[0],h=s[p-1];if(h)h[1]>0&&t.push([p,a[p].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let f=a[p-1];if(p===0||!!f.match(/^%[\w\-]+%$/))t.push([p,a[p].replace(/^[ 　\t]+|[ 　\t]+$/,"")[0]]);else{let u=a[p].substr(0,1);u==="="?e.push([p-1,1]):u==="-"?e.push([p-1,2]):u==="~"?e.push([p-1,3]):u==="+"?e.push([p-1,3]):u==="_"?e.push([p-1,3]):u==="*"?e.push([p-1,4]):u==="#"?e.push([p-1,5]):u==="."&&e.push([p-1,6]),a[p]=null}}}});for(let n=0;n<a.length;n++){let p=a[n];if(!p)continue;let h=p.match(/^(#+)[ 　\t]*/);if(h){let f=h[0],u=h[1];f!==p&&p.indexOf(f+"[")!==0&&(e.push([n,u.length]),a[n]=p.replace(/^#+[ 　\t]*|[ 　\t]*#+$/g,""))}}return t.length+e.length===0?!1:(e.sort((n,p)=>n[0]-p[0]),t.forEach(n=>{var[p,h]=n,f="headline-"+R(),u="<hr";h==="="?u=u+' class="heavy">':h==="-"?u=u+' class="light">':h==="*"?u=u+' class="star">':h==="~"?u=u+' class="wavy">':h==="."?u=u+' class="dotted">':h==="_"?u=u+' class="dashed">':h==="+"?u=u+' class="strong">':h==="#"?u=u+' class="heavystrong">':u=u+">",l[f]=u,a[p]="%"+f+"%"}),e.forEach(n=>{var[p,h]=n,f="header-"+R(),u="h"+(h||1),o=a[p];o=T(o,i),o=o.replace(/^[ 　\t\n]+|[ 　\t\n]+$/,""),o="<"+u+">"+o+"</"+u+">",l[f]=o,a[p]="%"+f+"%"}),!0)},ce=(r,s,a,i,l)=>{for(var t=[],e=!0;e;)e=!1,a.forEach(n=>{if(n.length===0)return t.push(n);n=n.replace(/(\])[ 　\t]*(\[([\w \-\.]+)\])/g,(u,o,c,m)=>{var v=i.refs[m],g;if(!v||v.indexOf("://")<0&&v.indexOf("@")<0&&!v.match(/^\.{0,2}[\\\/]/)||v.indexOf(`
`)>=0){if(g=i.metas[m.toLowerCase()],!g||g.indexOf("://")<0&&g.indexOf("@")<0&&!g.match(/^\.{0,2}[\\\/]/)||g.indexOf(`
`)>=0)return u;v=g}return o+"("+v+")"});for(var p=[],h=[],f=!0;f;)f=!1,n=n.replace(/[!@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\](\([^\(\)\[\]\{\}]*?\))/g,(u,o,c)=>(f=!0,c.match(/[ 　\t]+"(left|right)"\)$/)?h.push(u):p.push(u),""));n=n.replace(/^[ 　\t]+|[ 　\t]+$/g,""),h.forEach(u=>t.push(u)),n.length>0&&(p.length>0&&(e=!0),t.push(n)),p.forEach(u=>t.push(u))}),a.splice(0,a.length),t.forEach(n=>a.push(n)),t=[];return!0},me=(r,s,a,i,l)=>{var t=[],e=[],n=[],p=-1;a.forEach((h,f)=>{if(!h||h.length===0){p=-1;return}var u=h.match(/^%([\w\W]+)%(\{[\w \-\.\u0800-\uffff]+\})*$/);if(u){p=-1;return}if(u=h.match(/^[@#]\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/),u){n.push([f,h]),p=-1;return}u=h.match(/^!\[[^\(\)\[\]\{\}]*?(\[.*?\][ 　\t]*\(.*?\))*?[^\(\)\[\]\{\}]*?\]\([^\(\)\[\]\{\}]*?\)$/);var o=u?1:0;o===p?o===0?t[t.length-1].push([f,h]):o===1&&e[e.length-1].push([f,h]):(o===0?t[t.length]=[[f,h]]:o===1&&(e[e.length]=[[f,h]]),p=o)}),e=e.filter(h=>{var f=h.length>1;return h.length===1&&n.push(h[0]),f}),t.forEach(h=>{var f=[],u=h[0][0];h.forEach(o=>{var c=o[0],m=o[1];m.length!==0&&(f.push(T(m,i)),a[c]=null)}),f=f.join("<br>"),a[u]=f}),e.forEach(h=>{var f=[],u=h[0][0];h.forEach(c=>{f.push(T(c[1],i)),a[c[0]]=null}),f=f.join(""),f='<div class="image-wall">'+f+"</div>";var o="imagewall-"+R();l[o]=f,a[u]="%"+o+"%"}),n.forEach(h=>{var[f,u]=h;u=T(u,i);var o="resource-"+R();l[o]=u,a[f]="%"+o+"%"})},ve=(r,s,a,i,l,t)=>{var e=!0,n=null,p=-1;r.some((m,v)=>{var g=i[m[0]];g=g.replace(/^[ 　\t]+|[ 　\t]+$/g,"");var w=g.match(/[\|:\-]+/);if(!!w&&(w=w[0],g===w))return n=w,p=m[0],v===0&&(e=!1),!0}),n?(n=n.replace(/^\||\|$/g,""),n=n.split("|"),n=n.map(m=>m.match(/^:\-:$/)?1:m.match(/^:\-$/)?0:m.match(/^\-:$/)?2:3)):(e=!1,n=[]);var h=[],f=0;r.forEach(m=>{var v=m[0];if(v!==p){var g=ge(i[v]);h.push(g),g.length>f&&(f=g.length)}});for(let m=n.length;m<f;m++)n.push("");for(let m=0;m<h.length-1;m++){let v=h[m],g=v?v.length:f;for(let w=v.length;w<f;w++)v.push("")}var u;e&&(u=h[0],h.shift());for(let m=0;m<f;m++){if(n[m]!==3)continue;let v=!0;h.some(g=>{var w=g[m];if(!!w&&w*1!==w)return v=!1,!0}),v?n[m]=2:n[m]=0}var o="<table>";e&&(o+="<thead><tr>",u.forEach((m,v)=>{m=T(m,l);var g='<th align="',w=n[v];w===1?g+="center":w===2?g+="right":g+="left",g+='">'+m+"</td>",o+=g}),o+="</tr></thead>"),o+="<tbody>",h.forEach(m=>{o+="<tr>",m.forEach((v,g)=>{v=T(v,l);var w='<td align="',N=n[g];N===1?w+="center":N===2?w+="right":w+="left",w+='">'+v+"</td>",o+=w}),o+="</tr>"}),o+="</tbody></table>";var c="table-"+R();t[c]=o,u=r[0][0],total=r.length;for(let m=0;m<total;m++){let v=r[m],g=v[0];i[g]=null,delete a[g];let w=s.indexOf(v);w>=0&&s.splice(w,1),v[0]=-1}i[u]="%"+c+"%"},ge=r=>{r.substr(0,1)!=="|"&&(r="|"+r),r.substr(r.length-1,1)!=="|"&&(r=r+"|");var s=r.length,a=0,i=[],l=0;for(let t=1;t<s;t++){let e=r.substr(t,1);if(e==="|"&&a===0){i.push(r.substr(l+1,t-l-1)),l=t;continue}"([{<".indexOf(e)>=0?a++:">}])".indexOf(e)>=0&&a--}return i},de=(r,s,a,i,l,t)=>{var e="quote",n=i[r[0][0]];if(n=n.match(/^>[ 　\t]*\[([\w\W]+?)\]/),n){let u=n[1];u=u.replace(/^[ 　\t]+|[ 　\t]+$/g,""),u.length>0&&!l.metas[u]&&!l.blocks[u]&&(e=u)}var p=!0;n=r.map((u,o)=>{var c=u[0],m=i[c];o>0&&(p=p&&!!m.match(/^(\t|　　|    | 　 |  　|　  )/));var v=m.replace(/^(\t|　　|    | 　 |  　|　  )/,"");return v!==m&&p?m=v:(head=m.match(/^>[ 　\t]*/),head&&(head=head[0],m=m.replace(head,""))),m}),n[0]=n[0].replace(new RegExp("^[ \u3000\\t]*\\["+e.replace(/\\/g,"\\\\")+"\\][ \u3000\\t]*"),""),n=n.join(`
`),n=n.replace(/^\n+|\n+$/g,"");var h='<blockquote class="'+e+'">';n=z(n,l,2,t),h+=n,h+="</blockquote>";var f="blockquote-"+R();t[f]=h,r.forEach(u=>{var o=u[0];i[o]=null,delete a[o];var c=s.indexOf(u[1]);c>=0&&s.splice(c,1)}),i[r[0][0]]="%"+f+"%"},J=(r,s,a,i,l,t,e)=>{var n=[],p=-1;s.forEach(u=>{var o=u[0],c=l[o];if(head=c.match(/^([\-\+\*>~]|\d+\.)[ 　\t]+/),head){c=c.replace(head[0],""),p++,n[p]=[c];return}c=c.replace(/^(\t|　　|    | 　 |  　|　  )/,""),n[p].push(c)}),n=n.map(u=>(u=u.join(`
`),u=u.replace(/^\n+|\n+$/g,""),u));var h="";r?h="<ol>":h="<ul>",n.forEach(u=>{h+="<li>",h+=z(u,t,2,e),h+="</li>"}),r?h+="</ol>":h+="</ul>";var f="list-"+R();e[f]=h,s.forEach(u=>{var o=u[0];l[o]=null,delete i[o];var c=a.indexOf(u[1]);c>=0&&a.splice(c,1)}),l[s[0][0]]="%"+f+"%"},we=(r,s)=>{var a=[[]],i=0,l=[0],t=[];if(r.forEach(e=>{var n=!1;e=e.replace(/^<h(\d+)>/i,(p,h)=>{n=!0,h=h*1,h===1&&(i++,a[i]=[]),l[h-1]=(l[h-1]||0)+1;for(let u=h;u<l.length;u++)l[u]=0;var f="chap";for(let u=0;u<h;u++)f+="-"+(l[u]||1);return p=p+'<a name="'+f+'">',t.push([h,f,e.replace(/<[\w\W]+?>/gi,"")]),p}).replace(/<\/h(\d+)>$/i,p=>"</a>"+p).replace(/\{([\w \-\.]+)\}/g,(p,h)=>{var f=s.termList[h];return f?(Array.isArray(f)&&(f=f[0]),'<a class="terminology" name="'+h+'" href="#ref-'+h+'"><strong>'+f+"</strong></a>"):p}),a[i].push(e)}),a=a.filter(e=>e.length>0),s.chapList=t,a=a.map(e=>{var n=[],p="<section>",h="</section>";return e.forEach((f,u)=>{var o=!1;f=f.replace(/<a class="notemark" type="footnote" name="([\w \-\.]+?)">/g,(c,m)=>{o=!0,n.push(m);var v=c.substr(0,c.length-1)+' href="#footnote-'+m+'">';return v}),o&&(e[u]=f)}),e=e.join(""),n.length===0||(n=n.map((f,u)=>{var o=s.refs[f],c=s.footnotes.indexOf(f);return u++,e=e.replace(new RegExp("%%FN-"+c+"%%","g"),u),'<p class="footnote-content"><a class="index" name="footnote-'+f+'">'+u+"\uFF1A</a>"+o+"</p>"}),e+='<hr class="footnote-line"><footer><p class="footnote-title">\u811A\u6CE8\uFF1A</p>',e+=n.join(""),e+='</footer><hr class="footnote-line end">'),p+e+h}),!!s.endnotes&&s.endnotes.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="EndNote">\u5C3E\u6CE8</a></h1>',s.endnotes.forEach((n,p)=>{e+='<p class="endnote-content"><a class="index" name="endnote-'+n+'">'+(p+1)+"\uFF1A</a>"+s.refs[n]+"</p>"}),e+="</section>",a.push(e)}if(s.metas.glossary&&!!s.termList&&s.termList.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="Glossary">\u672F\u8BED\u8868</a></h1>',e+=re(s),e+="</section>",a.push(e)}if(s.image=s.image||[],s.video=s.video||[],s.audio=s.audio||[],s.metas.resources&&s.image.length+s.video.length+s.audio.length>0){let e='<hr class="endnote-line">';e+='<section class="endnote-chapter"><h1 class="endnote-title"><a name="ResourceList">\u8D44\u6E90\u8868</a></h1>',s.image.length>0&&(e+='<h2><a name="ImageResourceList">\u56FE\u7247</a></h2>',e+=P(s,"image")),s.video.length>0&&(e+='<h2><a name="VideoResourceList">\u89C6\u9891</a></h2>',e+=P(s,"video")),s.audio.length>0&&(e+='<h2><a name="AudioResourceList">\u97F3\u9891</a></h2>',e+=P(s,"audio")),e+="</section>",a.push(e)}if(s.metas.showtitle){let e='<header class="article-title">';if(e+="<p>"+s.metas.title+"</p>",s.metas.showauthor&&(s.metas.author&&(e+='<p class="author">',s.metas.email&&(e+='<a href="mailto:'+s.metas.email+'">'),e+=s.metas.author,s.metas.email&&(e+="</a>"),e+="</p>"),s.metas.date)){e+='<p class="author date">';let n=s.metas.date*1;if(isNaN(n))n=s.metas.date;else{n=new Date(n);let p=n.getYear()+1900,h=n.getMonth()+1;h<10&&(h="0"+h);let f=n.getDate();f<10&&(f="0"+f);let u=n.getHours();u<10&&(u="0"+u);let o=n.getMinutes();o<10&&(o="0"+o);let c=n.getSeconds();c<10&&(c="0"+c),n=p+"/"+h+"/"+f+" "+u+":"+o+":"+c}e+=n,e+="</p>"}e+="</header>",a.unshift(e)}return a},Ee=(r,s)=>{for(var a=!0,i=0;a&&(a=!1,r=r.map(l=>(l=l.replace(/\[([\w \-\.]+?)\]/g,(t,e,n)=>{var p=l.lastIndexOf("<sup>",n),h=l.lastIndexOf("</sup>",n);if(p>h)return t;var f=s.blocks[e];return f?(a=!0,f):t}),l)),i++,i!==10););return r},_e=(r,s)=>{var a=(s.metas.LANG||"zh").toLowerCase();if(r=r.map(i=>(i=i.replace(/%glossary%/gi,l=>re(s)),i=i.replace(/%resources%/gi,l=>P(s,"image")+P(s,"video")+P(s,"audio")),i=i.replace(/%images%/gi,l=>P(s,"image")),i=i.replace(/%videos%/gi,l=>P(s,"video")),i=i.replace(/%audios%/gi,l=>P(s,"audio")),i=i.replace(/%toc%(\{[\w\W]+?\})*/gi,l=>{var t=l.match(/\{[\w\W]+?\}/g),e="\u76EE\u5F55",n=3;return t&&t.forEach(p=>{p=p.substr(1,p.length-2);var h=p*1;isNaN(h)?e=p:n=h}),s.toced=!0,ee(s,e,n)}),Object.keys(s.metas).forEach(l=>{var t=l.toLowerCase();se.includes(l)||(t=s.metas[l],t===!0||t===!1?a==="zh"?t=t?"\u662F":"\u5426":t=t?"On":"Off":Array.isArray(t)&&(a==="zh"?t=t.join("\u3001"):t=t.join(", ")),i=i.replace(new RegExp("%"+l+"%","gi"),e=>t))}),i=i.replace(/%([\w \-\.]+)%/g,(l,t)=>{var e=s.finals[t];return e||l}),i)),s.metas.toc&&!s.toced){let i=ee(s,"\u76EE\u5F55",3);i.indexOf('<p class="content-')>=0&&(i="<section>"+i+"</section>",s.metas.showtitle?r.splice(1,0,i):r.unshift(i))}return r},ee=(r,s,a)=>{var i='<h1 name="ContentTable">'+s+'</h1><aside class="content-table">';return r.chapList.forEach(l=>{if(!(l[0]>a)){var t='<p class="content-item level-'+l[0]+'">';for(let e=0;e<l[0];e++)t+='<span class="content-indent"></span>';t+='<a class="content-link" href="#'+l[1]+'">'+l[2]+"</a>",t+="</p>",i+=t}}),!!r.endnotes&&r.endnotes.length>0&&(i+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#EndNote">\u5C3E\u6CE8</a></p>'),r.metas.glossary&&!!r.termList&&r.termList.length>0&&(i+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#Glossary">\u672F\u8BED\u8868</a></p>'),r.metas.resources&&r.image.length+r.video.length+r.audio.length>0&&(i+='<p class="content-item level-1"><span class="content-indent"></span><a class="content-link" href="#ResourceList">\u8D44\u6E90\u8868</a></p>',r.image.length>0&&(i+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#ImageResourceList">\u56FE\u7247</a></p>'),r.video.length>0&&(i+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#VideoResourceList">\u89C6\u9891</a></p>'),r.audio.length>0&&(i+='<p class="content-item level-2"><span class="content-indent"></span><span class="content-indent"></span><a class="content-link" href="#AudioResourceList">\u97F3\u9891</a></p>')),i+="</aside>",i},re=r=>{var s="";return r.termList===0?"":(r.termList.forEach(a=>{var[i,l]=a,t=r.terms[i],e='<p class="glossary-item">';e+='<a class="glossary-indent" name="ref-'+i+'">'+l+"</a>",e+=t,e+="</p>",s+=e}),s)},P=(r,s)=>{var a=r[s];if(!a||!Array.isArray(a)||a.length===0)return"";var i=[],l="<ul>";return a.forEach(t=>{var e=t[1];e=e.replace(/\%([\w \-]+?)\%/g,(n,p)=>{var h=K[p.toLowerCase()];return h||n}),!i.includes(e)&&(i.push(e),l+='<li><a href="'+e+'" target="_blank">'+e+"</a></li>")}),l+="</ul>",l},ye=r=>(r=r.replace(/(\\+)(.)/g,(s,a,i)=>{var l=Math.floor(a.length/2),t=l*2!==a.length,e="",n="%"+G["\\"]+"%";for(let p=0;p<l;p++)e+=n;if(t){let p=G[i];p?e=e+"%"+p+"%":e=e+i}else e=e+i;return e}),r),V=(r,s,a=!0)=>{for(var i=!0;i;)i=!1,r=r.replace(/\%([\w \-]+?)\%/g,(l,t)=>{var e=s[t];return e?(i=!0,e):l});if(!a)return r;for(i=!0;i;)i=!1,r=r.replace(/\%([\w \-]+?)\%/g,(l,t)=>{var e=s[Z][t.toLowerCase()];return e?(i=!0,e):l});return r=r.replace(/\n+/g,"<br>"),r=r.replace(/\/{2}/g,(l,t)=>{if(t===0)return"<br>";var e=r.substr(t-1,1);return e===":"?l:"<br>"}),r=r.replace(/^(<\/?br>)+|(<\/?br>)+$/gi,"<br>"),r},Le=r=>{if(!r)return[];r=r.split(/[ ,，；;、　]+/).filter(a=>a.length>0);var s=[];return r.forEach(a=>{s.includes(a)||s.push(a)}),s},be=(r,s)=>{for(var a={},i=!0;i;)i=!1,s=s.replace(/\n([A-Z\u0800-\uffff]+?) *[:：] *([\w\W]*?)\n/,(l,t,e)=>e.length===0||(t==="\u6807\u9898"?t="title":t==="\u4F5C\u8005"?t="author":t==="\u7B80\u4ECB"?t="description":t==="\u5173\u952E\u8BCD"?t="keyword":t==="\u66F4\u65B0"?t="date":t=t.toLowerCase(),!Q.includes(t))?l:(i=!0,a[t]=e,`
`));if(!!a.showtitle&&["on","yes","true"].includes(a.showtitle.toLowerCase())?a.showtitle=!0:a.showtitle=void 0,!!a.glossary&&["on","yes","true"].includes(a.glossary.toLowerCase())?a.glossary=!0:a.glossary=void 0,!!a.links&&["on","yes","true"].includes(a.links.toLowerCase())?a.links=!0:a.links=void 0,!!a.refs&&["on","yes","true"].includes(a.refs.toLowerCase())?a.refs=!0:a.refs=void 0,!!a.terms&&["on","yes","true"].includes(a.terms.toLowerCase())?a.terms=!0:a.terms=void 0,!!a.resources&&["on","yes","true"].includes(a.resources.toLowerCase())?a.resources=!0:a.resources=void 0,!!a.toc&&["on","yes","true"].includes(a.toc.toLowerCase())?a.toc=!0:a.toc=void 0,r.metas=a,r.metas.keyword=Le(r.metas.keyword),r.metas.date)try{r.metas.date=new Date(r.metas.date).getTime()}catch{delete r.metas.date}for(r.metas.god=r.metas.theone='<a href="mailto:lostabaddon@gmail.com">LostAbaddon</a>',r.metas.script?r.metas.script=r.metas.script.split(/[,; 　\t]+/):r.metas.script=[],r.metas.style?r.metas.style=r.metas.style.split(/[,; 　\t]+/).map(l=>l.replace(/\{[\w\W]*\}/,"")):r.metas.style=[],r.termList=r.termList||[],r.mainParser=!1,r.refs={},i=!0;i;)i=!1,s=s.replace(/\n\[([\w \-\.\+\=\\\/]+?)\] *[:：] *([\w\W]+?)\n([\n\[])/,(l,t,e,n,p)=>(t=t.trim(),e=e.trim(),t.length===0||e.length===0?l:(r.refs[t]=e,i=!0,`
`+n)));for(r.blocks={},i=!0;i;)i=!1,s=s.replace(/\[:([\w \-\.\+\=\\\/]+?):\]([\w\W]*?)\n*\[:\1:\]/g,(l,t,e)=>{if(t=t.trim(),!(t.length===0||e.length===0))return r.blocks[t]=e,i=!0,""});return Object.keys(r.refs).forEach(l=>{var t=r.refs[l];t=T(t,r),t=t.replace(/\%([\w \-]+?)\%/g,(e,n)=>{var p=K[n.toLowerCase()];return p||e}),r.refs[l]=t}),Object.keys(r.blocks).forEach(l=>{var t=r.blocks[l],e=t.match(/^\n+/);t=t.trim();var n;r.parseLevel=0,e?n=z(t,r,1):n=[T(t,r)],r.blocks[l]=n.join("")}),r.anchors=[],r.terms={},r.notes={},s.replace(/\] *(\[[\^:]([\w ]+?)\]|\{([\w ]+?)\})/g,(l,t,e,n)=>{var p=e||n;r.refs[p]?t.substr(0,1)==="{"?r.terms[p]=r.refs[p]:r.notes[p]=r.refs[p]:t.substr(0,1)==="{"&&!r.anchors.includes(p)&&r.anchors.push(p)}),s=le(s),s};A.fullParse=(r,s)=>{var a={finals:{},toced:!1};r=ne(r),r=be(a,r),a.parseLevel=0,a.mainParser=!0,a.metas.title=a.metas.title||"\u65E0\u540D\u6587";var i=Object.keys(a.metas);Object.keys(s).forEach(e=>{i.includes(e)||i.push(e)}),s.overwrite?i.forEach(e=>{a.metas[e]=s[e]===null||s[e]===void 0?a.metas[e]:s[e]}):i.forEach(e=>{a.metas[e]=a.metas[e]===null||a.metas[e]===void 0?s[e]:a.metas[e]}),i.forEach(e=>{(a.metas[e]===null||a.metas[e]===void 0)&&(a.metas[e]=!1)}),r=z(r,a),r=r.map(e=>e.replace(/\%([\w \-]+?)\%/g,(n,p)=>{var h=K[p.toLowerCase()];return h||n})),r=Ee(r,a),r=we(r,a),r=_e(r,a),a.metas.classname?r='<article class="'+a.metas.classname+'">'+r.join("")+"</article>":r="<article>"+r.join("")+"</article>",a.metas.fullexport&&(a.metas.style.forEach(e=>{r+='<link type="text/css" rel="stylesheet" href="'+e+'">'}),a.metas.script.forEach(e=>{r+='<script type="text/javascript" src="'+e+'"></script>'}));var l=B._indexes_||[];l.forEach(e=>{var n=B[e];!n||n.forEach(p=>{r=p.parse(r,a)})}),r=r.replace(/<p>(<br\/?>)+<\/p>/gi,"");var t={};return t.content=r,t.title=a.metas.title,t.lineCount=a.metas.totalLineCount,t.chapList=a.chapList,t.meta={},t.meta.author=a.metas.author,t.meta.email=a.metas.email,t.meta.description=a.metas.description,t.meta.update=a.metas.date,t.meta.keywords=a.metas.keyword.map(e=>e),a.metas.others&&(t.meta.others=a.metas.others),t.terminology={},a.termList.forEach(e=>{t.terminology[e[0]]=e[1]}),t.notes={},Object.keys(a.refs).forEach(e=>{t.notes[e]=a.refs[e]}),t.blocks={},Object.keys(a.refs).forEach(e=>{t.blocks[e]=a.blocks[e]}),t},A.parse=(r,s)=>{var a;return a=A.fullParse(r+`
`,s),a?a.content:""};const F=(r,s)=>{s.__level++;var a=[],i="",l=!0;return r.childNodes.forEach(t=>{var e=t.tagName;if(!e){if(t.nodeName==="#comment")return;let p=t.textContent||"";p=p.trim(),p.length>0&&(i+=p);return}e=e.trim().toLowerCase();var n;if(ie.includes(e)){if(l=!1,i.length>0&&(a.push(s.__prefix+i),i=""),e==="blockquote"){let p=s.__prefix;s.__prefix=s.__prefix+">	",n=F(t,s),n=n.flat(Infinity),n.push(`
`),s.__prefix=p}else if(e==="ol"){let p=s.__prefix;s.__prefix.indexOf("-	")>=0||s.__prefix.indexOf("1.	")>=0?s.__prefix="	"+s.__prefix:s.__prefix=s.__prefix+"1.	",n=F(t,s),n=n.flat(Infinity),n.push(""),s.__prefix=p}else if(e==="ul"){let p=s.__prefix;s.__prefix.indexOf("-	")>=0||s.__prefix.indexOf("1.	")>=0?s.__prefix="	"+s.__prefix:s.__prefix=s.__prefix+"-	",n=F(t,s),n=n.flat(Infinity),n.push(""),s.__prefix=p}else n=F(t,s),n=n.flat(Infinity),n.push("");!!n&&n.length>0&&a.push(...n)}else{let[p,h]=$e(t,e,s);h?p.length>0&&(i+=p.join("")):(i.length>0&&(a.push(s.__prefix+i),i=""),p.forEach(f=>{a.push(s.__prefix+f)}))}}),i.length>0&&a.push(s.__prefix+i),s.__level--,a},$=(r,s)=>{var a="";return r.childNodes.forEach(i=>{var l=i.tagName;if(!l){if(i.nodeName==="#comment")return;let t=i.textContent||"";t=t.trim(),t.length>0&&(a+=t);return}if(l=l.trim().toLowerCase(),l==="a"){let t=i.href;t.indexOf("javascript:")===0&&(t="");let e=$(i,s);!t||t.substr(0,1)==="#"||(t.match(/^(ftp|https?):\/\//i)||(t=s.host+t),e="["+e+"]("+t+")"),a+=e;return}if(l==="span"||l==="font"){a+=$(i,s);return}if(l==="strong"||l==="b"){a+=$(i,s);return}if(l==="em"||l==="i"){a+=$(i,s);return}if(l==="sup"){a+=$(i,s);return}if(l==="sub"){a+=$(i,s);return}if(l==="del"){a+=$(i,s);return}a+=i.innerText}),a},$e=(r,s,a)=>{if(s==="script")return[[""],!0];if(s==="style")return[[""],!0];if(s==="link")return[[""],!0];if(s==="hr")return[[`
---
`],!1];if(s==="br")return[[`
`],!0];if(s.match(/^h\d+$/)){let l=s.substring(1,s.length);l*=1;let t=`
`;for(let n=0;n<l;n++)t+="#";let e=$(r,a);return e=t+e+`
`,[[e],!1]}if(s==="a"){let l=r.href;l.indexOf("javascript:")===0&&(l="");let t=$(r,a);return!l||l.substr(0,1)==="#"?[[t],!0]:(l.match(/^(ftp|https?):\/\//i)||(l=a.host+l),t="["+t+"]("+l+")",[[t],!0])}if(s==="img")return r.src.length===0?[[""],!0]:[[`
![](`+r.src+`)
`],!1];if(s==="video")return r.src.length===0?[[""],!0]:[[`
@[](`+r.src+`)
`],!0];if(s==="audio")return r.src.length===0?[[""],!0]:[[`
#[](`+r.src+`)
`],!0];if(s==="span"||s==="font")return[[$(r,a)],!0];if(s==="strong"||s==="b"){let l=$(r,a);return[["**"+l+"**"],!0]}if(s==="em"||s==="i"){let l=$(r,a);return[["*"+l+"*"],!0]}if(s==="u"){let l=$(r,a);return[["__"+l+"__"],!0]}if(s==="sup"){let l=$(r,a);return[["^"+l+"^"],!0]}if(s==="sub"){let l=$(r,a);return[["_"+l+"_"],!0]}if(s==="del"){let l=$(r,a);return[["~~"+l+"~~"],!0]}var i=$(r,a);return[[i],!1]};A.reverse=(r,s,a=!0)=>{if(!r)return"";s=s||{},s.__level=0,s.__prefix="",s.host=s.host||"";var i=F(r,s);return i=i.flat(Infinity),i=i.join(`
`),i=i.replace(/\n{2,}/g,`

`),i},A.parseLine=T,A.parseSection=z,A.generateRandomKey=R,A.SymHidden=Z,A.PreserveWords=G;try{window.MarkUp=A}catch{try{global.MarkUp=A}catch(r){console.error(r)}}})();
